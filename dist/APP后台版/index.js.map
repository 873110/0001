{"version":3,"file":"index.js","mappings":"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","sources":["src://tavern_helper_template/src/APP/shared/serviceOrders.ts","src://tavern_helper_template/external var \"Vue\"","src://tavern_helper_template/external var \"_\"","src://tavern_helper_template/src/APP/shared/shopData.ts","webpack://tavern_helper_template/./src/APP/ItemDetail.vue?ddbd","webpack://tavern_helper_template/src/APP/ItemDetail.vue?cbaf","webpack://tavern_helper_template/./src/APP/ShopDetail.vue?d2c1","webpack://tavern_helper_template/src/APP/ShopDetail.vue?de21","src://tavern_helper_template/src/APP/utils.ts","webpack://tavern_helper_template/./src/APP/Service.vue?7e85","webpack://tavern_helper_template/src/APP/Service.vue?2b4b","src://tavern_helper_template/node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/exportHelper.js","src://tavern_helper_template/src/APP/shared/selectedPackage.ts","src://tavern_helper_template/src/APP/components/PackageImageGallery.vue","webpack://tavern_helper_template/src/APP/components/PackageImageGallery.vue?da55","src://tavern_helper_template/src/APP/components/Play.vue","webpack://tavern_helper_template/src/APP/components/Play.vue?1c53","src://tavern_helper_template/src/APP/shared/uiState.ts","src://tavern_helper_template/src/APP/components/HistoryOverlay.vue","webpack://tavern_helper_template/src/APP/components/HistoryOverlay.vue?6fd8","src://tavern_helper_template/src/APP/components/PackageDetail.vue","webpack://tavern_helper_template/src/APP/components/PackageDetail.vue?7751","webpack://tavern_helper_template/src/APP/components/PackageImages.vue?a2c7","src://tavern_helper_template/src/APP/components/PackageImages.vue","src://tavern_helper_template/src/APP/components/ServiceStats.vue","webpack://tavern_helper_template/src/APP/components/ServiceStats.vue?f414","src://tavern_helper_template/src/APP/components/ServiceStatus.vue","webpack://tavern_helper_template/src/APP/components/ServiceStatus.vue?950d","src://tavern_helper_template/src/APP/components/ShopList.vue","webpack://tavern_helper_template/src/APP/components/ShopList.vue?8c2f","src://tavern_helper_template/src/APP/components/PlayPanelsModal.vue","webpack://tavern_helper_template/src/APP/components/PlayPanelsModal.vue?4f08","src://tavern_helper_template/src/APP/components/RpgHud.vue","webpack://tavern_helper_template/src/APP/components/RpgHud.vue?44ee","src://tavern_helper_template/src/APP/Dashboard.vue","webpack://tavern_helper_template/src/APP/Dashboard.vue?fc4f","src://tavern_helper_template/external var \"z\"","webpack://tavern_helper_template/./src/APP/Discover.vue?f7a5","webpack://tavern_helper_template/src/APP/Discover.vue?6856","src://tavern_helper_template/src//schema.ts","src://tavern_helper_template/src/APP/shared/shopStoreMvu.ts","src://tavern_helper_template/external var \"VueRouter\"","src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/webpack/runtime/compat get default export","src://tavern_helper_template/webpack/runtime/define property getters","src://tavern_helper_template/webpack/runtime/hasOwnProperty shorthand","src://tavern_helper_template/webpack/runtime/make namespace object","src://tavern_helper_template/external var \"$\"","webpack://tavern_helper_template/./src/APP/SplashScreen.vue?2664","webpack://tavern_helper_template/src/APP/SplashScreen.vue?abaf","src://tavern_helper_template/src/Demo/utils/adapters/shop-generation.ts","src://tavern_helper_template/src/Demo/utils/core.ts","webpack://tavern_helper_template/./src/APP/Home.vue?ca06","webpack://tavern_helper_template/src/APP/Home.vue?602d","src://tavern_helper_template/src/APP/.ts","webpack://tavern_helper_template/./src/APP/components/ErrorBoundary.vue?7a79","webpack://tavern_helper_template/src/APP/components/ErrorBoundary.vue?f147","src://tavern_helper_template/src/APP/components/Sidebar.vue","webpack://tavern_helper_template/src/APP/components/Sidebar.vue?3943","webpack://tavern_helper_template/./src/APP/app.vue?67d9","webpack://tavern_helper_template/src/APP/app.vue?8097","src://tavern_helper_template/src/APP/logger.ts","src://tavern_helper_template/src/APP/index.ts"],"sourcesContent":["/**\n * APP\n * -  MVU \n * - / 15 \n * - /\n */\n\n// /\nconst CACHE_KEY = 'app_backend_service_orders_cache';\nconst LEGACY_CACHE_KEYS = ['service_orders_cache'];\nconst CACHE_LIMIT = 15;\n\nexport interface ServiceOrder {\n  id: string;\n  status: string; // \n  : Record<string, any>;\n  : Record<string, any>;\n  : Record<string, any>;\n  : Record<string, any>;\n  : Record<string, any>;\n  : Record<string, any>;\n  : Record<string, any>;\n  originalData: any;\n  __cachedAt?: number;\n}\n\nfunction pickCacheVariableOptions(): any[] {\n  // / global / localStorage\n  return [{ type: 'chat' }, { type: 'global' }, { type: 'script' }];\n}\n\nfunction readCacheFromLocalStorage(): ServiceOrder[] {\n  try {\n    const raw =\n      window.localStorage?.getItem(CACHE_KEY) ||\n      LEGACY_CACHE_KEYS.map(k => window.localStorage?.getItem(k)).find(Boolean);\n    if (!raw) return [];\n    const parsed = JSON.parse(raw);\n    if (!Array.isArray(parsed)) return [];\n    return parsed\n      .filter(Boolean)\n      .sort((a, b) => (b.__cachedAt || 0) - (a.__cachedAt || 0))\n      .slice(0, CACHE_LIMIT);\n  } catch (e) {\n    console.warn('[ServiceOrders] localStorage ', e);\n    return [];\n  }\n}\n\nfunction readCache(): ServiceOrder[] {\n  // \n  for (const option of pickCacheVariableOptions()) {\n    try {\n      if (typeof (window as any).getVariables !== 'function') break;\n      const vars = getVariables(option) || {};\n      const cached =\n        (vars as any)[CACHE_KEY] || LEGACY_CACHE_KEYS.map(k => (vars as any)[k]).find((v: any) => Array.isArray(v));\n      if (!Array.isArray(cached)) continue;\n      return cached\n        .filter(Boolean)\n        .sort((a, b) => (b.__cachedAt || 0) - (a.__cachedAt || 0))\n        .slice(0, CACHE_LIMIT);\n    } catch (e) {\n      // \n      continue;\n    }\n  }\n\n  //  localStorage/\n  return readCacheFromLocalStorage();\n}\n\nfunction writeCache(list: ServiceOrder[]) {\n  const withCap = [...list]\n    .map((o, idx) => ({ ...o, __cachedAt: Date.now() + idx }))\n    .sort((a, b) => (b.__cachedAt || 0) - (a.__cachedAt || 0))\n    .slice(0, CACHE_LIMIT);\n\n  //  replaceVariables/\n  for (const option of pickCacheVariableOptions()) {\n    try {\n      if (typeof (window as any).updateVariablesWith === 'function') {\n        updateVariablesWith((vars: Record<string, any>) => {\n          const next = vars && typeof vars === 'object' ? vars : {};\n          (next as any)[CACHE_KEY] = withCap;\n          return next;\n        }, option);\n        return;\n      }\n      if (typeof (window as any).insertOrAssignVariables === 'function') {\n        insertOrAssignVariables({ [CACHE_KEY]: withCap }, option);\n        return;\n      }\n    } catch (e) {\n      // \n      continue;\n    }\n  }\n\n  //  localStorage\n  try {\n    window.localStorage?.setItem(CACHE_KEY, JSON.stringify(withCap));\n  } catch (e) {\n    console.warn('[ServiceOrders] localStorage ', e);\n  }\n}\n\nfunction normalizeOrder(order: any, idx: number): ServiceOrder {\n  const normalizePercent = (val: any): string => {\n    if (val === null || val === undefined || val === '') return '-';\n    if (typeof val === 'string') {\n      //  % \n      if (val.includes('%')) return val.trim();\n      const num = Number(val);\n      if (!isNaN(num)) {\n        if (num <= 1) return `${(num * 100).toFixed(0)}%`;\n        if (num <= 100) return `${num.toFixed(0)}%`;\n      }\n      return val.trim();\n    }\n    if (typeof val === 'number') {\n      if (val <= 1) return `${(val * 100).toFixed(0)}%`;\n      if (val <= 100) return `${val.toFixed(0)}%`;\n      return `${val}`;\n    }\n    return '-';\n  };\n\n  return {\n    id: order.id || `order_${idx}`,\n    status: order. || '',\n    : {\n      : order.?. || order. || '',\n      : order.?. || order. || '',\n      : order.?. || order. || 0,\n      : order.?. || order. || '',\n    },\n    : {\n      : order.?. || '',\n      : order.?. || '',\n      : order.?. || '',\n      : order.?. || '',\n      : order.?. || '',\n      : order.?. || '',\n      : order.?. || '',\n    },\n    : {\n      : order.?. || '-',\n      : order.?. || '-',\n      : order.?. || '-',\n      : normalizePercent(order.?.),\n      : order.?. || 0,\n    },\n    : {\n      : order.?. || '-',\n      : order.?. || '-',\n      : order. || '',\n      : order. || order.?. || '-',\n    },\n    : {\n      : order.?. || order. || '',\n      : order.?. || order. || 0,\n      : order.?. || '',\n      : order.?. || 0,\n      : order.?. || [],\n    },\n    : {\n      : order.?. || 0,\n      : order.?. || '',\n      : order.?. || 0,\n      : order.?. || '',\n    },\n    : {\n      : {\n        : order.?.?. || '',\n        : order.?.?. || '',\n      },\n      : {\n        : order.?.?. || '',\n      },\n      : order.?. || '',\n      : order.?. || '',\n      : order.?. || '',\n    },\n    originalData: order,\n  };\n}\n\nfunction extractOrdersFromMvuData(mvuData: any): ServiceOrder[] {\n  const stat = mvuData?.stat_data || mvuData;\n  const orders = stat?.[''] || stat?.;\n  if (!orders) return [];\n\n  //  Zod MVU\n  const list = Array.isArray(orders)\n    ? orders\n    : typeof orders === 'object'\n      ? Object.values(orders as Record<string, any>)\n      : [];\n\n  return list.map((o: any, idx: number) => normalizeOrder(o, idx));\n}\n\nexport async function loadOrdersFromMVU(): Promise<ServiceOrder[]> {\n  try {\n    await waitGlobalInitialized('Mvu');\n\n    const data = (() => {\n      try {\n        const currentId = getCurrentMessageId();\n        if (typeof currentId === 'number' && currentId < 0) return null;\n        for (let id = currentId; id >= 0; id--) {\n          const d = Mvu.getMvuData({ type: 'message', message_id: id });\n          if (d && d.stat_data) return d;\n        }\n      } catch (e) {\n        // ignore\n      }\n      return Mvu.getMvuData({ type: 'message', message_id: 'latest' });\n    })();\n\n    if (!data) throw new Error('MVU ');\n\n    const orders = extractOrdersFromMvuData(data);\n    // \n    if (orders.length === 0) {\n      const cached = readCache();\n      return cached;\n    }\n\n    writeCache(orders);\n    return orders;\n  } catch (e) {\n    console.error('[ServiceOrders]  MVU :', e);\n    const cached = readCache();\n    if (cached.length === 0) throw e;\n    return cached;\n  }\n}\n\nexport function filterActiveOrders(orders: ServiceOrder[]) {\n  return orders.filter(o => !String(o.status).includes(''));\n}\n\nexport function filterCompletedOrders(orders: ServiceOrder[]) {\n  return orders.filter(o => String(o.status).includes(''));\n}\n\nexport function readCachedOrders() {\n  return readCache();\n}\n","module.exports = Vue;","module.exports = _;","/**\n * APP \n * -  / \n * -  APP \n */\n\nimport { z } from 'zod';\nimport { shopStoreMvu } from './shopStoreMvu';\n\nconst JSON_NORM_ANCHOR = 'json';\n\n//  \"  []\"\nfunction normalizeBracketTags(text: string) {\n  return text.replace(/^\\s*\\[(\\/?|\\/?)\\]\\s*$/gm, (_m, tag) => `[${tag}]`);\n}\n\n// - *   1. \nfunction normalizeBullet(line: string) {\n  return line\n    .replace(/^\\s*[-*?\\d().]+/u, '')\n    .trim()\n    .replace(/^[\"']|[\"']$/g, '')\n    .trim();\n}\n\n// =================  &  =================\nexport const PackageSchema = z.object({\n  id: z\n    .union([z.string(), z.number()])\n    .transform(v => String(v))\n    .optional(), // / ID\n  shop_id: z\n    .union([z.string(), z.number()])\n    .transform(v => String(v))\n    .optional(),\n  shop_name: z.string().optional(),\n  name: z.string().min(1, ''),\n  price: z.union([z.number(), z.string()]).default('N/A'),\n  stars: z.number().min(0).max(5).default(0),\n  tags: z.array(z.string()).default([]),\n  icon: z.string().nullable().optional(),\n  image1: z.string().default(''),\n  image2: z.string().default(''),\n  image3: z.string().default(''),\n  description: z.string().default(''),\n  content: z.array(z.string()).default([]),\n  reviews: z.array(z.string()).default([]),\n});\n\nexport const ShopSchema = z.object({\n  id: z\n    .union([z.string(), z.number()])\n    .transform(v => String(v))\n    .optional(), // / ID\n  shop_id: z\n    .union([z.string(), z.number()])\n    .transform(v => String(v))\n    .optional(),\n  name: z.string().min(1).optional(), // \n  address: z.string().optional().nullable(),\n  city: z.string().optional().nullable(),\n  shoptags: z.array(z.string()).default([]),\n  slogan: z.string().default(''),\n  theme: z.string().default(''),\n  packages: z.array(PackageSchema).default([]),\n});\n\ntype ShopType = z.infer<typeof ShopSchema>;\ntype PackageType = z.infer<typeof PackageSchema>;\n\nfunction logParse(step: string, ok: boolean, detail?: unknown) {\n  const prefix = `[parse][${step}]`;\n  if (ok) {\n    console.log(`${prefix}[success]`, detail ?? '');\n  } else {\n    console.warn(`${prefix}[fail]`, detail ?? '');\n  }\n}\n\n// ================  ================\n//  iframe \n\n// \nconst REQUIRED_DEPENDENCIES = ['getCurrentMessageId', 'getChatMessages'] as const;\ntype RequiredDep = (typeof REQUIRED_DEPENDENCIES)[number];\n\n// \nfunction isDependencyAvailable(name: string): boolean {\n  try {\n    if (name === 'getCurrentMessageId') {\n      return typeof getCurrentMessageId === 'function';\n    }\n    if (name === 'getChatMessages') {\n      return typeof getChatMessages === 'function';\n    }\n    // \n    return false;\n  } catch {\n    return false;\n  }\n}\n\n// \nfunction areAllDependenciesReady(): boolean {\n  return REQUIRED_DEPENDENCIES.every(dep => isDependencyAvailable(dep));\n}\n\n//  iframe \nasync function waitForDependencies(timeout: number = 10000): Promise<void> {\n  const startTime = Date.now();\n  const checkInterval = 100; //  100ms \n\n  while (Date.now() - startTime < timeout) {\n    if (areAllDependenciesReady()) {\n      return;\n    }\n    await new Promise(resolve => setTimeout(resolve, checkInterval));\n  }\n\n  const missingDeps = REQUIRED_DEPENDENCIES.filter(dep => !isDependencyAvailable(dep));\n  console.warn(`[] : ${missingDeps.join(', ')}`);\n}\n\n//  ID\nfunction safeGetCurrentMessageId(): number | undefined {\n  try {\n    return typeof getCurrentMessageId === 'function' ? getCurrentMessageId() : undefined;\n  } catch {\n    return undefined;\n  }\n}\n\n// \nfunction safeGetChatMessages(range: string | number): any[] {\n  try {\n    return typeof getChatMessages === 'function' ? getChatMessages(range) : [];\n  } catch {\n    return [];\n  }\n}\n\n// ================  &  ================\nfunction slicePhoneContent(text: string) {\n  // \n  // \n  return text\n    .replace(/\\[\\/?(|)[^\\]]*\\]/g, '')\n    .replace(/\\[\\/?[^\\]]*\\]/g, '')\n    .replace(/^\\s*\\[()\\]\\s*$/gm, '');\n}\n\nfunction extractJsonNorm(text: string): string | null {\n  const anchor = text.indexOf(JSON_NORM_ANCHOR);\n  if (anchor === -1) return null;\n  const after = text.slice(anchor);\n  const braceStart = after.indexOf('{');\n  if (braceStart === -1) return null;\n  const globalStart = anchor + braceStart;\n  const content = text.slice(globalStart);\n  const end = findMatchingBrace(content, 0);\n  if (end === -1) return null;\n  return content.slice(0, end + 1);\n}\n\nfunction emitParseEvent(event: 'shop:parse:requested' | 'shop:parse:done', detail: any) {\n  try {\n    window.dispatchEvent(new CustomEvent(event, { detail }));\n  } catch (e) {\n    // \n  }\n}\n\n//  ID  ID \nfunction createIdFactory(prefix: string) {\n  let counter = 0;\n  return () => `${prefix}_auto_${counter++}`;\n}\n\nfunction fetchMessagePayload(range?: string | number): { messageId: string; text: string } | null {\n  const tried = new Set<string | number>();\n  const pushCandidate = (c: string | number) => {\n    if (typeof c === 'number' && c < 0) return;\n    tried.add(c);\n  };\n\n  if (typeof range !== 'undefined') pushCandidate(range);\n\n  //  ID\n  const current = safeGetCurrentMessageId();\n  if (typeof current === 'number' && !Number.isNaN(current)) pushCandidate(current);\n\n  // (-1)  (0)\n  pushCandidate(-1);\n  pushCandidate(0);\n\n  for (const candidate of Array.from(tried)) {\n    try {\n      let entries: any[] = [];\n      if (typeof candidate === 'number' && candidate < 0) {\n        entries = safeGetChatMessages(candidate);\n      } else if (candidate === -1) {\n        entries = safeGetChatMessages(-1);\n      } else {\n        entries = safeGetChatMessages(candidate);\n      }\n      if (!entries || entries.length === 0) continue;\n      const parts: string[] = [];\n      entries.forEach(entry => {\n        // \n        let content = (entry as any).message;\n        //  ChatMessageSwiped  message  swipe_id  swipe\n        if (!content && Array.isArray((entry as any).swipes)) {\n          const swipeId = (entry as any).swipe_id || 0;\n          content = (entry as any).swipes[swipeId];\n        }\n        if (content) parts.push(String(content));\n      });\n      const text = parts.join('\\n\\n').trim();\n      if (!text) continue;\n      const messageId = String(entries[0]?.message_id ?? candidate ?? 'latest');\n      console.log(\n        '[fetchMessagePayload] hit candidate=',\n        candidate,\n        'messageId=',\n        messageId,\n        'snippet=',\n        text.slice(0, 80),\n      );\n      return { messageId, text };\n    } catch (err) {\n      console.warn('[fetchMessagePayload] failed at candidate', candidate, err);\n    }\n  }\n  console.warn('[fetchMessagePayload] no payload found after scanning');\n  return null;\n}\n\nfunction hashKey(str: string) {\n  let hash = 0;\n  for (let i = 0; i < str.length; i++) {\n    hash = (hash * 31 + str.charCodeAt(i)) >>> 0;\n  }\n  return hash.toString(16);\n}\n\nfunction generateShopId(shop: Partial<ShopType>) {\n  const explicit = shop.id || (shop as any).shop_id;\n  if (explicit) return String(explicit);\n  const basis = [shop.name, shop.address, shop.city].filter(Boolean).join('|');\n  if (basis) return `shop_${hashKey(basis)}`;\n  return `shop_${hashKey(JSON.stringify(shop))}`;\n}\n\nfunction generatePkgId(pkg: Partial<PackageType>, shopId: string, makePkgId: () => string) {\n  if (pkg.id) return String(pkg.id);\n  const basis = `${shopId}|${pkg.name || ''}|${pkg.price || ''}`;\n  return `pkg_${hashKey(basis) || makePkgId()}`;\n}\n\nfunction flattenPackagesFromShops(shops: any[]) {\n  return shops\n    .flatMap(shop => shop?.packages || [])\n    .map((pkg: any, idx: number) => ({\n      ...pkg,\n      id: String(pkg.id || `pkg_${idx}`),\n      shop_id: String(\n        pkg.shop_id ||\n          (pkg.shopId ?? (pkg.shop || {}).id) ||\n          shops.find(s => (s.packages || []).includes(pkg))?.id ||\n          '',\n      ),\n    }));\n}\n\n// []/[]\nfunction parseTextOnly(src: string, makeShopId: () => string, makePkgId: () => string) {\n  const shops: any[] = [];\n  const packages: any[] = [];\n  let pkgNameCounter = 1;\n\n  const splitArrayValues = (val: string): string[] =>\n    val\n      .split(/[,/|]/)\n      .map(s => s.trim().replace(/^[\"']|[\"']$/g, ''))\n      .filter(Boolean);\n\n  //  [] \n  //  []  [/]  [] \n  //  [] \n  let rawShopSections: string[] = [];\n  if (src.includes('[]')) {\n    //  []...[/]  []...  [] \n    // JS dotAll  ES2018 [\\s\\S]  .\n    //  split\n    const parts = src.split('[]');\n    // parts[0]  [] \n    rawShopSections = parts.slice(1).map(part => {\n      // \n      const closeIndex = part.indexOf('[/]');\n      if (closeIndex !== -1) {\n        return part.slice(0, closeIndex);\n      }\n      //  []  part split \n      return part;\n    });\n  } else {\n    rawShopSections = ['[]\\n[]\\n' + src];\n  }\n\n  rawShopSections.forEach(rawSection => {\n    //  [/] ()\n    const section = rawSection.split('[/]')[0];\n\n    const [shopHeader = '', ...packageSectionsRaw] = section.split('[]');\n    const shopLines = shopHeader\n      .split('\\n')\n      .map(line => line.trim())\n      .filter(Boolean);\n    const shop: any = {\n      id: '',\n      name: '',\n      shoptags: [],\n      slogan: '',\n      theme: '',\n      packages: [],\n    };\n    const nameLine = shopLines.find(line => /^name[:]/i.test(line));\n    if (nameLine) {\n      // []\n      const rawName = nameLine.replace(/^name[:]/i, '').trim();\n      const bracketIndex = rawName.indexOf('[]');\n      if (bracketIndex !== -1) {\n        shop.name = rawName.substring(0, bracketIndex).trim();\n      } else {\n        shop.name = rawName;\n      }\n    } else if (!section.includes('[]')) {\n      shop.name = '';\n    }\n    const idLine = shopLines.find(line => /^(id|shop_id)[:]/i.test(line));\n    if (idLine) {\n      shop.id = idLine.replace(/^(id|shop_id)[:]/i, '').trim();\n    }\n    const shoptagsIndex = shopLines.findIndex(line => /^shoptags[:]/i.test(line));\n    if (shoptagsIndex !== -1) {\n      const firstVal = shopLines[shoptagsIndex].replace(/^shoptags[:]/i, '').trim();\n      if (firstVal) shop.shoptags.push(...splitArrayValues(firstVal));\n      for (let i = shoptagsIndex + 1; i < shopLines.length; i++) {\n        if (shopLines[i].match(/^[-*?]/)) {\n          shop.shoptags.push(shopLines[i].replace(/^[-*?]\\s*/, '').trim());\n        } else if (shopLines[i].startsWith(\"'\") || shopLines[i].startsWith('\"')) {\n          shop.shoptags.push(shopLines[i].replace(/^[\"']|[\"']$/g, '').trim());\n        } else if (shopLines[i].includes(':') || shopLines[i].includes('')) {\n          break;\n        } else {\n          const val = shopLines[i].trim();\n          if (val) shop.shoptags.push(...splitArrayValues(val));\n        }\n      }\n    }\n    if (shoptagsIndex !== -1 && shop.shoptags.length === 0) {\n      for (let i = shoptagsIndex + 1; i < shopLines.length; i++) {\n        if (shopLines[i].includes(':')) break;\n        const val = shopLines[i].replace(/^[\"']|[\"']$/g, '').trim();\n        if (val) shop.shoptags.push(val);\n      }\n    }\n    if (!shop.id) shop.id = makeShopId();\n    if (shop.shoptags.length > 0) {\n      shop.slogan = shop.shoptags.join(' / ');\n      shop.theme = shop.shoptags[0] || '';\n    }\n\n    packageSectionsRaw.forEach(pkgSectionRaw => {\n      //  [/]\n      const pkgLines = (pkgSectionRaw.split('[/]')[0] ?? pkgSectionRaw)\n        .split('\\n')\n        .map(line => line.trim())\n        .filter(Boolean);\n      if (pkgLines.length === 0) return;\n      const pkg: any = {\n        id: makePkgId(),\n        shop_id: shop.id,\n        shop_name: shop.name,\n        name: '',\n        price: 'N/A',\n        stars: 0,\n        tags: [],\n        icon: null,\n        image1: '',\n        image2: '',\n        image3: '',\n        description: '',\n        content: [],\n        reviews: [],\n      };\n      let currentArrayField: string | null = null;\n      let currentScalarField: string | null = null;\n\n      pkgLines.forEach(line => {\n        const match = line.match(/^([^:]+)[:](.*)$/);\n        let isKnownField = false;\n\n        if (match) {\n          const keyRaw = match[1].trim().toLowerCase();\n          if (\n            [\n              'name',\n              'price',\n              'stars',\n              'icon',\n              'image1',\n              'image2',\n              'image3',\n              'description',\n              'tags',\n              'content',\n              'reviews',\n            ].includes(keyRaw)\n          ) {\n            isKnownField = true;\n          }\n        }\n\n        if (isKnownField && match) {\n          const fieldName = match[1].trim().toLowerCase();\n          const value = match[2].trim();\n          if (['name', 'price', 'stars', 'icon', 'image1', 'image2', 'image3', 'description'].includes(fieldName)) {\n            const key = fieldName as keyof typeof pkg;\n            pkg[key] = fieldName === 'stars' ? parseFloat(value) || 0 : value;\n            currentArrayField = null;\n            if (['description', 'image1', 'image2', 'image3'].includes(fieldName)) {\n              currentScalarField = fieldName;\n            } else {\n              currentScalarField = null;\n            }\n          } else if (['tags', 'content', 'reviews'].includes(fieldName)) {\n            currentArrayField = fieldName;\n            currentScalarField = null;\n            if (value) {\n              const items = value.startsWith('-') ? [value.replace(/^-/, '').trim()] : splitArrayValues(value);\n              items.forEach(v => {\n                const cleaned = v.replace(/^[\"']|[\"']$/g, '').trim();\n                if (cleaned) pkg[fieldName].push(cleaned);\n              });\n            }\n          }\n        } else if (['tags', 'content', 'reviews'].includes(line.toLowerCase())) {\n          currentArrayField = line.toLowerCase();\n          currentScalarField = null;\n        } else if (currentArrayField) {\n          const val = normalizeBullet(line);\n          if (val) pkg[currentArrayField].push(val);\n        } else if (currentScalarField) {\n          pkg[currentScalarField] += '\\n' + line;\n        }\n      });\n      if (!pkg.name && (pkg.content.length > 0 || pkg.reviews.length > 0 || pkg.tags.length > 0)) {\n        pkg.name = `${pkgNameCounter++}`;\n      }\n      if (pkg.name) {\n        shop.packages.push(pkg);\n        packages.push(pkg);\n      }\n    });\n\n    shops.push(shop);\n  });\n\n  return { shops, packages };\n}\n\nfunction sanitizeShops(shops: any[]) {\n  const map = new Map<string, any>();\n  (shops || []).forEach(s => {\n    if (!s) return;\n    const firstPkgName = Array.isArray(s?.packages) && s.packages[0]?.name ? s.packages[0].name : '';\n    const base = {\n      ...s,\n      name: s?.name || (firstPkgName ? `${firstPkgName}` : ''),\n      packages: Array.isArray(s?.packages) ? s.packages : [],\n      id: generateShopId(s),\n    };\n    let parsed: ShopType | null = null;\n    try {\n      parsed = ShopSchema.parse(base);\n    } catch (e) {\n      logParse('sanitize_shop', false, e);\n      // \n      parsed = {\n        id: String(base.id || generateShopId(base)),\n        name: base.name || '',\n        shoptags: Array.isArray(base.shoptags) ? base.shoptags : [],\n        slogan: base.slogan || '',\n        theme: base.theme || '',\n        packages: Array.isArray(base.packages) ? base.packages : [],\n      } as ShopType;\n    }\n    if (!parsed) return;\n    const dedupeKey =\n      (parsed as any).shop_id && String((parsed as any).shop_id)\n        ? `id:${String((parsed as any).shop_id)}`\n        : parsed.name\n          ? `name:${parsed.name}`\n          : `auto:${generateShopId(parsed)}`;\n    if (!map.has(dedupeKey)) {\n      map.set(dedupeKey, parsed);\n    }\n  });\n  return Array.from(map.values());\n}\n\n/**\n * \n * @returns \n */\nexport function extractDataFromMessage(): { shops: any[]; packages: any[] } {\n  try {\n    const payload = fetchMessagePayload();\n    if (payload) {\n      emitParseEvent('shop:parse:requested', { messageId: payload.messageId });\n      const parsed = parseShopData(payload.text);\n      if (parsed.shops.length > 0 || parsed.packages.length > 0) {\n        emitParseEvent('shop:parse:done', { messageId: payload.messageId, parsed: parsed.shops.length, errors: [] });\n        return parsed;\n      }\n      emitParseEvent('shop:parse:done', { messageId: payload.messageId, parsed: 0, errors: ['empty result'] });\n    } else {\n      console.warn('[extractDataFromMessage] no payload, fallback store cache');\n    }\n\n    const storedShops = sanitizeShops(shopStoreMvu.getShops() || []);\n    if (storedShops.length > 0) {\n      const pkgs = flattenPackagesFromShops(storedShops);\n      return { shops: storedShops, packages: pkgs };\n    }\n\n    return { shops: [], packages: [] };\n  } catch (e) {\n    console.warn('[extractDataFromMessage] failed', e);\n    return { shops: [], packages: [] };\n  }\n}\n\n/**\n * \n * @param messageId ID\n * @returns null\n */\nexport function extractDataFromSpecificMessage(messageId: string): { shops: any[]; packages: any[] } | null {\n  const payload = fetchMessagePayload(messageId);\n  if (!payload) return null;\n  emitParseEvent('shop:parse:requested', { messageId: payload.messageId });\n  const parsed = parseShopData(payload.text);\n  emitParseEvent('shop:parse:done', { messageId: payload.messageId, parsed: parsed.shops.length, errors: [] });\n  return parsed;\n}\n\n/**\n * \n * \n * -  [] ... [/]\n * -  AI \n * -  [/] \n */\nexport function parseShopData(text: string): { shops: any[]; packages: any[] } {\n  const makeShopId = createIdFactory('shop');\n  const makePkgId = createIdFactory('pkg');\n  const finalizeResult = (raw: { shops: any[]; packages: any[] }) => {\n    const sanitizedShops = sanitizeShops(raw.shops);\n    //  ID / shop_id \n    const flatPkgs = flattenPackagesFromShops(sanitizedShops).map(pkg => ({\n      ...pkg,\n      id: pkg.id || generatePkgId(pkg, pkg.shop_id || 'unknown', makePkgId),\n    }));\n    return { shops: sanitizedShops, packages: flatPkgs };\n  };\n\n  // \n  text = normalizeBracketTags(slicePhoneContent(text));\n  if (!text.trim()) {\n    logParse('input', false, 'empty text');\n    return { shops: [], packages: [] };\n  }\n\n  // 0.0 json JSON\n  const jsonNorm = extractJsonNorm(text);\n  if (jsonNorm) {\n    try {\n      const parsed = JSON.parse(jsonNorm.replace(//g, ','));\n      const normalized = normalizeJsonData(parsed);\n      logParse('json_norm', true, { shops: normalized.shops.length });\n      return finalizeResult(normalized);\n    } catch (e) {\n      logParse('json_norm', false, e);\n    }\n  }\n\n  // 0.  JS json_template.js \n  const jsParsed = tryParseJsTemplate(text);\n  if (jsParsed) {\n    //  JS \n    //  { ... } \n    const hasValidContent =\n      jsParsed.packages.length > 0 ||\n      jsParsed.shops.some(s => s.name && s.name !== '' && s.name !== '');\n\n    if (hasValidContent) {\n      logParse('js_template', true, { shops: jsParsed.shops.length });\n      return finalizeResult(jsParsed);\n    } else {\n      logParse('js_template', false, 'empty or invalid result, continue fallback');\n    }\n  }\n\n  // 0.25 \n  if (text.includes('[]')) {\n    const textParsed = parseTextOnly(text, makeShopId, makePkgId);\n    if (textParsed && textParsed.shops.length > 0) {\n      logParse('text_tags_priority', true, { shops: textParsed.shops.length });\n      return finalizeResult(textParsed);\n    }\n  }\n\n  // 0.5  YAML  ( window.YAML)\n  //  \"shops:\"  \"- name:\" \"[]\"  YAML\n  if ((window as any).YAML && (text.includes('shops:') || text.includes('- name:') || text.includes('[]'))) {\n    //  A:  []  ( YAML )\n    if (text.includes('[]')) {\n      const sections = text.split('[]').slice(1);\n      const combinedShops: any[] = [];\n\n      for (const section of sections) {\n        // \n        const cleanSection = section.split('[/]')[0].trim();\n\n        if (!cleanSection) continue;\n\n        //  [] YAML.parse \n        if (cleanSection.includes('[]')) {\n          const viaText = parseShopData(`[]\\n${cleanSection}\\n[/]`);\n          if (viaText.shops.length > 0) {\n            combinedShops.push(...viaText.shops);\n            continue;\n          }\n        }\n\n        try {\n          const parsedShop = (window as any).YAML.parse(cleanSection);\n          // console.log('[shopData] YAML :', parsedShop);\n          if (parsedShop && typeof parsedShop === 'object') {\n            // \n            if (parsedShop.name || parsedShop.packages || parsedShop.shop_id) {\n              combinedShops.push(parsedShop);\n            }\n          }\n        } catch (e) {\n          console.warn('[shopData] YAML :', e);\n          //  ( window.YAML )\n          const fallbackShop = parseYamlShopByRegex(cleanSection);\n          if (fallbackShop) {\n            combinedShops.push(fallbackShop);\n          }\n        }\n      }\n\n      if (combinedShops.length > 0) {\n        console.log('[shopData] YAML :', combinedShops.length);\n        logParse('yaml_segments', true, { shops: combinedShops.length });\n        return finalizeResult(normalizeJsonData({ shops: combinedShops }));\n      }\n    }\n\n    //  B:  ( YAML )\n    try {\n      const parsed = (window as any).YAML.parse(text);\n      const normalized = normalizeJsonData(parsed);\n      if (normalized.shops.length > 0) {\n        logParse('yaml_full', true, { shops: normalized.shops.length });\n        return finalizeResult(normalized);\n      }\n    } catch (e) {\n      // \n    }\n  }\n\n  // \n  const isInvalidEmptyResult = (res: { shops: any[]; packages: any[] }) => {\n    if (res.packages.length > 0) return false;\n    const hasNamed = res.shops.some(\n      s => s.name && s.name !== '' && s.name !== '' && !s.name.startsWith(''),\n    );\n    return !hasNamed;\n  };\n\n  // 1.  JSON \n  try {\n    //  Markdown \n    let jsonText = text.trim();\n    const codeBlockMatch = jsonText.match(/```(?:json)?\\s*([\\s\\S]*?)\\s*```/i);\n    if (codeBlockMatch) {\n      jsonText = codeBlockMatch[1].trim();\n    }\n\n    //  \"const template =\"\n    if (!jsonText.startsWith('{') && !jsonText.startsWith('[')) {\n      const braceIndex = jsonText.indexOf('{');\n      if (braceIndex !== -1) {\n        jsonText = jsonText.slice(braceIndex);\n      }\n    }\n\n    //  {  [  JSON \n    if (jsonText.startsWith('{') || jsonText.startsWith('[')) {\n      const parsed = JSON.parse(jsonText);\n      const normalized = normalizeJsonData(parsed);\n      const finalRes = finalizeResult(normalized);\n      // \n      if (!isInvalidEmptyResult(finalRes)) {\n        logParse('json', true, { shops: finalRes.shops.length });\n        return finalRes;\n      }\n    }\n  } catch (e) {\n    // \n  }\n\n  // 1.1 / JSON \n  //  { shops: [...] }\n  const tolerant = tryParseLargestJsonChunk(text);\n  if (tolerant) {\n    const finalRes = finalizeResult(tolerant);\n    // \n    if (!isInvalidEmptyResult(finalRes)) {\n      logParse('json_tolerant', true, { shops: tolerant.shops.length });\n      return finalRes;\n    }\n  }\n\n  // 2. \n  const textParsed = parseTextOnly(text, makeShopId, makePkgId);\n  let { shops, packages } = textParsed;\n\n  // \n  if (packages.length === 0) {\n    const fallbackShop = shops[0] || {\n      id: makeShopId(),\n      name: '',\n      shoptags: [],\n      slogan: '',\n      theme: '',\n      packages: [],\n    };\n    if (shops.length === 0) shops.push(fallbackShop);\n\n    const singlePkg = parseLoosePackage(text, fallbackShop, makePkgId);\n    if (singlePkg) {\n      fallbackShop.packages.push(singlePkg);\n      packages.push(singlePkg);\n      shops = [fallbackShop];\n    } else {\n      const bulletPkg = parseContentBulletsOnly(text, fallbackShop, makePkgId);\n      if (bulletPkg) {\n        fallbackShop.packages.push(bulletPkg);\n        packages.push(bulletPkg);\n        shops = [fallbackShop];\n      } else if (!text.includes('[]')) {\n        // \n        shops = [];\n      }\n      //  []\n    }\n  }\n\n  const result = finalizeResult({ shops, packages });\n\n  // 2.5 \n  //  content/tags\n  result.shops = result.shops.filter(shop => {\n    const isDefaultShop =\n      ['', ''].includes(shop.name || '') || (shop.name || '').startsWith('');\n    const hasOnlyGhostPkgs = shop.packages.every((p: any) => p.name.startsWith('')); // \"\"\n    if (isDefaultShop && hasOnlyGhostPkgs) {\n      console.log('[parse] filter ghost shop:', shop.id);\n      return false;\n    }\n    return true;\n  });\n  //  packages \n  result.packages = flattenPackagesFromShops(result.shops);\n\n  // 3.  JSON/YAML\n  // \n  //  text  slicePhoneContent  normalizeBracketTags \n  const hasExplicitTag = text.includes('[]');\n  //  YAML  YAML  fall through \n  const hasYamlFeature = (window as any).YAML && (text.includes('shops:') || text.includes('- name:'));\n\n  if (!jsonNorm && !jsParsed && !hasExplicitTag && !hasYamlFeature && result.packages.length === 0) {\n    // /\n    //  \"name: \" \n    const hasNamedShop = result.shops.some(\n      s => s.name && s.name !== '' && s.name !== '' && !s.name.startsWith(''),\n    );\n\n    if (!hasNamedShop) {\n      logParse('text_strict_filter', false, 'no packages and no explicit shop tag, discard empty shop');\n      return { shops: [], packages: [] };\n    }\n  }\n\n  logParse('text', true, { shops: result.shops.length, packages: result.packages.length });\n  return result;\n}\n\n/**\n *  json_template.js  JS \n * \n * -  \"const template = {...};\"  \"export default template;\" \n * - \n */\nfunction tryParseJsTemplate(text: string): { shops: any[]; packages: any[] } | null {\n  try {\n    const objectLiteral = extractTemplateObject(text);\n    if (!objectLiteral) return null;\n\n    const cleaned = objectLiteral\n      // \n      .replace(/\\/\\*[\\s\\S]*?\\*\\//g, '')\n      .replace(/\\/\\/[^\\n\\r]*/g, '')\n      // /\n      .replace(/,\\s*([}\\]])/g, '$1')\n      .trim();\n\n    // \n    const balanced = balanceBraces(cleaned);\n\n    try {\n      const parsed = JSON.parse(balanced);\n      return normalizeJsonData(parsed);\n    } catch (_) {\n      //  JS \n      const looseParsed = tryParseLooseJsLiteral(balanced);\n      if (looseParsed) return normalizeJsonData(looseParsed);\n      throw _;\n    }\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * \n *  \"const template =\" '{'  '}'\n */\nfunction extractTemplateObject(text: string): string | null {\n  const source = text.trim();\n\n  // const template = { ... };\n  const tplIndex = source.search(/const\\s+template\\s*=/);\n  if (tplIndex !== -1) {\n    const braceStart = source.indexOf('{', tplIndex);\n    if (braceStart !== -1) {\n      const braceEnd = findMatchingBrace(source, braceStart);\n      if (braceEnd !== -1) {\n        return source.slice(braceStart, braceEnd + 1);\n      }\n    }\n  }\n\n  //  '{' '}'\n  const firstBrace = source.indexOf('{');\n  if (firstBrace === -1) return null;\n  const end = findMatchingBrace(source, firstBrace);\n\n  //  } balanceBraces \n  if (end !== -1) {\n    return source.slice(firstBrace, end + 1);\n  } else {\n    //  firstBrace \n    return source.slice(firstBrace);\n  }\n}\n\n/**\n * \n *  startIndex  '{'  '}' \n */\nfunction findMatchingBrace(str: string, startIndex: number): number {\n  let depth = 0;\n  let inString: false | \"'\" | '\"' = false;\n  let isEscaped = false;\n\n  for (let i = startIndex; i < str.length; i++) {\n    const ch = str[i];\n\n    // \n    if (isEscaped) {\n      isEscaped = false;\n      continue;\n    }\n    if (ch === '\\\\') {\n      isEscaped = true;\n      continue;\n    }\n\n    // \n    if (inString) {\n      if (ch === inString) {\n        inString = false;\n      }\n    } else if (ch === '\"' || ch === \"'\") {\n      inString = ch;\n    } else if (ch === '{') {\n      depth++;\n    } else if (ch === '}') {\n      depth--;\n      if (depth === 0) return i;\n    }\n  }\n  return -1;\n}\n\n/**\n * \n */\nfunction balanceBraces(str: string): string {\n  let depth = 0;\n  for (const ch of str) {\n    if (ch === '{') depth += 1;\n    else if (ch === '}') depth = Math.max(0, depth - 1);\n  }\n  return depth > 0 ? str + '}'.repeat(depth) : str;\n}\n\n/**\n *  JS \n * \n *  function / => / import / export \n */\nfunction tryParseLooseJsLiteral(str: string): any | null {\n  // 1.  {content}  ()\n  const processing = str.replace(/([:,[]\\s*)\\{([^:{}]+)\\}/g, (match, prefix, content) => {\n    if (content.trim().startsWith('\"') || content.trim().startsWith(\"'\")) return match;\n    return `${prefix}\"${content.trim()}\"`;\n  });\n\n  // 2. \n  const stringStore: string[] = [];\n  const strSkeleton = processing.replace(/\"((?:[^\"\\\\]|\\\\.)*)\"|'((?:[^'\\\\]|\\\\.)*)'/g, match => {\n    //  new Function \n    const safeStr = match.replace(/\\r?\\n/g, '\\\\n');\n    stringStore.push(safeStr);\n    return `__STR_${stringStore.length - 1}__`;\n  });\n\n  // 3. \n  const unsafeKeyword = /(function\\b|=>|\\bclass\\b|\\bwhile\\b|\\bfor\\b|\\bimport\\b|\\bexport\\b|\\beval\\b|\\brequire\\b)/;\n  if (unsafeKeyword.test(strSkeleton)) return null;\n\n  // 4.  ()\n  //  JSON () __STR_\n  let cleaned = strSkeleton.replace(/(^|[{\\s,])([A-Za-z_][A-Za-z0-9_]*)\\s*:/g, '$1\"$2\":');\n\n  // 5. \n  cleaned = cleaned.replace(/,\\s*([}\\]])/g, '$1');\n\n  // 6. \n  const finalStr = cleaned.replace(/__STR_(\\d+)__/g, (_, idx) => stringStore[parseInt(idx)] || '\"\"');\n\n  try {\n    const fn = new Function(`return (${finalStr});`);\n    return fn();\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n *  JSON.parse \n * /\n */\nfunction tryParseLargestJsonChunk(text: string): { shops: any[]; packages: any[] } | null {\n  const src = text.trim();\n\n  //  {\n  //  \"shops\"  {\n  let startCandidates = [src.indexOf('{'), src.indexOf('[')].filter(i => i !== -1).sort((a, b) => a - b);\n\n  //  \"shops\" \n  const shopsKeywordIndex = src.search(/[\"']?shops[\"']?\\s*:/);\n  if (shopsKeywordIndex !== -1) {\n    //  {\n    const braceBeforeShops = src.lastIndexOf('{', shopsKeywordIndex);\n    if (braceBeforeShops !== -1) {\n      startCandidates.unshift(braceBeforeShops);\n    }\n  }\n\n  // \n  startCandidates = [...new Set(startCandidates)];\n\n  for (const start of startCandidates) {\n    // \n    //  } ]\n    const endCandidates = [];\n    let lastBrace = src.lastIndexOf('}');\n    while (lastBrace >= start) {\n      endCandidates.push(lastBrace);\n      lastBrace = src.lastIndexOf('}', lastBrace - 1);\n      // \n      if (endCandidates.length > 20) break;\n    }\n\n    let lastBracket = src.lastIndexOf(']');\n    while (lastBracket >= start) {\n      endCandidates.push(lastBracket);\n      lastBracket = src.lastIndexOf(']', lastBracket - 1);\n      if (endCandidates.length > 40) break;\n    }\n\n    // \n    endCandidates.sort((a, b) => b - a);\n\n    for (const end of endCandidates) {\n      const slice = src.slice(start, end + 1);\n\n      // 1.  JSON \n      try {\n        const parsed = JSON.parse(slice);\n        const normalized = normalizeJsonData(parsed);\n        if (normalized.shops.length > 0 || normalized.packages.length > 0) {\n          return normalized;\n        }\n      } catch (_) {\n        // \n      }\n\n      // 2.  ( JSON)\n      try {\n        //  ( URL  // JSON  URL \n        // )\n        //  tryParseLooseJsLiteral new Function \n\n        //  JSON.parse \n        const cleaned = slice\n          .replace(/\\/\\/[^\\n\\r]*/g, '') //  // \n          .replace(/\\/\\*[\\s\\S]*?\\*\\//g, ''); //  /* */ \n\n        const parsed = JSON.parse(cleaned);\n        const normalized = normalizeJsonData(parsed);\n        if (normalized.shops.length > 0 || normalized.packages.length > 0) {\n          return normalized;\n        }\n      } catch (_) {\n        // \n      }\n\n      // 3.  JS  ()\n      try {\n        const looseParsed = tryParseLooseJsLiteral(slice);\n        if (looseParsed) {\n          const normalized = normalizeJsonData(looseParsed);\n          if (normalized.shops.length > 0 || normalized.packages.length > 0) {\n            return normalized;\n          }\n        }\n      } catch (__) {\n        // continue\n      }\n    }\n  }\n\n  return null;\n}\n\n/**\n *  []/[] \n */\nfunction parseLoosePackage(text: string, shop: any, makePkgId: () => string): any | null {\n  const lines = text\n    .split('\\n')\n    .map(l => l.trim())\n    .filter(Boolean);\n\n  if (lines.length === 0) return null;\n\n  const pkg: any = {\n    id: makePkgId(),\n    shop_id: shop.id,\n    shop_name: shop.name,\n    name: '',\n    price: 'N/A',\n    stars: 0,\n    tags: [],\n    icon: null,\n    image1: '',\n    image2: '',\n    image3: '',\n    description: '',\n    content: [],\n    reviews: [],\n  };\n\n  let currentArrayField: string | null = null;\n  let currentScalarField: string | null = null;\n\n  lines.forEach(line => {\n    const match = line.match(/^([^:]+)[:](.*)$/);\n    let isKnownField = false;\n\n    if (match) {\n      const keyRaw = match[1].trim().toLowerCase();\n      if (\n        [\n          'name',\n          'price',\n          'stars',\n          'icon',\n          'image1',\n          'image2',\n          'image3',\n          'description',\n          'tags',\n          'content',\n          'reviews',\n        ].includes(keyRaw)\n      ) {\n        isKnownField = true;\n      }\n    }\n\n    if (isKnownField && match) {\n      const key = match[1].trim().toLowerCase();\n      const value = match[2].trim();\n      if (['name', 'price', 'stars', 'icon', 'image1', 'image2', 'image3', 'description'].includes(key)) {\n        pkg[key] = key === 'stars' ? parseFloat(value) || 0 : value;\n        currentArrayField = null;\n        if (['description', 'image1', 'image2', 'image3'].includes(key)) {\n          currentScalarField = key;\n        } else {\n          currentScalarField = null;\n        }\n      } else if (['tags', 'content', 'reviews'].includes(key)) {\n        currentArrayField = key;\n        currentScalarField = null;\n        if (value) {\n          const items = value.startsWith('-')\n            ? [value.replace(/^-/, '').trim()]\n            : value.split(/[,/|]/).map(s => s.trim());\n          items\n            .map(v => v.replace(/^[\"']|[\"']$/g, '').trim())\n            .filter(Boolean)\n            .forEach(v => pkg[key].push(v));\n        }\n      }\n    } else if (['tags', 'content', 'reviews'].includes(line.toLowerCase())) {\n      currentArrayField = line.toLowerCase();\n      currentScalarField = null;\n    } else if (currentArrayField) {\n      const val = normalizeBullet(line);\n      if (val) pkg[currentArrayField].push(val);\n    } else if (currentScalarField) {\n      pkg[currentScalarField] += '\\n' + line;\n    }\n  });\n\n  if (!pkg.name && (pkg.content.length || pkg.reviews.length || pkg.tags.length)) {\n    pkg.name = ``;\n  }\n\n  return pkg.name ? pkg : null;\n}\n\n/**\n *  content: \n */\nfunction parseContentBulletsOnly(text: string, shop: any, makePkgId: () => string): any | null {\n  const lines = text.split('\\n').map(l => l.trim());\n  let collectingContent = false;\n  let collectingReviews = false;\n  const content: string[] = [];\n  const reviews: string[] = [];\n\n  for (const line of lines) {\n    if (/^content\\b/i.test(line)) {\n      collectingContent = true;\n      collectingReviews = false;\n      continue;\n    }\n    if (/^reviews?\\b/i.test(line)) {\n      collectingReviews = true;\n      collectingContent = false;\n      continue;\n    }\n    if (collectingContent || collectingReviews) {\n      if (/^[A-Za-z_][A-Za-z0-9_]*[:]/.test(line)) {\n        collectingContent = false;\n        collectingReviews = false;\n        continue;\n      }\n\n      //  - * ?  \n      const bulletMatch = line.match(/^[-*?]\\s*(.*)$/);\n      if (bulletMatch) {\n        const val = bulletMatch[1].replace(/^[\"']|[\"']$/g, '').trim();\n        if (val) {\n          if (collectingContent) content.push(val);\n          else if (collectingReviews) reviews.push(val);\n        }\n      } else if (line.trim()) {\n        // \n        const val = line.replace(/^[\"']|[\"']$/g, '').trim();\n        if (val) {\n          if (collectingContent) content.push(val);\n          else if (collectingReviews) reviews.push(val);\n        }\n      }\n    }\n  }\n\n  if (content.length === 0 && reviews.length === 0) return null;\n\n  return {\n    id: makePkgId(),\n    shop_id: shop.id,\n    shop_name: shop.name,\n    name: ``,\n    price: 'N/A',\n    stars: 0,\n    tags: [],\n    icon: null,\n    image1: '',\n    image2: '',\n    image3: '',\n    description: '',\n    content,\n    reviews,\n  };\n}\n\n/**\n *  YAML \n *  shop_id, name  packages \n */\nfunction parseYamlShopByRegex(text: string): any | null {\n  try {\n    const shop: any = { packages: [] };\n\n    //  shop_id ()\n    const idMatch = text.match(/^\\s*shop_id:\\s*(.+)$/m);\n    if (idMatch) shop.shop_id = idMatch[1].trim();\n\n    //  name () ()\n    // packages  name\n    //  name  packages \n    const nameMatch = text.match(/^\\s*name:\\s*(.+)$/m);\n    if (nameMatch) shop.name = nameMatch[1].trim().replace(/^[\"']|[\"']$/g, '');\n\n    //  ID  Name\n    if (!shop.shop_id && !shop.name) return null;\n\n    //  packages \n    //  packages:  - name: \n    const packagesIndex = text.indexOf('packages:');\n    if (packagesIndex !== -1) {\n      const packagesText = text.slice(packagesIndex);\n      //  - name: \n      const pkgSections = packagesText.split(/^\\s*-\\s*name:/m).slice(1);\n\n      pkgSections.forEach(pkgSection => {\n        const pkg: any = { name: '', content: [], reviews: [], tags: [] };\n\n        //  (split  name:  pkgSection )\n        const firstLineEnd = pkgSection.indexOf('\\n');\n        const rawName = firstLineEnd === -1 ? pkgSection : pkgSection.slice(0, firstLineEnd);\n        pkg.name = rawName.trim().replace(/^[\"']|[\"']$/g, '');\n\n        // \n        const extractField = (key: string) => {\n          // \n          const pattern = '^\\\\s*' + key + ':\\\\s*(.+)$';\n          const match = pkgSection.match(new RegExp(pattern, 'm'));\n          return match ? match[1].trim().replace(/^[\"']|[\"']$/g, '') : null;\n        };\n\n        pkg.price = extractField('price');\n        pkg.stars = parseFloat(extractField('stars') || '0');\n        pkg.icon = extractField('icon');\n        pkg.description = extractField('description');\n        pkg.image1 = extractField('image1');\n        pkg.image2 = extractField('image2');\n        pkg.image3 = extractField('image3');\n\n        //  (tags, content, reviews)\n        // \n        const extractList = (key: string) => {\n          const start = pkgSection.indexOf(`${key}:`);\n          if (start === -1) return [];\n          const list: string[] = [];\n          const lines = pkgSection.slice(start).split('\\n').slice(1);\n          for (const line of lines) {\n            //  key ( - )\n            if (line.trim() && !line.trim().startsWith('-')) break;\n            if (line.trim().startsWith('-')) {\n              list.push(\n                line\n                  .trim()\n                  .replace(/^-\\s*/, '')\n                  .replace(/^[\"']|[\"']$/g, ''),\n              );\n            }\n          }\n          return list;\n        };\n\n        pkg.tags = extractList('tags');\n        pkg.content = extractList('content');\n        pkg.reviews = extractList('reviews');\n\n        shop.packages.push(pkg);\n      });\n    }\n\n    return shop;\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n *  JSON \n */\nfunction normalizeJsonData(data: any): { shops: any[]; packages: any[] } {\n  const makePkgId = createIdFactory('pkg');\n  const shops: ShopType[] = [];\n  const packages: PackageType[] = [];\n\n  // \n  let rawShops: any[] = [];\n  if (Array.isArray(data)) {\n    rawShops = data;\n  } else if (data && typeof data === 'object') {\n    //  shops  shops \n    if (Array.isArray(data.shops)) {\n      rawShops = data.shops;\n    } else if (data.shops && typeof data.shops === 'object') {\n      rawShops = [data.shops];\n    } else {\n      // \n      rawShops = [data];\n    }\n  }\n\n  const pushShop = (rawShop: any) => {\n    if (!rawShop || typeof rawShop !== 'object') {\n      console.warn('[normalize] skip non-object shop entry', rawShop);\n      return;\n    }\n    if (!Array.isArray(rawShop.packages)) {\n      console.warn('[normalize] shop packages not array', rawShop);\n    }\n\n    const parsed = (() => {\n      try {\n        return ShopSchema.parse({\n          ...rawShop,\n          id: String(generateShopId(rawShop)),\n          shop_id: rawShop.shop_id ? String(rawShop.shop_id) : undefined, // ID\n          name: rawShop.name || '',\n          packages: [], // \n        });\n      } catch (e) {\n        logParse('schema', false, e);\n        return null;\n      }\n    })();\n    if (!parsed) return;\n\n    const shopId = String(parsed.id || generateShopId(parsed));\n\n    const rawPackages = Array.isArray(rawShop.packages) ? rawShop.packages : [];\n\n    const normalizedPkgs = rawPackages\n      .map((rawPkg: any) => {\n        if (!rawPkg || typeof rawPkg !== 'object') return null;\n        const pkg = {\n          ...rawPkg,\n          id: String(generatePkgId(rawPkg, shopId, makePkgId)),\n          shop_id: String(shopId),\n          shop_name: parsed.name,\n        };\n        try {\n          return PackageSchema.parse(pkg);\n        } catch (e) {\n          logParse('schema_pkg', false, e);\n          return null;\n        }\n      })\n      .filter(Boolean) as PackageType[];\n\n    const shop = { ...parsed, id: shopId, packages: normalizedPkgs };\n    shops.push(shop);\n    packages.push(...normalizedPkgs);\n    console.log('[normalize] accepted shop', shop.name, 'packages=', normalizedPkgs.length);\n  };\n\n  console.log('[normalize] rawShops snapshot:', rawShops);\n  rawShops.forEach(rawShop => {\n    if (rawShop && typeof rawShop === 'object' && Array.isArray(rawShop.shops)) {\n      rawShop.shops.forEach((nested: any) => pushShop(nested));\n    } else {\n      pushShop(rawShop);\n    }\n  });\n\n  //  id name+address+city hash\n  const shopMap = new Map<string, ShopType>();\n  shops.forEach(s => {\n    const key = String(s.id || generateShopId(s));\n    if (!shopMap.has(key)) shopMap.set(key, s);\n  });\n\n  const pkgMap = new Map<string, PackageType>();\n  packages.forEach(p => {\n    const key = String(p.id || generatePkgId(p, p.shop_id || 'unknown', makePkgId));\n    if (!pkgMap.has(key)) pkgMap.set(key, p);\n  });\n\n  const result = { shops: Array.from(shopMap.values()), packages: Array.from(pkgMap.values()) };\n  logParse('normalize', true, { rawShops: rawShops.length, shops: result.shops.length, pkgs: result.packages.length });\n  return result;\n}\n\n// \nexport {\n  waitForDependencies,\n  areAllDependenciesReady,\n  isDependencyAvailable,\n  safeGetCurrentMessageId,\n  safeGetChatMessages,\n};\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createCommentVNode as _createCommentVNode, normalizeStyle as _normalizeStyle, vModelText as _vModelText, withDirectives as _withDirectives } from \"vue\";\nconst _hoisted_1 = { class: \"app-view active\" };\nconst _hoisted_2 = { class: \"app-header\" };\nconst _hoisted_3 = { class: \"title\" };\nconst _hoisted_4 = { id: \"detail-header-title\" };\nconst _hoisted_5 = {\n    id: \"detail-content\",\n    class: \"app-content\"\n};\nconst _hoisted_6 = { class: \"detail-info-card\" };\nconst _hoisted_7 = { class: \"detail-name\" };\nconst _hoisted_8 = { class: \"detail-tags\" };\nconst _hoisted_9 = { class: \"detail-tabs\" };\nconst _hoisted_10 = {\n    key: 0,\n    class: \"service-item description-item\"\n};\nconst _hoisted_11 = { class: \"text\" };\nconst _hoisted_12 = { key: 1 };\nconst _hoisted_13 = [\"onClick\"];\nconst _hoisted_14 = {\n    key: 2,\n    class: \"empty-state\"\n};\nconst _hoisted_15 = { key: 0 };\nconst _hoisted_16 = {\n    key: 1,\n    class: \"empty-state\"\n};\nconst _hoisted_17 = { class: \"image-item\" };\nconst _hoisted_18 = { class: \"image-item\" };\nconst _hoisted_19 = { class: \"image-item\" };\nconst _hoisted_20 = { class: \"detail-footer\" };\nconst _hoisted_21 = { class: \"price-info\" };\nconst _hoisted_22 = { class: \"price\" };\nconst _hoisted_23 = { class: \"modal-content\" };\nconst _hoisted_24 = {\n    key: 0,\n    class: \"modal-content-tags\"\n};\nconst _hoisted_25 = { class: \"modal-tags-wrapper\" };\nconst _hoisted_26 = [\"onClick\"];\nimport { onMounted, ref } from 'vue';\nimport { useRoute } from 'vue-router';\nimport { extractDataFromMessage } from './dataParser';\nimport { shopStoreMvu } from './shared/shopStoreMvu';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'ItemDetail',\n    setup(__props) {\n        const route = useRoute();\n        const itemData = ref(null);\n        const activeTab = ref('content');\n        const showModal = ref(false);\n        const remarkText = ref('');\n        const shopStoreApi = ref(shopStoreMvu);\n        const fallbackLogPrinted = ref(false);\n        function dedupePackages(list) {\n            const map = new Map();\n            list.forEach(p => {\n                if (!p)\n                    return;\n                const id = p.id ? String(p.id) : '';\n                if (id && !map.has(id))\n                    map.set(id, p);\n            });\n            return Array.from(map.values());\n        }\n        // \n        function showRemarkModal() {\n            showModal.value = true;\n        }\n        // \n        function closeRemarkModal() {\n            showModal.value = false;\n            remarkText.value = '';\n        }\n        // \n        function addToRemark(content) {\n            if (remarkText.value) {\n                remarkText.value += ' ' + content;\n            }\n            else {\n                remarkText.value = content;\n            }\n        }\n        // \n        function handleFeatureClick(content) {\n            remarkText.value = content;\n            showRemarkModal();\n        }\n        // \n        function confirmOrder() {\n            const itemName = itemData.value?.name || '';\n            const itemDescription = itemData.value?.description || '';\n            const remark = remarkText.value || '';\n            sendToAI(`/send ${itemName}${itemDescription}${remark}`);\n            closeRemarkModal();\n        }\n        function sendToAI(message) {\n            console.log(`[AI]: ${message}`);\n            const fullCommand = `${message} | /trigger await=true`;\n            if (typeof window.triggerSlash !== 'undefined') {\n                try {\n                    window.triggerSlash(fullCommand);\n                }\n                catch (e) {\n                    console.error('triggerSlash:', e);\n                }\n            }\n            else {\n                console.log(`[AI - ]: ${fullCommand}`);\n            }\n        }\n        // \n        onMounted(async () => {\n            const itemId = route.params.id;\n            // 1) \n            const parsed = extractDataFromMessage().packages || [];\n            // 2)  ShopStore \n            let cached = [];\n            try {\n                cached = (shopStoreApi.value.getShops() || []).flatMap((s) => s.packages || []);\n            }\n            catch (e) {\n                console.warn('[ItemDetail] ShopStore Mvu Error', e);\n            }\n            const combined = dedupePackages([...parsed, ...cached]);\n            itemData.value = combined.find(p => String(p.id) === String(itemId));\n            // 3)  id /\n            if (!itemData.value) {\n                const fromQueryName = route.query?.name;\n                if (fromQueryName) {\n                    itemData.value = combined.find(p => p.name === fromQueryName);\n                }\n            }\n            if (!itemData.value && combined.length > 0) {\n                itemData.value = combined[0];\n                if (!fallbackLogPrinted.value) {\n                    console.warn('[ItemDetail]  ID', {\n                        want: itemId,\n                        candidates: combined.slice(0, 5).map(p => p.id),\n                    });\n                    fallbackLogPrinted.value = true;\n                }\n            }\n            console.log('[ItemDetail] loaded item:', itemData.value);\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _createElementVNode(\"i\", {\n                            class: \"fas fa-arrow-left\",\n                            onClick: _cache[0] || (_cache[0] = ($event) => (_ctx.$router.back()))\n                        }),\n                        _createElementVNode(\"span\", _hoisted_4, _toDisplayString(itemData.value?.name || ''), 1 /* TEXT */)\n                    ])\n                ]),\n                _createElementVNode(\"div\", _hoisted_5, [\n                    _createElementVNode(\"div\", _hoisted_6, [\n                        _createElementVNode(\"div\", _hoisted_7, _toDisplayString(itemData.value?.name || ''), 1 /* TEXT */),\n                        _createElementVNode(\"div\", _hoisted_8, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(itemData.value?.tags || [], (tag) => {\n                                return (_openBlock(), _createElementBlock(\"span\", {\n                                    key: tag,\n                                    class: \"tag\"\n                                }, _toDisplayString(tag), 1 /* TEXT */));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_9, [\n                        _createElementVNode(\"button\", {\n                            class: _normalizeClass([\"tab-link\", { active: activeTab.value === 'content' }]),\n                            onClick: _cache[1] || (_cache[1] = ($event) => (activeTab.value = 'content'))\n                        }, \"  \", 2 /* CLASS */),\n                        _createElementVNode(\"button\", {\n                            class: _normalizeClass([\"tab-link\", { active: activeTab.value === 'reviews' }]),\n                            onClick: _cache[2] || (_cache[2] = ($event) => (activeTab.value = 'reviews'))\n                        }, \"  \", 2 /* CLASS */),\n                        _createElementVNode(\"button\", {\n                            class: _normalizeClass([\"tab-link\", { active: activeTab.value === 'images' }]),\n                            onClick: _cache[3] || (_cache[3] = ($event) => (activeTab.value = 'images'))\n                        }, \"  \", 2 /* CLASS */)\n                    ]),\n                    _createElementVNode(\"div\", {\n                        class: _normalizeClass([\"tab-content\", { active: activeTab.value === 'content' }])\n                    }, [\n                        (itemData.value?.description)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [\n                                _createElementVNode(\"div\", null, [\n                                    _cache[5] || (_cache[5] = _createElementVNode(\"p\", { class: \"title\" }, \"\", -1 /* CACHED */)),\n                                    _createElementVNode(\"p\", _hoisted_11, _toDisplayString(itemData.value.description), 1 /* TEXT */)\n                                ])\n                            ]))\n                            : _createCommentVNode(\"v-if\", true),\n                        (itemData.value?.content && itemData.value.content.length > 0)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(itemData.value.content, (content) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: content,\n                                        class: \"service-item clickable\",\n                                        onClick: ($event) => (handleFeatureClick(content))\n                                    }, [\n                                        _createElementVNode(\"p\", null, _toDisplayString(content), 1 /* TEXT */)\n                                    ], 8 /* PROPS */, _hoisted_13));\n                                }), 128 /* KEYED_FRAGMENT */)),\n                                _cache[6] || (_cache[6] = _createElementVNode(\"div\", { class: \"tip-text\" }, \" \\\"\\\"\", -1 /* CACHED */))\n                            ]))\n                            : (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [...(_cache[7] || (_cache[7] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-list-ul\" }, null, -1 /* CACHED */),\n                                    _createElementVNode(\"p\", null, \"\", -1 /* CACHED */)\n                                ]))]))\n                    ], 2 /* CLASS */),\n                    _createElementVNode(\"div\", {\n                        class: _normalizeClass([\"tab-content\", { active: activeTab.value === 'reviews' }])\n                    }, [\n                        (itemData.value?.reviews && itemData.value.reviews.length > 0)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(itemData.value.reviews, (review) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: review,\n                                        class: \"review-item\"\n                                    }, [\n                                        _createElementVNode(\"p\", null, _toDisplayString(review), 1 /* TEXT */)\n                                    ]));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]))\n                            : (_openBlock(), _createElementBlock(\"div\", _hoisted_16, [...(_cache[8] || (_cache[8] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-comment-slash\" }, null, -1 /* CACHED */),\n                                    _createElementVNode(\"p\", null, \"\", -1 /* CACHED */)\n                                ]))]))\n                    ], 2 /* CLASS */),\n                    _createElementVNode(\"div\", {\n                        class: _normalizeClass([\"tab-content\", { active: activeTab.value === 'images' }])\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_17, [\n                            _cache[9] || (_cache[9] = _createElementVNode(\"h5\", null, \"\", -1 /* CACHED */)),\n                            _createElementVNode(\"div\", {\n                                class: \"image-placeholder\",\n                                style: _normalizeStyle({ borderStyle: itemData.value?.image1 ? 'solid' : 'dashed' })\n                            }, _toDisplayString(itemData.value?.image1 || ''), 5 /* TEXT, STYLE */)\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_18, [\n                            _cache[10] || (_cache[10] = _createElementVNode(\"h5\", null, \"\", -1 /* CACHED */)),\n                            _createElementVNode(\"div\", {\n                                class: \"image-placeholder\",\n                                style: _normalizeStyle({ borderStyle: itemData.value?.image2 ? 'solid' : 'dashed' })\n                            }, _toDisplayString(itemData.value?.image2 || ''), 5 /* TEXT, STYLE */)\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_19, [\n                            _cache[11] || (_cache[11] = _createElementVNode(\"h5\", null, \"\", -1 /* CACHED */)),\n                            _createElementVNode(\"div\", {\n                                class: \"image-placeholder\",\n                                style: _normalizeStyle({ borderStyle: itemData.value?.image3 ? 'solid' : 'dashed' })\n                            }, _toDisplayString(itemData.value?.image3 || ''), 5 /* TEXT, STYLE */)\n                        ])\n                    ], 2 /* CLASS */)\n                ]),\n                _createElementVNode(\"div\", _hoisted_20, [\n                    _createElementVNode(\"div\", _hoisted_21, [\n                        _createElementVNode(\"span\", _hoisted_22, _toDisplayString(itemData.value?.price || '0'), 1 /* TEXT */)\n                    ]),\n                    _createElementVNode(\"button\", {\n                        class: \"order-btn\",\n                        onClick: showRemarkModal\n                    }, \"\")\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", {\n                    id: \"remark-modal\",\n                    class: \"modal-overlay\",\n                    style: _normalizeStyle({ display: showModal.value ? 'flex' : 'none' })\n                }, [\n                    _createElementVNode(\"div\", _hoisted_23, [\n                        _cache[13] || (_cache[13] = _createElementVNode(\"h3\", null, \"\", -1 /* CACHED */)),\n                        (itemData.value?.content && itemData.value.content.length > 0)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_24, [\n                                _cache[12] || (_cache[12] = _createElementVNode(\"h4\", { class: \"modal-tags-title\" }, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_25, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(itemData.value.content, (content) => {\n                                        return (_openBlock(), _createElementBlock(\"button\", {\n                                            key: content,\n                                            class: \"content-tag-btn\",\n                                            onClick: ($event) => (addToRemark(content))\n                                        }, _toDisplayString(content), 9 /* TEXT, PROPS */, _hoisted_26));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ])\n                            ]))\n                            : _createCommentVNode(\"v-if\", true),\n                        _withDirectives(_createElementVNode(\"textarea\", {\n                            id: \"remark-textarea\",\n                            \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event) => ((remarkText).value = $event)),\n                            placeholder: \"NTRNTL...\"\n                        }, null, 512 /* NEED_PATCH */), [\n                            [_vModelText, remarkText.value]\n                        ]),\n                        _createElementVNode(\"div\", { class: \"modal-buttons\" }, [\n                            _createElementVNode(\"button\", {\n                                class: \"modal-btn-cancel\",\n                                onClick: closeRemarkModal\n                            }, \"\"),\n                            _createElementVNode(\"button\", {\n                                class: \"modal-btn-confirm\",\n                                onClick: confirmOrder\n                            }, \"\")\n                        ])\n                    ])\n                ], 4 /* STYLE */)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./ItemDetail.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ItemDetail.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ItemDetail.vue?vue&type=style&index=0&id=6ad7adac&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6ad7adac\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = { class: \"app-view active\" };\nconst _hoisted_2 = { class: \"app-header\" };\nconst _hoisted_3 = { class: \"title\" };\nconst _hoisted_4 = { class: \"app-content\" };\nconst _hoisted_5 = { class: \"shop-header-card\" };\nconst _hoisted_6 = { class: \"shop-avatar-text\" };\nconst _hoisted_7 = {\n    key: 1,\n    class: \"fas fa-store\"\n};\nconst _hoisted_8 = { class: \"shop-name\" };\nconst _hoisted_9 = { class: \"shop-slogan\" };\nconst _hoisted_10 = { class: \"list-section\" };\nconst _hoisted_11 = { class: \"package-list\" };\nconst _hoisted_12 = {\n    key: 0,\n    class: \"empty-state\"\n};\nconst _hoisted_13 = [\"data-id\", \"onClick\"];\nconst _hoisted_14 = { class: \"avatar-text\" };\nconst _hoisted_15 = { key: 1 };\nconst _hoisted_16 = { class: \"info\" };\nconst _hoisted_17 = { class: \"name\" };\nconst _hoisted_18 = { class: \"desc\" };\nconst _hoisted_19 = { key: 0 };\nconst _hoisted_20 = { class: \"nav-bar\" };\nimport { onMounted, ref } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport { shopStoreMvu } from './shared/shopStoreMvu';\nconst SHOP_STORE_KEY = 'shop_store_cache';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'ShopDetail',\n    setup(__props) {\n        const route = useRoute();\n        const router = useRouter();\n        const shopInfo = ref(null);\n        const shopPackages = ref([]);\n        const shopStoreApi = ref(shopStoreMvu);\n        function dedupe(list) {\n            const map = new Map();\n            list.forEach(s => {\n                if (!s)\n                    return;\n                const id = s.id ? String(s.id) : '';\n                if (id && !map.has(id))\n                    map.set(id, { ...s, id });\n            });\n            return Array.from(map.values());\n        }\n        // \n        onMounted(async () => {\n            const shopIdParam = route.params.id;\n            const matcher = (s, idx) => String(s.id ?? idx) === String(shopIdParam);\n            // MVU \n            const mvuShops = dedupe(shopStoreApi.value.getShops() || []);\n            shopInfo.value = mvuShops.find(matcher) || mvuShops[Number(shopIdParam)] || null;\n            if (shopInfo.value) {\n                shopPackages.value = (shopInfo.value.packages || []).map((p, idx) => ({\n                    ...p,\n                    id: String(p.id ?? `${shopInfo.value.id}_pkg_${idx}`),\n                    shop_id: String(p.shop_id ?? shopInfo.value.id ?? ''),\n                }));\n            }\n            else {\n                shopPackages.value = [];\n            }\n        });\n        function goItemDetail(pkg) {\n            router.push({ path: `/item/${pkg.id}`, query: { name: pkg.name } });\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _createElementVNode(\"i\", {\n                            class: \"fas fa-arrow-left\",\n                            onClick: _cache[0] || (_cache[0] = ($event) => (_ctx.$router.back()))\n                        }),\n                        _cache[3] || (_cache[3] = _createElementVNode(\"span\", null, \"\", -1 /* CACHED */))\n                    ])\n                ]),\n                _createElementVNode(\"div\", _hoisted_4, [\n                    _createElementVNode(\"div\", _hoisted_5, [\n                        _createElementVNode(\"div\", _hoisted_6, [\n                            (shopPackages.value.find(p => p.icon))\n                                ? (_openBlock(), _createElementBlock(\"i\", {\n                                    key: 0,\n                                    class: _normalizeClass(shopPackages.value.find(p => p.icon).icon)\n                                }, null, 2 /* CLASS */))\n                                : (_openBlock(), _createElementBlock(\"i\", _hoisted_7))\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_8, _toDisplayString(shopInfo.value?.shopname || shopInfo.value?.name || ''), 1 /* TEXT */),\n                        _createElementVNode(\"div\", _hoisted_9, _toDisplayString(shopInfo.value?.slogan || (shopInfo.value?.shoptags || []).join(' / ') || ''), 1 /* TEXT */)\n                    ]),\n                    _cache[6] || (_cache[6] = _createElementVNode(\"div\", { class: \"restore-tip\" }, [\n                        _createElementVNode(\"i\", { class: \"fas fa-undo-alt\" }),\n                        _createElementVNode(\"span\", null, \"\")\n                    ], -1 /* CACHED */)),\n                    _createElementVNode(\"div\", _hoisted_10, [\n                        _cache[5] || (_cache[5] = _createElementVNode(\"div\", { class: \"section-header\" }, [\n                            _createElementVNode(\"h3\", null, \"\")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_11, [\n                            (shopPackages.value.length === 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [...(_cache[4] || (_cache[4] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-box-open\" }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"p\", null, \"\", -1 /* CACHED */)\n                                    ]))]))\n                                : _createCommentVNode(\"v-if\", true),\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(shopPackages.value, (pkg) => {\n                                return (_openBlock(), _createElementBlock(\"div\", {\n                                    key: pkg.id,\n                                    class: \"package-card\",\n                                    \"data-id\": pkg.id,\n                                    onClick: ($event) => (goItemDetail(pkg))\n                                }, [\n                                    _createElementVNode(\"div\", _hoisted_14, [\n                                        (pkg.icon)\n                                            ? (_openBlock(), _createElementBlock(\"i\", {\n                                                key: 0,\n                                                class: _normalizeClass(pkg.icon)\n                                            }, null, 2 /* CLASS */))\n                                            : (_openBlock(), _createElementBlock(\"span\", _hoisted_15, \"\"))\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_16, [\n                                        _createElementVNode(\"div\", _hoisted_17, _toDisplayString(pkg.name), 1 /* TEXT */),\n                                        _createElementVNode(\"div\", _hoisted_18, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList((pkg.tags || []).slice(0, 4), (tag) => {\n                                                return (_openBlock(), _createElementBlock(\"span\", {\n                                                    key: tag,\n                                                    class: \"package-tag\"\n                                                }, _toDisplayString(tag.replace(/['\"]/g, '')), 1 /* TEXT */));\n                                            }), 128 /* KEYED_FRAGMENT */)),\n                                            (!pkg.tags || pkg.tags.length === 0)\n                                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_19, _toDisplayString((pkg.description || '').split('\\n')[0]), 1 /* TEXT */))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ])\n                                    ])\n                                ], 8 /* PROPS */, _hoisted_13));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ])\n                    ])\n                ]),\n                _createElementVNode(\"div\", _hoisted_20, [\n                    _createElementVNode(\"div\", {\n                        class: \"nav-item\",\n                        onClick: _cache[1] || (_cache[1] = ($event) => (_ctx.$router.push('/home')))\n                    }, [...(_cache[7] || (_cache[7] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-home\" }, null, -1 /* CACHED */),\n                            _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                        ]))]),\n                    _createElementVNode(\"div\", {\n                        class: \"nav-item\",\n                        onClick: _cache[2] || (_cache[2] = ($event) => (_ctx.$router.push('/discover')))\n                    }, [...(_cache[8] || (_cache[8] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-compass\" }, null, -1 /* CACHED */),\n                            _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                        ]))])\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./ShopDetail.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ShopDetail.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ShopDetail.vue?vue&type=style&index=0&id=462b0a62&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-462b0a62\"]])\n\nexport default __exports__","/**\n * \n */\n\n/**\n * \n * @param obj \n * @param path  'a.b.c'  'a[0].b'\n * @param fallback \n * @returns \n */\nexport function getNestedValue<T = any>(obj: any, path: string, fallback: T = '--' as any): T {\n  if (!obj) return fallback;\n  const keys = path\n    .replace(/\\[(\\d+)\\]/g, '.$1')\n    .split('.')\n    .filter(Boolean);\n  let current = obj;\n  for (const key of keys) {\n    if (current == null) return fallback;\n    current = current[key];\n  }\n  return current ?? fallback;\n}\n\n/**\n * \n * @param obj \n * @returns \n */\nexport function deepClone<T>(obj: T): T {\n  if (obj === null || typeof obj !== 'object') return obj;\n  if (Array.isArray(obj)) return obj.map(deepClone) as any;\n  const cloned: any = {};\n  for (const key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      cloned[key] = deepClone(obj[key]);\n    }\n  }\n  return cloned;\n}\n\n/**\n * \n * @param fn \n * @param delay \n * @returns \n */\nexport function debounce<T extends (...args: any[]) => any>(fn: T, delay: number): T {\n  let timeoutId: ReturnType<typeof setTimeout> | null = null;\n  return ((...args: Parameters<T>) => {\n    if (timeoutId) clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => fn(...args), delay);\n  }) as T;\n}\n\n/**\n * \n * @param fn \n * @param limit \n * @returns \n */\nexport function throttle<T extends (...args: any[]) => any>(fn: T, limit: number): T {\n  let inThrottle: boolean = false;\n  return ((...args: Parameters<T>) => {\n    if (!inThrottle) {\n      fn(...args);\n      inThrottle = true;\n      setTimeout(() => (inThrottle = false), limit);\n    }\n  }) as T;\n}\n\n/**\n * ID\n * @param length ID\n * @returns ID\n */\nexport function generateId(length: number = 8): string {\n  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n  let result = '';\n  for (let i = 0; i < length; i++) {\n    result += chars.charAt(Math.floor(Math.random() * chars.length));\n  }\n  return result;\n}\n\n/**\n *  iframe\n * -  iframe \n * -  window.frameElement \n */\nexport function enableIframeFullHeight(options?: { minHeightPx?: number }) {\n  const minHeightPx = options?.minHeightPx ?? 480;\n\n  const isInIframe = (() => {\n    try {\n      return window.self !== window.top;\n    } catch {\n      return true;\n    }\n  })();\n\n  if (!isInIframe) return () => {};\n\n  const iframe = window.frameElement as HTMLIFrameElement | null;\n  if (!iframe) return () => {};\n\n  const pickHostHeight = () => {\n    try {\n      const doc = window.parent?.document;\n      if (!doc) return window.innerHeight;\n\n      const candidates = [\n        '#chat',\n        '#chat-wrapper',\n        '#chat-container',\n        '#chat-messages',\n        '.chat',\n        '.chat-wrapper',\n        '.chat-content',\n      ];\n\n      for (const sel of candidates) {\n        const el = doc.querySelector(sel) as HTMLElement | null;\n        if (el && el.clientHeight > 0) return el.clientHeight;\n      }\n\n      return doc.documentElement?.clientHeight || window.parent.innerHeight || window.innerHeight;\n    } catch {\n      return window.innerHeight;\n    }\n  };\n\n  let rafId = 0;\n  const apply = () => {\n    rafId = 0;\n    const h = Math.max(minHeightPx, pickHostHeight());\n    const next = `${h}px`;\n    if (iframe.style.height !== next) {\n      iframe.style.height = next;\n      iframe.style.maxHeight = next;\n      iframe.style.display = 'block';\n    }\n  };\n\n  const schedule = () => {\n    if (rafId) return;\n    rafId = window.requestAnimationFrame(apply);\n  };\n\n  // \n  schedule();\n\n  window.addEventListener('resize', schedule);\n  // /\n  try {\n    window.parent?.addEventListener?.('resize', schedule);\n  } catch {\n    // ignore\n  }\n\n  return () => {\n    window.removeEventListener('resize', schedule);\n    try {\n      window.parent?.removeEventListener?.('resize', schedule);\n    } catch {\n      // ignore\n    }\n    if (rafId) window.cancelAnimationFrame(rafId);\n  };\n}\n\n/**\n *  - \n */\nexport async function navigateToDefaultPage() {\n  try {\n    // MVU (2)\n    await Promise.race([\n      waitGlobalInitialized('Mvu'),\n      new Promise((_, reject) => setTimeout(() => reject(new Error('MVU')), 2000)),\n    ]);\n\n    // MVU\n    const mvuData = Mvu.getMvuData({ type: 'message', message_id: 'latest' }) as any;\n\n    if (!mvuData) {\n      //  console.debug  logger\n      return '/home';\n    }\n\n    // \n    const orders = mvuData.stat_data?.[''] || mvuData[''];\n\n    if (!orders || !Array.isArray(orders) || orders.length === 0) {\n      return '/home';\n    }\n\n    // \n    const activeOrders = orders.filter((order: any) => {\n      const orderStatus = order. || '';\n      return !orderStatus.includes('');\n    });\n\n    if (activeOrders.length === 0) {\n      return '/home';\n    }\n\n    return '/play';\n  } catch (error) {\n    console.error('[] :', error);\n    return '/home';\n  }\n}\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, normalizeStyle as _normalizeStyle, unref as _unref, vShow as _vShow, withDirectives as _withDirectives } from \"vue\";\nconst _hoisted_1 = { class: \"app-view active\" };\nconst _hoisted_2 = { class: \"app-header\" };\nconst _hoisted_3 = { class: \"app-content\" };\nconst _hoisted_4 = {\n    key: 0,\n    class: \"empty-state\"\n};\nconst _hoisted_5 = {\n    key: 1,\n    class: \"loading-state\"\n};\nconst _hoisted_6 = {\n    key: 2,\n    class: \"tabs-container\"\n};\nconst _hoisted_7 = [\"onClick\"];\nconst _hoisted_8 = {\n    key: 3,\n    class: \"status-card\"\n};\nconst _hoisted_9 = { class: \"status-header\" };\nconst _hoisted_10 = { class: \"basic-info\" };\nconst _hoisted_11 = { class: \"girl-name\" };\nconst _hoisted_12 = { class: \"sub-info\" };\nconst _hoisted_13 = { class: \"identity\" };\nconst _hoisted_14 = { class: \"age\" };\nconst _hoisted_15 = { class: \"badges\" };\nconst _hoisted_16 = {\n    key: 0,\n    class: \"badge badge-type\"\n};\nconst _hoisted_17 = { class: \"order-status-row\" };\nconst _hoisted_18 = { class: \"status-item\" };\nconst _hoisted_19 = { class: \"status-text\" };\nconst _hoisted_20 = { class: \"status-item\" };\nconst _hoisted_21 = { class: \"status-text\" };\nconst _hoisted_22 = { class: \"rating-section\" };\nconst _hoisted_23 = { class: \"stars\" };\nconst _hoisted_24 = { class: \"affection-score\" };\nconst _hoisted_25 = { class: \"price-section\" };\nconst _hoisted_26 = { class: \"price-value\" };\nconst _hoisted_27 = { class: \"package-name\" };\nconst _hoisted_28 = {\n    key: 0,\n    class: \"features-tags\"\n};\nconst _hoisted_29 = { class: \"metrics-grid\" };\nconst _hoisted_30 = { class: \"metric-card\" };\nconst _hoisted_31 = {\n    key: 0,\n    class: \"metric-unit\"\n};\nconst _hoisted_32 = { class: \"metric-card\" };\nconst _hoisted_33 = { class: \"metric-value\" };\nconst _hoisted_34 = { key: 0 };\nconst _hoisted_35 = { class: \"progress-bar\" };\nconst _hoisted_36 = { class: \"metric-card\" };\nconst _hoisted_37 = { class: \"metric-value\" };\nconst _hoisted_38 = { class: \"metric-card\" };\nconst _hoisted_39 = { class: \"metric-value\" };\nconst _hoisted_40 = {\n    key: 4,\n    class: \"detail-section\"\n};\nconst _hoisted_41 = { class: \"detail-card accordion\" };\nconst _hoisted_42 = { class: \"accordion-body\" };\nconst _hoisted_43 = { class: \"detail-group\" };\nconst _hoisted_44 = {\n    key: 0,\n    class: \"clothing-grid\"\n};\nconst _hoisted_45 = { class: \"clothing-key\" };\nconst _hoisted_46 = { class: \"clothing-value\" };\nconst _hoisted_47 = {\n    key: 1,\n    class: \"empty-text\"\n};\nconst _hoisted_48 = { class: \"detail-group collapsible-group\" };\nconst _hoisted_49 = { class: \"collapsible-content\" };\nconst _hoisted_50 = { class: \"psychology-content\" };\nconst _hoisted_51 = { class: \"psychology-item\" };\nconst _hoisted_52 = { class: \"psychology-text\" };\nconst _hoisted_53 = { class: \"detail-group collapsible-group\" };\nconst _hoisted_54 = { class: \"collapsible-content\" };\nconst _hoisted_55 = { class: \"body-feature-grid\" };\nconst _hoisted_56 = { class: \"feature-row\" };\nconst _hoisted_57 = { class: \"feature-item\" };\nconst _hoisted_58 = { class: \"feature-content\" };\nconst _hoisted_59 = { class: \"feature-value\" };\nconst _hoisted_60 = { class: \"feature-item\" };\nconst _hoisted_61 = { class: \"feature-content\" };\nconst _hoisted_62 = { class: \"feature-value\" };\nconst _hoisted_63 = { class: \"feature-description\" };\nconst _hoisted_64 = { class: \"desc-item\" };\nconst _hoisted_65 = { class: \"desc-text\" };\nconst _hoisted_66 = { class: \"desc-item\" };\nconst _hoisted_67 = { class: \"desc-text\" };\nconst _hoisted_68 = { class: \"desc-item\" };\nconst _hoisted_69 = { class: \"desc-text\" };\nconst _hoisted_70 = { class: \"detail-group collapsible-group\" };\nconst _hoisted_71 = { class: \"collapsible-content\" };\nconst _hoisted_72 = { class: \"experience-stats\" };\nconst _hoisted_73 = { class: \"stats-section\" };\nconst _hoisted_74 = { class: \"stats-grid\" };\nconst _hoisted_75 = { class: \"stat-item\" };\nconst _hoisted_76 = { class: \"stat-content\" };\nconst _hoisted_77 = { class: \"stat-value\" };\nconst _hoisted_78 = { class: \"stat-item\" };\nconst _hoisted_79 = { class: \"stat-content\" };\nconst _hoisted_80 = { class: \"stat-value\" };\nconst _hoisted_81 = { class: \"stat-item\" };\nconst _hoisted_82 = { class: \"stat-content\" };\nconst _hoisted_83 = { class: \"stat-value\" };\nconst _hoisted_84 = { class: \"stat-item\" };\nconst _hoisted_85 = { class: \"stat-content\" };\nconst _hoisted_86 = { class: \"stat-value\" };\nconst _hoisted_87 = { class: \"stat-item\" };\nconst _hoisted_88 = { class: \"stat-content\" };\nconst _hoisted_89 = { class: \"stat-value\" };\nconst _hoisted_90 = { class: \"stats-section\" };\nconst _hoisted_91 = { class: \"stats-grid\" };\nconst _hoisted_92 = { class: \"stat-item\" };\nconst _hoisted_93 = { class: \"stat-content\" };\nconst _hoisted_94 = { class: \"stat-value\" };\nconst _hoisted_95 = { class: \"stat-item\" };\nconst _hoisted_96 = { class: \"stat-content\" };\nconst _hoisted_97 = { class: \"stat-value\" };\nimport { computed, onActivated, onMounted, ref, watch } from 'vue';\nimport { filterActiveOrders, loadOrdersFromMVU, readCachedOrders } from './shared/serviceOrders';\nimport { getNestedValue } from './utils';\n// \nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Service',\n    setup(__props) {\n        const girlsData = ref([]);\n        const currentGirlIndex = ref(0);\n        const showDetails = ref(true);\n        const isLoading = ref(false);\n        const isRefreshing = ref(false);\n        const errorMessage = ref('');\n        // \n        const showPsychology = ref(false);\n        const showBody = ref(false);\n        const showExperience = ref(false);\n        // \n        watch(currentGirlIndex, () => {\n            showDetails.value = true;\n            showPsychology.value = false;\n            showBody.value = false;\n            showExperience.value = false;\n        });\n        // \n        const currentGirl = computed(() => girlsData.value[currentGirlIndex.value] || null);\n        // ================  ================\n        /**\n         * \n         */\n        function getGirlName(girl) {\n            return getNestedValue(girl, '.') || ` ${girlsData.value.indexOf(girl) + 1}`;\n        }\n        /**\n         * \n         */\n        async function refreshData() {\n            isRefreshing.value = true;\n            errorMessage.value = '';\n            try {\n                const orders = await loadOrdersFromMVU();\n                const active = filterActiveOrders(orders);\n                girlsData.value = active;\n                if (active.length === 0) {\n                    errorMessage.value = '';\n                    console.log('[] ');\n                }\n                else {\n                    toastr.success(` ${active.length} `, '');\n                }\n            }\n            catch (error) {\n                console.error('[Service] :', error);\n                // \n                const cached = readCachedOrders();\n                const active = filterActiveOrders(cached);\n                if (cached.length > 0) {\n                    girlsData.value = active;\n                    toastr.info(` ${active.length}`, '');\n                    errorMessage.value = '';\n                }\n                else {\n                    errorMessage.value = error.message || '';\n                    console.log('[] ');\n                    girlsData.value = [];\n                }\n            }\n            finally {\n                isRefreshing.value = false;\n            }\n        }\n        // ================  ================\n        // \n        const basicInfo = computed(() => ({\n            name: getNestedValue(currentGirl.value, '.', ''),\n            identity: getNestedValue(currentGirl.value, '.', ''),\n            age: getNestedValue(currentGirl.value, '.', 0),\n        }));\n        // \n        const packageInfo = computed(() => ({\n            name: getNestedValue(currentGirl.value, '.', ''),\n            price: getNestedValue(currentGirl.value, '.', '0'),\n            type: getNestedValue(currentGirl.value, '.', ''),\n            features: getNestedValue(currentGirl.value, '.', []),\n        }));\n        // \n        const orderStatus = computed(() => {\n            const status = currentGirl.value?.status ||\n                getNestedValue(currentGirl.value, '', '') ||\n                getNestedValue(currentGirl.value, '.', '');\n            if (String(status).includes(''))\n                return '';\n            if (String(status).includes(''))\n                return '';\n            // \n            return `${status || ''}AI`;\n        });\n        const orderStatusClass = computed(() => {\n            const status = orderStatus.value;\n            if (status.includes(''))\n                return 'status-active';\n            if (status.includes(''))\n                return 'status-completed';\n            return 'status-pending';\n        });\n        // \n        const heartbeatDisplay = computed(() => getNestedValue(currentGirl.value, '.', '-'));\n        const heartbeatStatusClass = computed(() => {\n            const value = parseFloat(String(heartbeatDisplay.value));\n            if (isNaN(value))\n                return 'status-normal';\n            if (value < 60)\n                return 'status-warning';\n            if (value > 100)\n                return 'status-danger';\n            return 'status-normal';\n        });\n        const heartbeatColor = computed(() => {\n            switch (heartbeatStatusClass.value) {\n                case 'status-warning':\n                    return 'var(--status-warning)';\n                case 'status-danger':\n                    return 'var(--status-danger)';\n                default:\n                    return 'var(--status-success)';\n            }\n        });\n        // \n        const starRating = computed(() => {\n            const rating = Math.floor((affectionDisplay.value / 100) * 5);\n            return Math.min(5, Math.max(0, rating));\n        });\n        // \n        const affectionDisplay = computed(() => {\n            const value = getNestedValue(currentGirl.value, '.', 0);\n            return typeof value === 'number' ? value : parseFloat(value) || 0;\n        });\n        // \n        const serviceProgress = computed(() => {\n            const count = getNestedValue(currentGirl.value, '.', 0);\n            const num = typeof count === 'number' ? count : parseFloat(String(count));\n            if (isNaN(num))\n                return '-';\n            if (num <= 0)\n                return 0;\n            if (num === 1)\n                return 50;\n            return 100; // num >= 2 \n        });\n        const serviceProgressBarWidth = computed(() => {\n            const value = serviceProgress.value;\n            return value === '-' ? '0%' : `${value}%`;\n        });\n        const progressColor = computed(() => {\n            const value = serviceProgress.value;\n            if (value === '-')\n                return '#E0E0E0';\n            if (value < 30)\n                return '#FFA726';\n            if (value > 80)\n                return '#66BB6A';\n            return '#FFD54F';\n        });\n        // \n        const serviceCount = computed(() => {\n            const count = getNestedValue(currentGirl.value, '.', 0);\n            return typeof count === 'number' ? count : parseInt(count) || 0;\n        });\n        // \n        const displayClothing = computed(() => {\n            const clothing = currentGirl.value?.;\n            if (!clothing)\n                return {};\n            const result = {};\n            for (const [key, value] of Object.entries(clothing)) {\n                if (typeof value === 'string' && value.trim() && value !== '') {\n                    result[key] = value;\n                }\n            }\n            return result;\n        });\n        const hasValidClothing = computed(() => Object.keys(displayClothing.value).length > 0);\n        function clothingIcon(key) {\n            const iconMap = {\n                : 'fas fa-tshirt',\n                : 'fas fa-user-tie',\n                : 'fas fa-shoe-prints',\n                : 'fas fa-heart',\n                : 'fas fa-user',\n                : 'fas fa-socks',\n                : 'fas fa-gem',\n            };\n            return iconMap[key] || 'fas fa-tag';\n        }\n        // ================  ================\n        onMounted(async () => {\n            //  Loading\n            if (girlsData.value.length === 0) {\n                isLoading.value = true;\n            }\n            await refreshData();\n            isLoading.value = false;\n        });\n        onActivated(() => {\n            // \n            refreshData();\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _cache[4] || (_cache[4] = _createElementVNode(\"div\", { class: \"title\" }, [\n                        _createElementVNode(\"i\", { class: \"fas fa-concierge-bell\" }),\n                        _createElementVNode(\"span\", null, \"\")\n                    ], -1 /* CACHED */)),\n                    (girlsData.value.length > 0)\n                        ? (_openBlock(), _createElementBlock(\"button\", {\n                            key: 0,\n                            class: \"refresh-btn\",\n                            onClick: refreshData\n                        }, [\n                            _createElementVNode(\"i\", {\n                                class: _normalizeClass([\"fas fa-sync-alt\", { 'fa-spin': isRefreshing.value }])\n                            }, null, 2 /* CLASS */)\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _createElementVNode(\"div\", _hoisted_3, [\n                    _createCommentVNode(\"  \"),\n                    (girlsData.value.length === 0 && !isLoading.value)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n                            _cache[6] || (_cache[6] = _createElementVNode(\"i\", { class: \"fas fa-inbox\" }, null, -1 /* CACHED */)),\n                            _createElementVNode(\"p\", null, _toDisplayString(errorMessage.value || ''), 1 /* TEXT */),\n                            _createElementVNode(\"button\", {\n                                class: \"retry-btn\",\n                                onClick: refreshData\n                            }, [...(_cache[5] || (_cache[5] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-redo\" }, null, -1 /* CACHED */),\n                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                ]))])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true),\n                    _createCommentVNode(\"  \"),\n                    (isLoading.value)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [...(_cache[7] || (_cache[7] = [\n                                _createElementVNode(\"div\", { class: \"spinner\" }, null, -1 /* CACHED */),\n                                _createElementVNode(\"p\", null, \"...\", -1 /* CACHED */)\n                            ]))]))\n                        : _createCommentVNode(\"v-if\", true),\n                    _createCommentVNode(\"  \"),\n                    (girlsData.value.length > 1)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(girlsData.value, (girl, index) => {\n                                return (_openBlock(), _createElementBlock(\"div\", {\n                                    key: index,\n                                    class: _normalizeClass(['tab-item', { active: currentGirlIndex.value === index }]),\n                                    onClick: ($event) => (currentGirlIndex.value = index)\n                                }, _toDisplayString(getGirlName(girl)), 11 /* TEXT, CLASS, PROPS */, _hoisted_7));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ]))\n                        : _createCommentVNode(\"v-if\", true),\n                    _createCommentVNode(\"  \"),\n                    (currentGirl.value)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_9, [\n                                _createElementVNode(\"div\", _hoisted_10, [\n                                    _createElementVNode(\"h2\", _hoisted_11, _toDisplayString(basicInfo.value.name), 1 /* TEXT */),\n                                    _createElementVNode(\"div\", _hoisted_12, [\n                                        _createElementVNode(\"span\", _hoisted_13, _toDisplayString(basicInfo.value.identity), 1 /* TEXT */),\n                                        _cache[8] || (_cache[8] = _createElementVNode(\"span\", { class: \"dot\" }, \"\", -1 /* CACHED */)),\n                                        _createElementVNode(\"span\", _hoisted_14, _toDisplayString(basicInfo.value.age) + \"\", 1 /* TEXT */)\n                                    ])\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_15, [\n                                    _cache[9] || (_cache[9] = _createElementVNode(\"span\", { class: \"badge badge-hot\" }, \"HOT\", -1 /* CACHED */)),\n                                    (packageInfo.value.type)\n                                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_16, _toDisplayString(packageInfo.value.type), 1 /* TEXT */))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_17, [\n                                _createElementVNode(\"div\", _hoisted_18, [\n                                    _createElementVNode(\"i\", {\n                                        class: _normalizeClass([\"fas fa-heart status-icon\", orderStatusClass.value])\n                                    }, null, 2 /* CLASS */),\n                                    _createElementVNode(\"span\", _hoisted_19, _toDisplayString(orderStatus.value), 1 /* TEXT */)\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_20, [\n                                    _createElementVNode(\"i\", {\n                                        class: _normalizeClass([\"fas fa-heartbeat status-icon\", heartbeatStatusClass.value])\n                                    }, null, 2 /* CLASS */),\n                                    _createElementVNode(\"span\", _hoisted_21, _toDisplayString(heartbeatDisplay.value), 1 /* TEXT */)\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_22, [\n                                _createElementVNode(\"div\", _hoisted_23, [\n                                    (_openBlock(), _createElementBlock(_Fragment, null, _renderList(5, (n) => {\n                                        return _createElementVNode(\"i\", {\n                                            key: n,\n                                            class: _normalizeClass(['fas fa-star', n <= starRating.value ? 'star active' : 'star'])\n                                        }, null, 2 /* CLASS */);\n                                    }), 64 /* STABLE_FRAGMENT */))\n                                ]),\n                                _createElementVNode(\"span\", _hoisted_24, _toDisplayString(affectionDisplay.value) + \"/100\", 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_25, [\n                                _cache[10] || (_cache[10] = _createElementVNode(\"div\", { class: \"price-label\" }, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_26, \"\" + _toDisplayString(packageInfo.value.price), 1 /* TEXT */),\n                                _createElementVNode(\"div\", _hoisted_27, _toDisplayString(packageInfo.value.name), 1 /* TEXT */),\n                                (packageInfo.value.features && packageInfo.value.features.length > 0)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_28, [\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(packageInfo.value.features, (feature) => {\n                                            return (_openBlock(), _createElementBlock(\"span\", {\n                                                key: feature,\n                                                class: \"feature-tag\"\n                                            }, _toDisplayString(feature), 1 /* TEXT */));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_29, [\n                                _createElementVNode(\"div\", _hoisted_30, [\n                                    _cache[11] || (_cache[11] = _createElementVNode(\"div\", { class: \"metric-label\" }, \"\", -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", {\n                                        class: \"metric-value\",\n                                        style: _normalizeStyle({ color: heartbeatColor.value })\n                                    }, [\n                                        _createTextVNode(_toDisplayString(heartbeatDisplay.value) + \" \", 1 /* TEXT */),\n                                        (heartbeatDisplay.value !== '-')\n                                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_31, \"bpm\"))\n                                            : _createCommentVNode(\"v-if\", true)\n                                    ], 4 /* STYLE */)\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_32, [\n                                    _cache[12] || (_cache[12] = _createElementVNode(\"div\", { class: \"metric-label\" }, \"\", -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_33, [\n                                        _createTextVNode(_toDisplayString(serviceProgress.value), 1 /* TEXT */),\n                                        (serviceProgress.value !== '-')\n                                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_34, \"%\"))\n                                            : _createCommentVNode(\"v-if\", true)\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_35, [\n                                        _createElementVNode(\"div\", {\n                                            class: \"progress-fill\",\n                                            style: _normalizeStyle({ width: serviceProgressBarWidth.value, background: progressColor.value })\n                                        }, null, 4 /* STYLE */)\n                                    ])\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_36, [\n                                    _cache[14] || (_cache[14] = _createElementVNode(\"div\", { class: \"metric-label\" }, \"\", -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_37, [\n                                        _createTextVNode(_toDisplayString(serviceCount.value), 1 /* TEXT */),\n                                        _cache[13] || (_cache[13] = _createElementVNode(\"span\", { class: \"metric-unit\" }, \"\", -1 /* CACHED */))\n                                    ])\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_38, [\n                                    _cache[16] || (_cache[16] = _createElementVNode(\"div\", { class: \"metric-label\" }, \"\", -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_39, [\n                                        _createTextVNode(_toDisplayString(affectionDisplay.value), 1 /* TEXT */),\n                                        _cache[15] || (_cache[15] = _createElementVNode(\"span\", { class: \"metric-unit\" }, \"/100\", -1 /* CACHED */))\n                                    ])\n                                ])\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true),\n                    _createCommentVNode(\"  \"),\n                    (currentGirl.value)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_40, [\n                            _createElementVNode(\"div\", _hoisted_41, [\n                                _createElementVNode(\"div\", {\n                                    class: _normalizeClass([\"accordion-header\", { active: showDetails.value }]),\n                                    onClick: _cache[0] || (_cache[0] = ($event) => (showDetails.value = !showDetails.value))\n                                }, [\n                                    _cache[17] || (_cache[17] = _createElementVNode(\"span\", null, [\n                                        _createElementVNode(\"i\", { class: \"fas fa-info-circle accordion-icon\" }),\n                                        _createTextVNode(\"  \")\n                                    ], -1 /* CACHED */)),\n                                    _createElementVNode(\"i\", {\n                                        class: _normalizeClass([\"fas fa-chevron-down accordion-arrow\", { active: showDetails.value }])\n                                    }, null, 2 /* CLASS */)\n                                ], 2 /* CLASS */),\n                                _createElementVNode(\"div\", {\n                                    class: _normalizeClass([\"accordion-content\", { show: showDetails.value }])\n                                }, [\n                                    _createElementVNode(\"div\", _hoisted_42, [\n                                        _createCommentVNode(\"  \"),\n                                        _createElementVNode(\"div\", _hoisted_43, [\n                                            _cache[18] || (_cache[18] = _createElementVNode(\"h4\", { class: \"group-title\" }, [\n                                                _createElementVNode(\"i\", { class: \"fas fa-user-tie\" }),\n                                                _createTextVNode(\"  \")\n                                            ], -1 /* CACHED */)),\n                                            (hasValidClothing.value)\n                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_44, [\n                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(displayClothing.value, (value, key) => {\n                                                        return (_openBlock(), _createElementBlock(\"div\", {\n                                                            key: key,\n                                                            class: \"clothing-item\"\n                                                        }, [\n                                                            _createElementVNode(\"i\", {\n                                                                class: _normalizeClass(['clothing-icon', clothingIcon(String(key))])\n                                                            }, null, 2 /* CLASS */),\n                                                            _createElementVNode(\"span\", _hoisted_45, _toDisplayString(key), 1 /* TEXT */),\n                                                            _createElementVNode(\"span\", _hoisted_46, _toDisplayString(value), 1 /* TEXT */)\n                                                        ]));\n                                                    }), 128 /* KEYED_FRAGMENT */))\n                                                ]))\n                                                : (_openBlock(), _createElementBlock(\"div\", _hoisted_47, \"\"))\n                                        ]),\n                                        _createCommentVNode(\"  \"),\n                                        _createElementVNode(\"div\", _hoisted_48, [\n                                            _createElementVNode(\"div\", {\n                                                class: \"collapsible-header\",\n                                                onClick: _cache[1] || (_cache[1] = ($event) => (showPsychology.value = !showPsychology.value))\n                                            }, [\n                                                _cache[19] || (_cache[19] = _createElementVNode(\"h4\", { class: \"group-title\" }, [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-heart\" }),\n                                                    _createTextVNode(\"  \")\n                                                ], -1 /* CACHED */)),\n                                                _createElementVNode(\"i\", {\n                                                    class: _normalizeClass(['fas fa-chevron-down accordion-arrow', { active: showPsychology.value }])\n                                                }, null, 2 /* CLASS */)\n                                            ]),\n                                            _withDirectives(_createElementVNode(\"div\", _hoisted_49, [\n                                                _createElementVNode(\"div\", _hoisted_50, [\n                                                    _createElementVNode(\"div\", _hoisted_51, [\n                                                        _cache[20] || (_cache[20] = _createElementVNode(\"div\", { class: \"psychology-label\" }, [\n                                                            _createElementVNode(\"i\", { class: \"fas fa-brain\" }),\n                                                            _createTextVNode(\"  \")\n                                                        ], -1 /* CACHED */)),\n                                                        _createElementVNode(\"div\", _hoisted_52, _toDisplayString(_unref(getNestedValue)(currentGirl.value, '.', '-')), 1 /* TEXT */)\n                                                    ])\n                                                ])\n                                            ], 512 /* NEED_PATCH */), [\n                                                [_vShow, showPsychology.value]\n                                            ])\n                                        ]),\n                                        _createCommentVNode(\"  \"),\n                                        _createElementVNode(\"div\", _hoisted_53, [\n                                            _createElementVNode(\"div\", {\n                                                class: \"collapsible-header\",\n                                                onClick: _cache[2] || (_cache[2] = ($event) => (showBody.value = !showBody.value))\n                                            }, [\n                                                _cache[21] || (_cache[21] = _createElementVNode(\"h4\", { class: \"group-title\" }, [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-female\" }),\n                                                    _createTextVNode(\"  \")\n                                                ], -1 /* CACHED */)),\n                                                _createElementVNode(\"i\", {\n                                                    class: _normalizeClass(['fas fa-chevron-down accordion-arrow', { active: showBody.value }])\n                                                }, null, 2 /* CLASS */)\n                                            ]),\n                                            _withDirectives(_createElementVNode(\"div\", _hoisted_54, [\n                                                _createElementVNode(\"div\", _hoisted_55, [\n                                                    _createElementVNode(\"div\", _hoisted_56, [\n                                                        _createElementVNode(\"div\", _hoisted_57, [\n                                                            _cache[23] || (_cache[23] = _createElementVNode(\"div\", { class: \"feature-icon\" }, [\n                                                                _createElementVNode(\"i\", { class: \"fas fa-tshirt\" })\n                                                            ], -1 /* CACHED */)),\n                                                            _createElementVNode(\"div\", _hoisted_58, [\n                                                                _cache[22] || (_cache[22] = _createElementVNode(\"div\", { class: \"feature-label\" }, \"\", -1 /* CACHED */)),\n                                                                _createElementVNode(\"div\", _hoisted_59, _toDisplayString(_unref(getNestedValue)(currentGirl.value, '..', '-')), 1 /* TEXT */)\n                                                            ])\n                                                        ]),\n                                                        _createElementVNode(\"div\", _hoisted_60, [\n                                                            _cache[25] || (_cache[25] = _createElementVNode(\"div\", { class: \"feature-icon\" }, [\n                                                                _createElementVNode(\"i\", { class: \"fas fa-circle\" })\n                                                            ], -1 /* CACHED */)),\n                                                            _createElementVNode(\"div\", _hoisted_61, [\n                                                                _cache[24] || (_cache[24] = _createElementVNode(\"div\", { class: \"feature-label\" }, \"\", -1 /* CACHED */)),\n                                                                _createElementVNode(\"div\", _hoisted_62, _toDisplayString(_unref(getNestedValue)(currentGirl.value, '..', '-')), 1 /* TEXT */)\n                                                            ])\n                                                        ])\n                                                    ]),\n                                                    _createElementVNode(\"div\", _hoisted_63, [\n                                                        _createElementVNode(\"div\", _hoisted_64, [\n                                                            _cache[26] || (_cache[26] = _createElementVNode(\"div\", { class: \"desc-label\" }, [\n                                                                _createElementVNode(\"i\", { class: \"fas fa-star\" }),\n                                                                _createTextVNode(\"  \")\n                                                            ], -1 /* CACHED */)),\n                                                            _createElementVNode(\"div\", _hoisted_65, _toDisplayString(_unref(getNestedValue)(currentGirl.value, '.', '-')), 1 /* TEXT */)\n                                                        ]),\n                                                        _createElementVNode(\"div\", _hoisted_66, [\n                                                            _cache[27] || (_cache[27] = _createElementVNode(\"div\", { class: \"desc-label\" }, [\n                                                                _createElementVNode(\"i\", { class: \"fas fa-leaf\" }),\n                                                                _createTextVNode(\"  \")\n                                                            ], -1 /* CACHED */)),\n                                                            _createElementVNode(\"div\", _hoisted_67, _toDisplayString(_unref(getNestedValue)(currentGirl.value, '.', '-')), 1 /* TEXT */)\n                                                        ]),\n                                                        _createElementVNode(\"div\", _hoisted_68, [\n                                                            _cache[28] || (_cache[28] = _createElementVNode(\"div\", { class: \"desc-label\" }, [\n                                                                _createElementVNode(\"i\", { class: \"fas fa-running\" }),\n                                                                _createTextVNode(\"  \")\n                                                            ], -1 /* CACHED */)),\n                                                            _createElementVNode(\"div\", _hoisted_69, _toDisplayString(_unref(getNestedValue)(currentGirl.value, '.', '-')), 1 /* TEXT */)\n                                                        ])\n                                                    ])\n                                                ])\n                                            ], 512 /* NEED_PATCH */), [\n                                                [_vShow, showBody.value]\n                                            ])\n                                        ]),\n                                        _createCommentVNode(\"  \"),\n                                        _createElementVNode(\"div\", _hoisted_70, [\n                                            _createElementVNode(\"div\", {\n                                                class: \"collapsible-header\",\n                                                onClick: _cache[3] || (_cache[3] = ($event) => (showExperience.value = !showExperience.value))\n                                            }, [\n                                                _cache[29] || (_cache[29] = _createElementVNode(\"h4\", { class: \"group-title\" }, [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-chart-bar\" }),\n                                                    _createTextVNode(\"  \")\n                                                ], -1 /* CACHED */)),\n                                                _createElementVNode(\"i\", {\n                                                    class: _normalizeClass(['fas fa-chevron-down accordion-arrow', { active: showExperience.value }])\n                                                }, null, 2 /* CLASS */)\n                                            ]),\n                                            _withDirectives(_createElementVNode(\"div\", _hoisted_71, [\n                                                _createElementVNode(\"div\", _hoisted_72, [\n                                                    _createElementVNode(\"div\", _hoisted_73, [\n                                                        _cache[40] || (_cache[40] = _createElementVNode(\"div\", { class: \"section-title\" }, [\n                                                            _createElementVNode(\"i\", { class: \"fas fa-heart\" }),\n                                                            _createTextVNode(\"  \")\n                                                        ], -1 /* CACHED */)),\n                                                        _createElementVNode(\"div\", _hoisted_74, [\n                                                            _createElementVNode(\"div\", _hoisted_75, [\n                                                                _cache[31] || (_cache[31] = _createElementVNode(\"div\", { class: \"stat-icon\" }, [\n                                                                    _createElementVNode(\"i\", { class: \"fas fa-seedling\" })\n                                                                ], -1 /* CACHED */)),\n                                                                _createElementVNode(\"div\", _hoisted_76, [\n                                                                    _cache[30] || (_cache[30] = _createElementVNode(\"div\", { class: \"stat-label\" }, \"\", -1 /* CACHED */)),\n                                                                    _createElementVNode(\"div\", _hoisted_77, _toDisplayString(_unref(getNestedValue)(currentGirl.value, '.', '-')), 1 /* TEXT */)\n                                                                ])\n                                                            ]),\n                                                            _createElementVNode(\"div\", _hoisted_78, [\n                                                                _cache[33] || (_cache[33] = _createElementVNode(\"div\", { class: \"stat-icon\" }, [\n                                                                    _createElementVNode(\"i\", { class: \"fas fa-users\" })\n                                                                ], -1 /* CACHED */)),\n                                                                _createElementVNode(\"div\", _hoisted_79, [\n                                                                    _cache[32] || (_cache[32] = _createElementVNode(\"div\", { class: \"stat-label\" }, \"\", -1 /* CACHED */)),\n                                                                    _createElementVNode(\"div\", _hoisted_80, _toDisplayString(_unref(getNestedValue)(currentGirl.value, '.', '-')), 1 /* TEXT */)\n                                                                ])\n                                                            ]),\n                                                            _createElementVNode(\"div\", _hoisted_81, [\n                                                                _cache[35] || (_cache[35] = _createElementVNode(\"div\", { class: \"stat-icon\" }, [\n                                                                    _createElementVNode(\"i\", { class: \"fas fa-handshake\" })\n                                                                ], -1 /* CACHED */)),\n                                                                _createElementVNode(\"div\", _hoisted_82, [\n                                                                    _cache[34] || (_cache[34] = _createElementVNode(\"div\", { class: \"stat-label\" }, \"\", -1 /* CACHED */)),\n                                                                    _createElementVNode(\"div\", _hoisted_83, _toDisplayString(_unref(getNestedValue)(currentGirl.value, '.', '-')), 1 /* TEXT */)\n                                                                ])\n                                                            ]),\n                                                            _createElementVNode(\"div\", _hoisted_84, [\n                                                                _cache[37] || (_cache[37] = _createElementVNode(\"div\", { class: \"stat-icon\" }, [\n                                                                    _createElementVNode(\"i\", { class: \"fas fa-baby\" })\n                                                                ], -1 /* CACHED */)),\n                                                                _createElementVNode(\"div\", _hoisted_85, [\n                                                                    _cache[36] || (_cache[36] = _createElementVNode(\"div\", { class: \"stat-label\" }, \"\", -1 /* CACHED */)),\n                                                                    _createElementVNode(\"div\", _hoisted_86, _toDisplayString(_unref(getNestedValue)(currentGirl.value, '.', '-')), 1 /* TEXT */)\n                                                                ])\n                                                            ]),\n                                                            _createElementVNode(\"div\", _hoisted_87, [\n                                                                _cache[39] || (_cache[39] = _createElementVNode(\"div\", { class: \"stat-icon\" }, [\n                                                                    _createElementVNode(\"i\", { class: \"fas fa-shopping-cart\" })\n                                                                ], -1 /* CACHED */)),\n                                                                _createElementVNode(\"div\", _hoisted_88, [\n                                                                    _cache[38] || (_cache[38] = _createElementVNode(\"div\", { class: \"stat-label\" }, \"\", -1 /* CACHED */)),\n                                                                    _createElementVNode(\"div\", _hoisted_89, _toDisplayString(_unref(getNestedValue)(currentGirl.value, '.', 0)), 1 /* TEXT */)\n                                                                ])\n                                                            ])\n                                                        ])\n                                                    ]),\n                                                    _createElementVNode(\"div\", _hoisted_90, [\n                                                        _cache[45] || (_cache[45] = _createElementVNode(\"div\", { class: \"section-title\" }, [\n                                                            _createElementVNode(\"i\", { class: \"fas fa-chart-line\" }),\n                                                            _createTextVNode(\"  \")\n                                                        ], -1 /* CACHED */)),\n                                                        _createElementVNode(\"div\", _hoisted_91, [\n                                                            _createElementVNode(\"div\", _hoisted_92, [\n                                                                _cache[42] || (_cache[42] = _createElementVNode(\"div\", { class: \"stat-icon\" }, [\n                                                                    _createElementVNode(\"i\", { class: \"fas fa-heartbeat\" })\n                                                                ], -1 /* CACHED */)),\n                                                                _createElementVNode(\"div\", _hoisted_93, [\n                                                                    _cache[41] || (_cache[41] = _createElementVNode(\"div\", { class: \"stat-label\" }, \"\", -1 /* CACHED */)),\n                                                                    _createElementVNode(\"div\", _hoisted_94, _toDisplayString(_unref(getNestedValue)(currentGirl.value, '.', '-')), 1 /* TEXT */)\n                                                                ])\n                                                            ]),\n                                                            _createElementVNode(\"div\", _hoisted_95, [\n                                                                _cache[44] || (_cache[44] = _createElementVNode(\"div\", { class: \"stat-icon\" }, [\n                                                                    _createElementVNode(\"i\", { class: \"fas fa-tint\" })\n                                                                ], -1 /* CACHED */)),\n                                                                _createElementVNode(\"div\", _hoisted_96, [\n                                                                    _cache[43] || (_cache[43] = _createElementVNode(\"div\", { class: \"stat-label\" }, \"\", -1 /* CACHED */)),\n                                                                    _createElementVNode(\"div\", _hoisted_97, _toDisplayString(_unref(getNestedValue)(currentGirl.value, '.', '-')), 1 /* TEXT */)\n                                                                ])\n                                                            ])\n                                                        ])\n                                                    ])\n                                                ])\n                                            ], 512 /* NEED_PATCH */), [\n                                                [_vShow, showExperience.value]\n                                            ])\n                                        ])\n                                    ])\n                                ], 2 /* CLASS */)\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./Service.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Service.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Service.vue?vue&type=style&index=0&id=47dd91e6&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-47dd91e6\"]])\n\nexport default __exports__","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","import { ref } from 'vue';\nimport { shopStoreMvu } from './shopStoreMvu';\n\nexport type SelectedPackage = {\n  id?: string;\n  name?: string;\n  shop_id?: string;\n  shop_name?: string;\n  image1?: string;\n  image2?: string;\n  image3?: string;\n  price?: any;\n  stars?: any;\n  tags?: any;\n  icon?: any;\n  description?: any;\n  content?: any;\n  reviews?: any;\n};\n\nexport const selectedPackage = ref<SelectedPackage | null>(null);\nexport const selectedShopId = ref<string | null>(null);\nexport const selectedPackageId = ref<string | null>(null);\n\nfunction coerceId(v: any) {\n  if (typeof v === 'string' && v.trim()) return v.trim();\n  if (typeof v === 'number' && !Number.isNaN(v)) return String(v);\n  return '';\n}\n\nexport function setSelectedPackage(next: SelectedPackage | null) {\n  selectedPackage.value = next;\n  selectedShopId.value = next?.shop_id ? String(next.shop_id) : null;\n  selectedPackageId.value = next?.id ? String(next.id) : null;\n}\n\nexport function setSelectedPackageFromShop(shop: any, pkg: any) {\n  if (!shop || !pkg) return;\n  const shopId = coerceId((shop as any).id || (shop as any).shop_id);\n  const shopName = (shop as any).shopname || (shop as any).name || '';\n  const pkgId = coerceId(pkg?.id);\n\n  setSelectedPackage({\n    id: pkgId || undefined,\n    name: pkg?.name || '',\n    shop_id: shopId || undefined,\n    shop_name: String(shopName),\n    image1: typeof pkg?.image1 === 'string' ? pkg.image1 : '',\n    image2: typeof pkg?.image2 === 'string' ? pkg.image2 : '',\n    image3: typeof pkg?.image3 === 'string' ? pkg.image3 : '',\n    price: (pkg as any)?.price ?? (pkg as any)?. ?? (pkg as any)?.,\n    stars: (pkg as any)?.stars,\n    tags: (pkg as any)?.tags,\n    icon: (pkg as any)?.icon,\n    description: (pkg as any)?.description,\n    content: (pkg as any)?.content,\n    reviews: (pkg as any)?.reviews,\n  });\n}\n\nexport function ensureSelectedPackageFromMvu(): SelectedPackage | null {\n  if (selectedPackage.value) return selectedPackage.value;\n  return refreshSelectedPackageFromMvu();\n}\n\nexport function refreshSelectedPackageFromMvu(): SelectedPackage | null {\n  try {\n    const shops = shopStoreMvu.getShops();\n    if (!shops || shops.length === 0) {\n      setSelectedPackage(null);\n      return null;\n    }\n\n    const tryFind = () => {\n      const sid = selectedShopId.value;\n      const pid = selectedPackageId.value;\n      if (!sid && !pid) return null;\n      for (const shop of shops) {\n        const shopId = coerceId((shop as any).id || (shop as any).shop_id);\n        if (sid && shopId && shopId !== sid) continue;\n        const pkgs = Array.isArray((shop as any).packages) ? (shop as any).packages : [];\n        for (const pkg of pkgs) {\n          const pkgId = coerceId(pkg?.id);\n          if (pid && pkgId && pkgId === pid) return { shop, pkg };\n        }\n      }\n      return null;\n    };\n\n    const found = tryFind();\n    if (found) {\n      setSelectedPackageFromShop(found.shop, found.pkg);\n      return selectedPackage.value;\n    }\n\n    // fallback: first shop first package\n    const shop = shops[0];\n    const pkg = (shop as any)?.packages?.[0];\n    if (!shop || !pkg) {\n      setSelectedPackage(null);\n      return null;\n    }\n    setSelectedPackageFromShop(shop, pkg);\n    return selectedPackage.value;\n  } catch (e) {\n    console.warn('[selectedPackage] refreshSelectedPackageFromMvu failed', e);\n    setSelectedPackage(null);\n    return null;\n  }\n}\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, createTextVNode as _createTextVNode, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n    key: 0,\n    class: \"rounded-2xl border border-purple-500/20 bg-gradient-to-br from-slate-900/80 to-black/60 p-4 shadow-2xl shadow-purple-500/10 backdrop-blur-xl\"\n};\nconst _hoisted_2 = { class: \"mb-4 flex items-center gap-2\" };\nconst _hoisted_3 = { class: \"ml-auto text-xs text-slate-500\" };\nconst _hoisted_4 = { class: \"grid grid-cols-3 gap-2\" };\nconst _hoisted_5 = [\"onClick\"];\nconst _hoisted_6 = [\"src\", \"alt\", \"onError\"];\nconst _hoisted_7 = {\n    key: 1,\n    class: \"flex h-full w-full flex-col items-center justify-center gap-2 p-2 text-center\"\n};\nconst _hoisted_8 = { class: \"flex h-9 w-9 items-center justify-center rounded-xl border border-slate-700/50 bg-slate-900/40 text-purple-300\" };\nconst _hoisted_9 = { class: \"text-xs font-bold text-slate-200\" };\nconst _hoisted_10 = { class: \"line-clamp-2 text-[11px] text-slate-500\" };\nconst _hoisted_11 = { class: \"relative h-full w-full overflow-hidden\" };\nconst _hoisted_12 = { class: \"relative grid h-full grid-cols-3 gap-3 p-3 pb-16\" };\nconst _hoisted_13 = [\"onClick\"];\nconst _hoisted_14 = [\"src\", \"alt\", \"onError\"];\nconst _hoisted_15 = {\n    key: 1,\n    class: \"flex h-full w-full flex-col items-center justify-center gap-2 p-3 text-center\"\n};\nconst _hoisted_16 = { class: \"flex h-10 w-10 items-center justify-center rounded-2xl border border-slate-700/50 bg-slate-900/40 text-blue-200\" };\nconst _hoisted_17 = { class: \"text-xs font-bold text-slate-200\" };\nconst _hoisted_18 = { class: \"line-clamp-3 text-[11px] text-slate-500\" };\nconst _hoisted_19 = { class: \"pointer-events-none absolute bottom-2 right-2 rounded-full border border-white/10 bg-black/30 px-2 py-0.5 text-[11px] text-white/80 backdrop-blur-sm\" };\nconst _hoisted_20 = { class: \"relative w-full max-w-5xl overflow-hidden rounded-2xl border border-slate-700/50 bg-slate-950/80 shadow-2xl backdrop-blur-xl\" };\nconst _hoisted_21 = { class: \"flex items-center justify-between gap-3 border-b border-slate-800/60 px-4 py-3\" };\nconst _hoisted_22 = { class: \"min-w-0\" };\nconst _hoisted_23 = { class: \"truncate text-sm font-bold text-white\" };\nconst _hoisted_24 = { class: \"truncate text-xs text-slate-500\" };\nconst _hoisted_25 = { class: \"flex items-center justify-center p-4\" };\nconst _hoisted_26 = [\"src\"];\nconst _hoisted_27 = {\n    key: 1,\n    class: \"w-full p-4\"\n};\nconst _hoisted_28 = { class: \"rounded-xl border border-slate-800/60 bg-slate-900/40 p-4 font-mono text-xs text-slate-200\" };\nconst _hoisted_29 = { class: \"whitespace-pre-wrap\" };\nconst _hoisted_30 = {\n    key: 0,\n    class: \"mt-3 text-sm text-green-300\"\n};\nconst _hoisted_31 = { class: \"flex items-center gap-2 border-t border-slate-800/60 px-4 py-3\" };\nconst _hoisted_32 = [\"onClick\", \"title\"];\nconst _hoisted_33 = [\"src\", \"alt\", \"onError\"];\nconst _hoisted_34 = {\n    key: 1,\n    class: \"flex h-full w-full items-center justify-center text-slate-200\"\n};\nconst _hoisted_35 = { class: \"ml-auto text-xs text-slate-500\" };\nimport { computed, onMounted, onUnmounted, ref } from 'vue';\nimport { ensureSelectedPackageFromMvu, refreshSelectedPackageFromMvu, selectedPackage, } from '../shared/selectedPackage';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'PackageImageGallery',\n    props: {\n        variant: {}\n    },\n    setup(__props) {\n        const props = __props;\n        const variant = computed(() => props.variant ?? 'panel');\n        const activeIndex = ref(0);\n        const lightboxOpen = ref(false);\n        const copiedHint = ref('');\n        const broken = ref({});\n        function isLikelyImageUrl(raw) {\n            const v = (raw || '').trim();\n            if (!v)\n                return false;\n            if (v.startsWith('blob:'))\n                return true;\n            if (v.startsWith('data:image/'))\n                return true;\n            if (v.startsWith('http://') || v.startsWith('https://'))\n                return true;\n            return /\\.(png|jpe?g|gif|webp|bmp|svg)$/i.test(v);\n        }\n        function stripWrapper(raw) {\n            const v = (raw || '').trim();\n            // ###...###\n            if (v.startsWith('###') && v.endsWith('###') && v.length >= 6)\n                return v.slice(3, -3).trim();\n            return v;\n        }\n        function toSlot(key, label, rawValue) {\n            const raw = typeof rawValue === 'string' ? rawValue : '';\n            const cleaned = stripWrapper(raw);\n            if (!cleaned)\n                return { key, label, raw: '', kind: 'empty' };\n            if (!broken.value[key] && isLikelyImageUrl(cleaned)) {\n                return { key, label, raw: cleaned, kind: 'image', src: cleaned };\n            }\n            return { key, label, raw: cleaned, kind: 'text', text: cleaned };\n        }\n        const slots = computed(() => {\n            const pkg = selectedPackage.value;\n            return [\n                toSlot('image1', '', pkg?.image1),\n                toSlot('image2', '', pkg?.image2),\n                toSlot('image3', '', pkg?.image3),\n            ];\n        });\n        const active = computed(() => slots.value[Math.min(activeIndex.value, slots.value.length - 1)] || slots.value[0]);\n        const title = computed(() => {\n            const pkg = selectedPackage.value;\n            const pkgName = pkg?.name || '';\n            const shopName = pkg?.shop_name ? `  ${pkg.shop_name}` : '';\n            return `${pkgName}${shopName}`;\n        });\n        const subtitle = computed(() => {\n            const slot = active.value;\n            return slot.kind === 'image' ? '' : '/ URL';\n        });\n        function setActive(idx) {\n            activeIndex.value = Math.max(0, Math.min(idx, slots.value.length - 1));\n            copiedHint.value = '';\n        }\n        function open(idx) {\n            setActive(idx);\n            lightboxOpen.value = true;\n        }\n        function close() {\n            lightboxOpen.value = false;\n            copiedHint.value = '';\n        }\n        function onImgError(key) {\n            broken.value = { ...broken.value, [key]: true };\n        }\n        async function copyActive() {\n            copiedHint.value = '';\n            const text = active.value?.kind === 'image' ? active.value.src || '' : active.value?.text || '';\n            if (!text)\n                return;\n            try {\n                await navigator.clipboard.writeText(text);\n                copiedHint.value = '';\n                return;\n            }\n            catch {\n                // fallback\n                try {\n                    const ta = document.createElement('textarea');\n                    ta.value = text;\n                    ta.style.position = 'fixed';\n                    ta.style.left = '-9999px';\n                    document.body.appendChild(ta);\n                    ta.select();\n                    const ok = document.execCommand('copy');\n                    document.body.removeChild(ta);\n                    copiedHint.value = ok ? '' : '';\n                }\n                catch {\n                    copiedHint.value = '';\n                }\n            }\n        }\n        function refreshFromMvu() {\n            refreshSelectedPackageFromMvu();\n            setActive(0);\n        }\n        onMounted(() => {\n            ensureSelectedPackageFromMvu();\n            window.addEventListener('shop:cache:updated', refreshFromMvu);\n        });\n        onUnmounted(() => {\n            window.removeEventListener('shop:cache:updated', refreshFromMvu);\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(_Fragment, null, [\n                (variant.value === 'panel')\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                        _createElementVNode(\"div\", _hoisted_2, [\n                            _cache[2] || (_cache[2] = _createElementVNode(\"i\", { class: \"fas fa-images text-purple-400\" }, null, -1 /* CACHED */)),\n                            _cache[3] || (_cache[3] = _createElementVNode(\"h3\", { class: \"text-white\" }, \"\", -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_3, _toDisplayString(subtitle.value), 1 /* TEXT */)\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_4, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(slots.value, (slot, idx) => {\n                                return (_openBlock(), _createElementBlock(\"button\", {\n                                    key: slot.key,\n                                    class: \"group relative aspect-square overflow-hidden rounded-xl border border-slate-700/50 bg-slate-950/40 text-left transition-all hover:border-purple-500/40 hover:bg-slate-900/60\",\n                                    onClick: ($event) => (open(idx))\n                                }, [\n                                    (slot.kind === 'image')\n                                        ? (_openBlock(), _createElementBlock(\"img\", {\n                                            key: 0,\n                                            src: slot.src,\n                                            alt: slot.label,\n                                            class: \"h-full w-full object-cover transition-transform duration-500 group-hover:scale-110\",\n                                            onError: ($event) => (onImgError(slot.key))\n                                        }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_6))\n                                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n                                            _createElementVNode(\"div\", _hoisted_8, [\n                                                _createElementVNode(\"i\", {\n                                                    class: _normalizeClass(slot.kind === 'text' ? 'fas fa-file-alt' : 'fas fa-image')\n                                                }, null, 2 /* CLASS */)\n                                            ]),\n                                            _createElementVNode(\"div\", _hoisted_9, _toDisplayString(slot.label), 1 /* TEXT */),\n                                            _createElementVNode(\"div\", _hoisted_10, _toDisplayString(slot.kind === 'text' ? slot.text : ''), 1 /* TEXT */)\n                                        ])),\n                                    _cache[4] || (_cache[4] = _createElementVNode(\"div\", { class: \"pointer-events-none absolute inset-0 bg-gradient-to-t from-black/70 to-transparent opacity-0 transition-opacity duration-300 group-hover:opacity-100\" }, null, -1 /* CACHED */)),\n                                    _cache[5] || (_cache[5] = _createElementVNode(\"div\", { class: \"pointer-events-none absolute bottom-2 left-2 flex items-center gap-1 text-xs text-white/90 opacity-0 transition-opacity duration-300 group-hover:opacity-100\" }, [\n                                        _createElementVNode(\"i\", { class: \"fas fa-search-plus\" }),\n                                        _createTextVNode(\"  \")\n                                    ], -1 /* CACHED */))\n                                ], 8 /* PROPS */, _hoisted_5));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ]),\n                        _createElementVNode(\"button\", {\n                            class: \"mt-4 w-full rounded-xl border border-purple-500/20 bg-gradient-to-r from-purple-500/10 to-pink-500/10 py-2 text-sm text-purple-300 transition-all duration-300 hover:from-purple-500/20 hover:to-pink-500/20\",\n                            onClick: _cache[0] || (_cache[0] = ($event) => (open(0)))\n                        }, \"  \")\n                    ]))\n                    : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                        _createCommentVNode(\" Stage variant: full-bleed image area \"),\n                        _createElementVNode(\"div\", _hoisted_11, [\n                            _createCommentVNode(\" Background ambience \"),\n                            _cache[8] || (_cache[8] = _createElementVNode(\"div\", { class: \"absolute inset-0 bg-gradient-to-br from-blue-600/10 via-purple-600/10 to-orange-600/10\" }, null, -1 /* CACHED */)),\n                            _cache[9] || (_cache[9] = _createElementVNode(\"div\", { class: \"absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,rgba(59,130,246,0.22),transparent_55%),radial-gradient(circle_at_80%_30%,rgba(168,85,247,0.16),transparent_55%),radial-gradient(circle_at_50%_90%,rgba(249,115,22,0.10),transparent_60%)]\" }, null, -1 /* CACHED */)),\n                            _cache[10] || (_cache[10] = _createElementVNode(\"div\", { class: \"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent\" }, null, -1 /* CACHED */)),\n                            _createCommentVNode(\" 3-slot previews (leave bottom space for PLAY HUD overlay) \"),\n                            _createElementVNode(\"div\", _hoisted_12, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(slots.value, (slot, idx) => {\n                                    return (_openBlock(), _createElementBlock(\"button\", {\n                                        key: slot.key,\n                                        class: \"group relative min-h-0 overflow-hidden rounded-2xl border border-slate-700/50 bg-slate-950/40 transition-all hover:border-blue-500/30 hover:bg-slate-900/60\",\n                                        onClick: ($event) => (open(idx))\n                                    }, [\n                                        (slot.kind === 'image')\n                                            ? (_openBlock(), _createElementBlock(\"img\", {\n                                                key: 0,\n                                                src: slot.src,\n                                                alt: slot.label,\n                                                class: \"h-full w-full object-cover transition-transform duration-500 group-hover:scale-105\",\n                                                onError: ($event) => (onImgError(slot.key))\n                                            }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_14))\n                                            : (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [\n                                                _createElementVNode(\"div\", _hoisted_16, [\n                                                    _createElementVNode(\"i\", {\n                                                        class: _normalizeClass(slot.kind === 'text' ? 'fas fa-file-alt' : 'fas fa-image')\n                                                    }, null, 2 /* CLASS */)\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_17, _toDisplayString(slot.label), 1 /* TEXT */),\n                                                _createElementVNode(\"div\", _hoisted_18, _toDisplayString(slot.kind === 'text' ? slot.text : ''), 1 /* TEXT */)\n                                            ])),\n                                        _cache[6] || (_cache[6] = _createElementVNode(\"div\", { class: \"pointer-events-none absolute inset-0 bg-gradient-to-t from-black/70 to-transparent opacity-0 transition-opacity duration-300 group-hover:opacity-100\" }, null, -1 /* CACHED */)),\n                                        _cache[7] || (_cache[7] = _createElementVNode(\"div\", { class: \"pointer-events-none absolute bottom-2 left-2 flex items-center gap-1 text-xs text-white/90 opacity-0 transition-opacity duration-300 group-hover:opacity-100\" }, [\n                                            _createElementVNode(\"i\", { class: \"fas fa-search-plus\" }),\n                                            _createTextVNode(\"  \")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_19, _toDisplayString(slot.label), 1 /* TEXT */)\n                                    ], 8 /* PROPS */, _hoisted_13));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ])\n                        ])\n                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */)),\n                _createCommentVNode(\" Lightbox \"),\n                (lightboxOpen.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 2,\n                        class: \"fixed inset-0 z-[4800] flex items-center justify-center bg-black/75 p-4\",\n                        onClick: _withModifiers(close, [\"self\"])\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_20, [\n                            _createElementVNode(\"div\", _hoisted_21, [\n                                _createElementVNode(\"div\", _hoisted_22, [\n                                    _createElementVNode(\"div\", _hoisted_23, _toDisplayString(title.value), 1 /* TEXT */),\n                                    _createElementVNode(\"div\", _hoisted_24, _toDisplayString(subtitle.value), 1 /* TEXT */)\n                                ]),\n                                _createElementVNode(\"div\", { class: \"flex items-center gap-2\" }, [\n                                    _createElementVNode(\"button\", {\n                                        class: \"rounded-xl border border-slate-700/50 bg-slate-900/50 px-3 py-2 text-sm text-slate-200 hover:border-blue-500/30 hover:bg-slate-800/60\",\n                                        onClick: copyActive\n                                    }, [...(_cache[11] || (_cache[11] = [\n                                            _createElementVNode(\"i\", { class: \"fas fa-copy\" }, null, -1 /* CACHED */),\n                                            _createElementVNode(\"span\", { class: \"ml-2\" }, \"\", -1 /* CACHED */)\n                                        ]))]),\n                                    _createElementVNode(\"button\", {\n                                        class: \"rounded-xl border border-slate-700/50 bg-slate-900/50 px-3 py-2 text-sm text-slate-200 hover:border-blue-500/30 hover:bg-slate-800/60\",\n                                        onClick: close\n                                    }, [...(_cache[12] || (_cache[12] = [\n                                            _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */),\n                                            _createElementVNode(\"span\", { class: \"ml-2\" }, \"\", -1 /* CACHED */)\n                                        ]))])\n                                ])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_25, [\n                                (active.value.kind === 'image')\n                                    ? (_openBlock(), _createElementBlock(\"img\", {\n                                        key: 0,\n                                        src: active.value.src,\n                                        alt: \"Full Image\",\n                                        class: \"max-h-[82vh] w-auto max-w-[92vw] object-contain\",\n                                        onError: _cache[1] || (_cache[1] = ($event) => (onImgError(active.value.key)))\n                                    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_26))\n                                    : (_openBlock(), _createElementBlock(\"div\", _hoisted_27, [\n                                        _createElementVNode(\"div\", _hoisted_28, [\n                                            _cache[13] || (_cache[13] = _createElementVNode(\"div\", { class: \"mb-2 text-[11px] text-slate-500\" }, \" URL/\", -1 /* CACHED */)),\n                                            _createElementVNode(\"pre\", _hoisted_29, _toDisplayString(active.value.kind === 'text' ? active.value.text : ''), 1 /* TEXT */)\n                                        ]),\n                                        (copiedHint.value)\n                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_30, _toDisplayString(copiedHint.value), 1 /* TEXT */))\n                                            : _createCommentVNode(\"v-if\", true)\n                                    ]))\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_31, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(slots.value, (slot, idx) => {\n                                    return (_openBlock(), _createElementBlock(\"button\", {\n                                        key: slot.key,\n                                        class: _normalizeClass([\"group relative h-14 w-14 overflow-hidden rounded-xl border bg-slate-950/40 transition-all\",\n                                            idx === activeIndex.value\n                                                ? 'border-blue-500/60 shadow-lg shadow-blue-500/20'\n                                                : 'border-slate-700/50 hover:border-blue-500/30'\n                                        ]),\n                                        onClick: ($event) => (setActive(idx)),\n                                        title: slot.label\n                                    }, [\n                                        (slot.kind === 'image')\n                                            ? (_openBlock(), _createElementBlock(\"img\", {\n                                                key: 0,\n                                                src: slot.src,\n                                                alt: slot.label,\n                                                class: \"h-full w-full object-cover\",\n                                                onError: ($event) => (onImgError(slot.key))\n                                            }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_33))\n                                            : (_openBlock(), _createElementBlock(\"div\", _hoisted_34, [\n                                                _createElementVNode(\"i\", {\n                                                    class: _normalizeClass(slot.kind === 'text' ? 'fas fa-file-alt text-purple-300' : 'fas fa-image text-slate-500')\n                                                }, null, 2 /* CLASS */)\n                                            ])),\n                                        _cache[14] || (_cache[14] = _createElementVNode(\"div\", { class: \"pointer-events-none absolute inset-0 bg-gradient-to-t from-black/70 to-transparent opacity-0 transition-opacity group-hover:opacity-100\" }, null, -1 /* CACHED */))\n                                    ], 10 /* CLASS, PROPS */, _hoisted_32));\n                                }), 128 /* KEYED_FRAGMENT */)),\n                                _createElementVNode(\"div\", _hoisted_35, _toDisplayString(active.value.label), 1 /* TEXT */)\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true)\n            ], 64 /* STABLE_FRAGMENT */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./PackageImageGallery.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PackageImageGallery.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, unref as _unref, vModelText as _vModelText, withModifiers as _withModifiers, withKeys as _withKeys, withDirectives as _withDirectives, normalizeStyle as _normalizeStyle } from \"vue\";\nconst _hoisted_1 = { class: \"relative flex h-full min-h-0 flex-col overflow-hidden rounded-3xl border border-blue-500/20 bg-gradient-to-br from-slate-900/75 to-black/60 shadow-2xl shadow-blue-500/10 backdrop-blur-xl\" };\nconst _hoisted_2 = { class: \"shrink-0 border-b border-blue-500/10 p-3 sm:p-4\" };\nconst _hoisted_3 = { class: \"flex items-start justify-between gap-3\" };\nconst _hoisted_4 = { class: \"min-w-0\" };\nconst _hoisted_5 = { class: \"flex items-center gap-2 text-xs text-slate-300/90\" };\nconst _hoisted_6 = { class: \"truncate text-slate-400\" };\nconst _hoisted_7 = { class: \"mt-2 truncate text-base font-bold text-white\" };\nconst _hoisted_8 = { class: \"mt-0.5 truncate text-xs text-slate-400\" };\nconst _hoisted_9 = { class: \"flex shrink-0 items-center gap-2\" };\nconst _hoisted_10 = { class: \"ml-2 hidden sm:inline\" };\nconst _hoisted_11 = {\n    key: 0,\n    class: \"relative shrink-0 border-b border-blue-500/10\"\n};\nconst _hoisted_12 = { class: \"relative aspect-[21/9] w-full overflow-hidden\" };\nconst _hoisted_13 = { class: \"grid min-h-0 flex-1 grid-cols-1 gap-4 p-4 lg:grid-cols-[minmax(0,1fr)_18rem]\" };\nconst _hoisted_14 = { class: \"min-h-0 overflow-hidden rounded-2xl border border-slate-700/50 bg-slate-950/60\" };\nconst _hoisted_15 = { class: \"flex items-center justify-between border-b border-slate-800/60 px-4 py-3\" };\nconst _hoisted_16 = [\"disabled\"];\nconst _hoisted_17 = { class: \"whitespace-pre-wrap\" };\nconst _hoisted_18 = {\n    key: 0,\n    class: \"animate-pulse\"\n};\nconst _hoisted_19 = { class: \"hidden min-h-0 flex-col gap-3 lg:flex\" };\nconst _hoisted_20 = { class: \"rounded-2xl border border-slate-700/50 bg-slate-900/50 p-4\" };\nconst _hoisted_21 = { class: \"flex flex-col gap-2\" };\nconst _hoisted_22 = [\"onClick\"];\nconst _hoisted_23 = { class: \"truncate\" };\nconst _hoisted_24 = { class: \"flex items-center gap-2\" };\nconst _hoisted_25 = { class: \"flex-1\" };\nconst _hoisted_26 = [\"onKeydown\"];\nconst _hoisted_27 = [\"disabled\"];\nimport { computed, nextTick, onMounted, onUnmounted, ref, watch } from 'vue';\nimport PackageImageGallery from './PackageImageGallery.vue';\nimport { getNestedValue } from '../utils';\nimport { selectedPackage } from '../shared/selectedPackage';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Play',\n    setup(__props) {\n        const streamContent = ref('');\n        const isStreaming = ref(false);\n        const inputEl = ref(null);\n        const userInput = ref('');\n        const showScene = ref(false);\n        const logScrollEl = ref(null);\n        const headerTitle = ref('');\n        const headerSubTitle = ref('  /');\n        const headerHint = ref('');\n        const safeAreaBottom = (() => {\n            try {\n                return `max(16px, env(safe-area-inset-bottom))`;\n            }\n            catch {\n                return '16px';\n            }\n        })();\n        const selectedInfo = computed(() => {\n            const pkg = selectedPackage.value;\n            if (!pkg)\n                return '';\n            const shop = pkg.shop_name ? `  ${pkg.shop_name}` : '';\n            const name = pkg.name || '';\n            return `${name}${shop}`;\n        });\n        const quickActions = [\n            { label: ' + ', command: '' },\n            { label: '', command: '/home' },\n            { label: '', command: '/discover' },\n        ];\n        function scrollToBottom() {\n            const el = logScrollEl.value;\n            if (!el)\n                return;\n            el.scrollTop = el.scrollHeight;\n        }\n        watch(() => streamContent.value, () => {\n            nextTick(() => scrollToBottom());\n        });\n        function appendLogBlock(text) {\n            if (!text)\n                return;\n            const prefix = streamContent.value ? '\\n\\n' : '';\n            streamContent.value += `${prefix}${text}`;\n        }\n        function clearLog() {\n            streamContent.value = '';\n            isStreaming.value = false;\n        }\n        function pickQuickAction(command) {\n            userInput.value = command;\n            nextTick(() => inputEl.value?.focus());\n        }\n        function tryTriggerSlash(command) {\n            const fn = window?.triggerSlash;\n            if (typeof fn !== 'function')\n                return false;\n            try {\n                fn(command);\n                return true;\n            }\n            catch (e) {\n                console.error('[Play] triggerSlash failed:', e);\n                return false;\n            }\n        }\n        function send() {\n            const raw = userInput.value.trim();\n            if (!raw)\n                return;\n            userInput.value = '';\n            appendLogBlock(`> ${raw}`);\n            const cmd = raw.startsWith('/') ? `${raw} | /trigger await=true` : `/send ${raw} | /trigger await=true`;\n            const ok = tryTriggerSlash(cmd);\n            if (!ok)\n                appendLogBlock('[]  triggerSlash');\n            nextTick(() => inputEl.value?.focus());\n        }\n        function toggleScene() {\n            showScene.value = !showScene.value;\n        }\n        function refreshHeaderFromMvu() {\n            try {\n                const getSnapshot = () => {\n                    try {\n                        const message_id = typeof window.getCurrentMessageId === 'function' ? window.getCurrentMessageId() : 'latest';\n                        if (typeof window.waitGlobalInitialized === 'function') {\n                            try {\n                                window.waitGlobalInitialized('Mvu');\n                            }\n                            catch {\n                                // ignore\n                            }\n                        }\n                        if (typeof window.Mvu !== 'undefined' && window.Mvu?.getMvuData) {\n                            return window.Mvu.getMvuData({ type: 'message', message_id });\n                        }\n                        if (typeof window.getVariables === 'function') {\n                            return window.getVariables({ type: 'message', message_id });\n                        }\n                        return null;\n                    }\n                    catch {\n                        return null;\n                    }\n                };\n                const snap = getSnapshot();\n                const stat = snap?.stat_data || snap || {};\n                const scene = getNestedValue(stat, '.', '') || getNestedValue(stat, '.', '');\n                headerTitle.value = scene ? `${scene}` : '';\n                headerSubTitle.value = selectedInfo.value\n                    ? `${selectedInfo.value}`\n                    : '  /';\n            }\n            catch {\n                // ignore\n            }\n        }\n        function initFromChat() {\n            try {\n                if (typeof window.getChatMessages !== 'function')\n                    return false;\n                const all = window.getChatMessages('0-{{lastMessageId}}') || [];\n                const last = all.slice(-18);\n                const text = last\n                    .map((m) => {\n                    const role = m?.role || 'unknown';\n                    const name = m?.name ? `${m.name}` : role;\n                    const msg = String(m?.message ?? '').trim();\n                    if (!msg)\n                        return '';\n                    return `[${name}] ${msg}`;\n                })\n                    .filter(Boolean)\n                    .join('\\n\\n');\n                if (!text)\n                    return false;\n                streamContent.value = text;\n                return true;\n            }\n            catch {\n                return false;\n            }\n        }\n        let stopStreamHint = null;\n        let stopMessageReceive = null;\n        onMounted(() => {\n            refreshHeaderFromMvu();\n            const ok = initFromChat();\n            if (!ok) {\n                streamContent.value =\n                    'System initialized.\\n\\n\\n /send ';\n            }\n            try {\n                const canListen = typeof window.eventOn === 'function' && typeof window.tavern_events !== 'undefined';\n                if (canListen) {\n                    //  token MESSAGE_RECEIVED \n                    stopStreamHint = window.eventOn(window.tavern_events.STREAM_TOKEN_RECEIVED, () => {\n                        isStreaming.value = true;\n                    });\n                    stopMessageReceive = window.eventOn(window.tavern_events.MESSAGE_RECEIVED, (message_id) => {\n                        try {\n                            if (typeof window.getChatMessages !== 'function')\n                                return;\n                            const msg = window.getChatMessages(message_id)?.[0];\n                            if (!msg)\n                                return;\n                            const role = msg.role || 'assistant';\n                            const name = msg.name || role;\n                            const body = String(msg.message ?? '').trim();\n                            if (!body)\n                                return;\n                            appendLogBlock(`[${name}] ${body}`);\n                        }\n                        finally {\n                            isStreaming.value = false;\n                            refreshHeaderFromMvu();\n                        }\n                    });\n                }\n            }\n            catch {\n                // ignore\n            }\n            nextTick(() => inputEl.value?.focus());\n        });\n        onUnmounted(() => {\n            stopStreamHint?.stop?.();\n            stopMessageReceive?.stop?.();\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" Header () \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _createElementVNode(\"div\", _hoisted_4, [\n                            _createElementVNode(\"div\", _hoisted_5, [\n                                _cache[1] || (_cache[1] = _createElementVNode(\"span\", { class: \"inline-flex items-center gap-2 rounded-full border border-slate-700/50 bg-slate-900/40 px-3 py-1\" }, [\n                                    _createElementVNode(\"span\", { class: \"h-2 w-2 animate-pulse rounded-full bg-green-400\" }),\n                                    _createElementVNode(\"span\", null, \"LIVE\")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"span\", _hoisted_6, _toDisplayString(headerHint.value), 1 /* TEXT */)\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_7, _toDisplayString(headerTitle.value), 1 /* TEXT */),\n                            _createElementVNode(\"div\", _hoisted_8, _toDisplayString(headerSubTitle.value), 1 /* TEXT */)\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_9, [\n                            _createElementVNode(\"button\", {\n                                class: \"rounded-xl border border-slate-700/50 bg-slate-900/40 px-3 py-2 text-xs text-slate-200 hover:border-blue-500/30 hover:bg-slate-800/60\",\n                                onClick: toggleScene\n                            }, [\n                                _cache[2] || (_cache[2] = _createElementVNode(\"i\", { class: \"fas fa-image\" }, null, -1 /* CACHED */)),\n                                _createElementVNode(\"span\", _hoisted_10, _toDisplayString(showScene.value ? '' : ''), 1 /* TEXT */)\n                            ])\n                        ])\n                    ])\n                ]),\n                (showScene.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [\n                        _createElementVNode(\"div\", _hoisted_12, [\n                            _createVNode(PackageImageGallery, { variant: \"stage\" })\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\" Content \"),\n                _createElementVNode(\"div\", _hoisted_13, [\n                    _createCommentVNode(\" Narrative / Log \"),\n                    _createElementVNode(\"section\", _hoisted_14, [\n                        _createElementVNode(\"div\", _hoisted_15, [\n                            _cache[4] || (_cache[4] = _createElementVNode(\"div\", { class: \"flex items-center gap-2 text-sm font-bold text-slate-200\" }, [\n                                _createElementVNode(\"i\", { class: \"fas fa-scroll text-blue-300\" }),\n                                _createTextVNode(\"  \")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"button\", {\n                                class: \"rounded-lg border border-slate-700/50 bg-slate-900/50 px-2 py-1 text-xs text-slate-300 hover:border-blue-500/30 hover:bg-slate-800/60\",\n                                onClick: clearLog,\n                                disabled: isStreaming.value\n                            }, [...(_cache[3] || (_cache[3] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-eraser\" }, null, -1 /* CACHED */),\n                                    _createElementVNode(\"span\", { class: \"ml-1\" }, \"\", -1 /* CACHED */)\n                                ]))], 8 /* PROPS */, _hoisted_16)\n                        ]),\n                        _createElementVNode(\"div\", {\n                            ref_key: \"logScrollEl\",\n                            ref: logScrollEl,\n                            class: \"scrollbar-thin scrollbar-thumb-slate-700 scrollbar-track-transparent h-full overflow-y-auto p-4 font-mono text-[13px] leading-relaxed text-green-300\"\n                        }, [\n                            _createElementVNode(\"pre\", _hoisted_17, [\n                                _createTextVNode(_toDisplayString(streamContent.value), 1 /* TEXT */),\n                                (isStreaming.value)\n                                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_18, \"_\"))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ])\n                        ], 512 /* NEED_PATCH */)\n                    ]),\n                    _createCommentVNode(\" Quick Actions \"),\n                    _createElementVNode(\"aside\", _hoisted_19, [\n                        _createElementVNode(\"div\", _hoisted_20, [\n                            _cache[6] || (_cache[6] = _createElementVNode(\"div\", { class: \"mb-3 flex items-center gap-2 text-sm font-bold text-white\" }, [\n                                _createElementVNode(\"i\", { class: \"fas fa-bolt text-yellow-300\" }),\n                                _createTextVNode(\"  \")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_21, [\n                                (_openBlock(), _createElementBlock(_Fragment, null, _renderList(quickActions, (item) => {\n                                    return _createElementVNode(\"button\", {\n                                        key: item.label,\n                                        class: \"group flex items-center justify-between rounded-xl border border-slate-700/50 bg-slate-800/30 px-3 py-2 text-left text-sm text-slate-200 transition-all hover:border-blue-500/30 hover:bg-slate-800/60\",\n                                        onClick: ($event) => (pickQuickAction(item.command))\n                                    }, [\n                                        _createElementVNode(\"span\", _hoisted_23, _toDisplayString(item.label), 1 /* TEXT */),\n                                        _cache[5] || (_cache[5] = _createElementVNode(\"i\", { class: \"fas fa-chevron-right text-xs text-slate-500 transition-transform group-hover:translate-x-0.5\" }, null, -1 /* CACHED */))\n                                    ], 8 /* PROPS */, _hoisted_22);\n                                }), 64 /* STABLE_FRAGMENT */))\n                            ]),\n                            _cache[7] || (_cache[7] = _createElementVNode(\"div\", { class: \"mt-3 text-xs text-slate-500\" }, \" `triggerSlash`\", -1 /* CACHED */))\n                        ])\n                    ])\n                ]),\n                _createCommentVNode(\" Input Bar \"),\n                _createElementVNode(\"div\", {\n                    class: \"shrink-0 border-t border-slate-800/60 p-4\",\n                    style: _normalizeStyle({ paddingBottom: _unref(safeAreaBottom) })\n                }, [\n                    _createElementVNode(\"div\", _hoisted_24, [\n                        _createElementVNode(\"div\", _hoisted_25, [\n                            _withDirectives(_createElementVNode(\"input\", {\n                                ref_key: \"inputEl\",\n                                ref: inputEl,\n                                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((userInput).value = $event)),\n                                class: \"w-full rounded-2xl border border-slate-700/50 bg-slate-950/60 px-4 py-3 text-sm text-white placeholder-slate-500 focus:border-blue-500/40 focus:outline-none\",\n                                placeholder: \" /  /home  /send \",\n                                onKeydown: _withKeys(_withModifiers(send, [\"exact\", \"prevent\"]), [\"enter\"])\n                            }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_26), [\n                                [_vModelText, userInput.value]\n                            ])\n                        ]),\n                        _createElementVNode(\"button\", {\n                            class: \"flex items-center justify-center rounded-2xl border border-blue-400/30 bg-gradient-to-r from-blue-500 to-violet-600 px-4 py-3 text-sm font-bold text-white shadow-lg shadow-blue-500/25 hover:from-blue-600 hover:to-violet-700 disabled:opacity-50\",\n                            disabled: !userInput.value.trim(),\n                            onClick: send\n                        }, [...(_cache[8] || (_cache[8] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-paper-plane\" }, null, -1 /* CACHED */),\n                                _createElementVNode(\"span\", { class: \"ml-2 hidden sm:inline\" }, \"\", -1 /* CACHED */)\n                            ]))], 8 /* PROPS */, _hoisted_27)\n                    ])\n                ], 4 /* STYLE */)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./Play.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Play.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { ref } from 'vue';\n\nexport const historyOverlayOpen = ref(false);\n\n// /play //\nexport const playPanelsOpen = ref(false);\n","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n    key: 0,\n    class: \"fixed inset-0 z-[5000] flex items-center justify-center bg-black/60 p-4\"\n};\nconst _hoisted_2 = { class: \"relative flex h-[85vh] w-full max-w-3xl flex-col overflow-hidden rounded-2xl border border-blue-500/20 bg-gradient-to-br from-slate-900/90 to-black/80 shadow-2xl shadow-blue-500/10 backdrop-blur-xl\" };\nconst _hoisted_3 = { class: \"flex items-center gap-3 border-b border-slate-700/50 px-5 py-4\" };\nconst _hoisted_4 = [\"disabled\"];\nconst _hoisted_5 = { class: \"min-h-0 flex-1 overflow-y-auto p-5\" };\nconst _hoisted_6 = {\n    key: 0,\n    class: \"flex items-center justify-center py-12 text-slate-300\"\n};\nconst _hoisted_7 = {\n    key: 1,\n    class: \"py-12 text-center text-slate-400\"\n};\nconst _hoisted_8 = { class: \"mt-1 text-xs opacity-80\" };\nconst _hoisted_9 = {\n    key: 2,\n    class: \"space-y-3\"\n};\nconst _hoisted_10 = [\"onClick\"];\nconst _hoisted_11 = { class: \"flex items-start gap-3\" };\nconst _hoisted_12 = { class: \"min-w-0 flex-1\" };\nconst _hoisted_13 = { class: \"flex items-center justify-between gap-3\" };\nconst _hoisted_14 = { class: \"truncate text-sm font-bold text-white\" };\nconst _hoisted_15 = { class: \"shrink-0 text-sm font-bold text-yellow-300\" };\nconst _hoisted_16 = { class: \"mt-1 flex flex-wrap items-center gap-2 text-xs text-slate-400\" };\nconst _hoisted_17 = { class: \"rounded-full border border-slate-700/50 bg-slate-900/40 px-2 py-0.5\" };\nconst _hoisted_18 = { class: \"rounded-full border border-slate-700/50 bg-slate-900/40 px-2 py-0.5\" };\nconst _hoisted_19 = {\n    key: 0,\n    class: \"absolute inset-0 z-[5100] flex items-center justify-center bg-black/70 p-4\"\n};\nconst _hoisted_20 = { class: \"w-full max-w-xl overflow-hidden rounded-2xl border border-blue-500/20 bg-gradient-to-br from-slate-900/95 to-black/90 shadow-2xl shadow-blue-500/10\" };\nconst _hoisted_21 = { class: \"flex items-center gap-3 border-b border-slate-700/50 px-5 py-4\" };\nconst _hoisted_22 = { class: \"min-w-0 flex-1\" };\nconst _hoisted_23 = { class: \"text-xs text-slate-400\" };\nconst _hoisted_24 = { class: \"space-y-4 p-5\" };\nconst _hoisted_25 = { class: \"rounded-2xl border border-slate-700/50 bg-slate-800/30 p-4\" };\nconst _hoisted_26 = { class: \"flex items-start justify-between gap-3\" };\nconst _hoisted_27 = { class: \"min-w-0\" };\nconst _hoisted_28 = { class: \"truncate text-sm font-bold text-white\" };\nconst _hoisted_29 = { class: \"mt-1 text-xs text-slate-400\" };\nconst _hoisted_30 = { class: \"shrink-0 text-sm font-bold text-yellow-300\" };\nconst _hoisted_31 = {\n    key: 0,\n    class: \"mt-3 flex flex-wrap gap-2\"\n};\nconst _hoisted_32 = { class: \"grid grid-cols-3 gap-3\" };\nconst _hoisted_33 = { class: \"rounded-2xl border border-slate-700/50 bg-slate-800/30 p-3\" };\nconst _hoisted_34 = { class: \"mt-1 text-sm font-bold text-white\" };\nconst _hoisted_35 = { class: \"rounded-2xl border border-slate-700/50 bg-slate-800/30 p-3\" };\nconst _hoisted_36 = { class: \"mt-1 text-sm font-bold text-white\" };\nconst _hoisted_37 = { class: \"rounded-2xl border border-slate-700/50 bg-slate-800/30 p-3\" };\nconst _hoisted_38 = { class: \"mt-1 text-sm font-bold text-white\" };\nconst _hoisted_39 = { class: \"w-full max-w-xl overflow-hidden rounded-2xl border border-blue-500/20 bg-gradient-to-br from-slate-900/95 to-black/90 shadow-2xl shadow-blue-500/10\" };\nconst _hoisted_40 = { class: \"space-y-4 p-5\" };\nconst _hoisted_41 = {\n    key: 0,\n    class: \"flex flex-wrap gap-2\"\n};\nconst _hoisted_42 = [\"onClick\"];\nconst _hoisted_43 = {\n    key: 1,\n    class: \"text-xs text-slate-400\"\n};\nimport { computed, nextTick, onMounted, ref, watch } from 'vue';\nimport { historyOverlayOpen } from '../shared/uiState';\nimport { filterCompletedOrders, loadOrdersFromMVU, readCachedOrders } from '../shared/serviceOrders';\nimport { getNestedValue } from '../utils';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'HistoryOverlay',\n    setup(__props) {\n        const loading = ref(false);\n        const errorMessage = ref('');\n        const historyItems = ref([]);\n        const selectedOrder = ref(null);\n        const currentView = ref('list');\n        const showRemarkModal = ref(false);\n        const orderRemark = ref('');\n        const remarkTextarea = ref(null);\n        const copiedHint = ref('');\n        function closeAll() {\n            historyOverlayOpen.value = false;\n            selectedOrder.value = null;\n            currentView.value = 'list';\n            showRemarkModal.value = false;\n            orderRemark.value = '';\n            copiedHint.value = '';\n        }\n        function backToList() {\n            selectedOrder.value = null;\n            currentView.value = 'list';\n            showRemarkModal.value = false;\n            orderRemark.value = '';\n            copiedHint.value = '';\n        }\n        function formatPregnancyChance(value) {\n            if (value === null || value === undefined)\n                return '-';\n            if (typeof value === 'string' && value.includes('%'))\n                return value;\n            const num = Number(value);\n            if (!Number.isFinite(num))\n                return '-';\n            const clamped = Math.min(100, Math.max(0, num));\n            return `${Math.round(clamped * 100) / 100}%`;\n        }\n        function extractOrderFeatures(order) {\n            if (!order || typeof order !== 'object')\n                return [];\n            const features = new Set();\n            const pushFeature = (value) => {\n                if (typeof value !== 'string')\n                    return;\n                const trimmed = value.trim();\n                if (!trimmed)\n                    return;\n                if (['', '', '--'].includes(trimmed))\n                    return;\n                features.add(trimmed);\n            };\n            const pushFeatureArray = (list) => {\n                if (!Array.isArray(list))\n                    return;\n                list.forEach(pushFeature);\n            };\n            pushFeature(order['']);\n            if (order['']) {\n                pushFeature(order['']['']);\n                pushFeatureArray(order['']['']);\n                pushFeature(order['']['']);\n            }\n            const clothingSources = [order[''], order['']?.['']];\n            clothingSources.forEach(source => {\n                if (source && typeof source === 'object') {\n                    Object.values(source).forEach(pushFeature);\n                }\n            });\n            return Array.from(features);\n        }\n        const currentOrderFeatures = computed(() => {\n            if (!selectedOrder.value)\n                return [];\n            const raw = selectedOrder.value.features || extractOrderFeatures(selectedOrder.value.originalData);\n            const list = Array.isArray(raw) ? raw : typeof raw === 'string' ? raw.split(/\\s*,\\s*|\\s+/).filter(Boolean) : [];\n            return list;\n        });\n        function openReorder(item) {\n            if (!item || typeof item !== 'object')\n                return;\n            selectedOrder.value = item;\n            currentView.value = 'reorder';\n        }\n        function openRemarkModal() {\n            if (!selectedOrder.value)\n                return;\n            copiedHint.value = '';\n            showRemarkModal.value = true;\n            nextTick(() => remarkTextarea.value?.focus());\n        }\n        function closeRemarkModal() {\n            showRemarkModal.value = false;\n            orderRemark.value = '';\n        }\n        function addFeatureToRemark(feature) {\n            if (!feature)\n                return;\n            const next = orderRemark.value ? `${orderRemark.value} ${feature}` : feature;\n            orderRemark.value = next;\n            nextTick(() => remarkTextarea.value?.focus());\n        }\n        function sendToAI(message) {\n            const fullCommand = `${message} | /trigger await=true`;\n            if (typeof window.triggerSlash !== 'undefined') {\n                try {\n                    window.triggerSlash(fullCommand);\n                    return true;\n                }\n                catch (e) {\n                    console.error('[HistoryOverlay]  triggerSlash :', e);\n                    return false;\n                }\n            }\n            return false;\n        }\n        async function copyToClipboard(text) {\n            try {\n                await navigator.clipboard.writeText(text);\n                return true;\n            }\n            catch {\n                // \n                try {\n                    const ta = document.createElement('textarea');\n                    ta.value = text;\n                    ta.style.position = 'fixed';\n                    ta.style.left = '-9999px';\n                    document.body.appendChild(ta);\n                    ta.select();\n                    const ok = document.execCommand('copy');\n                    document.body.removeChild(ta);\n                    return ok;\n                }\n                catch {\n                    return false;\n                }\n            }\n        }\n        async function confirmOrder() {\n            if (!selectedOrder.value)\n                return;\n            const pkg = selectedOrder.value.package_name || '';\n            const girl = selectedOrder.value.girl_name || '';\n            const identity = selectedOrder.value.identity || '';\n            const age = getNestedValue(selectedOrder.value?.originalData, '.', '-');\n            const originPrice = selectedOrder.value.price;\n            const finalPrice = originPrice ?? '-';\n            const remark = orderRemark.value.trim() || '';\n            const text = `${girl}${age}${identity}${pkg}${finalPrice}${remark}`;\n            const cmd = `/send ${text}`;\n            const ok = sendToAI(cmd);\n            if (!ok) {\n                const copied = await copyToClipboard(`${cmd} | /trigger await=true`);\n                copiedHint.value = copied\n                    ? ' triggerSlash'\n                    : ' triggerSlash';\n            }\n            else {\n                copiedHint.value = '';\n            }\n            closeRemarkModal();\n            backToList();\n        }\n        async function refreshHistory() {\n            loading.value = true;\n            errorMessage.value = '';\n            try {\n                const orders = await loadOrdersFromMVU();\n                const completed = filterCompletedOrders(orders);\n                historyItems.value = completed.map(order => ({\n                    id: order.id,\n                    girl_name: order.?. || '',\n                    identity: order.?. || '',\n                    package_name: order.?. || '',\n                    order_time: '',\n                    order_status: order.status || '',\n                    price: order.?. || order.?. || 0,\n                    features: extractOrderFeatures(order.originalData),\n                    originalData: order.originalData,\n                }));\n            }\n            catch (e) {\n                console.error('[HistoryOverlay] :', e);\n                errorMessage.value = e?.message || '';\n                const cached = readCachedOrders();\n                const completed = filterCompletedOrders(cached);\n                historyItems.value = completed.map(order => ({\n                    id: order.id,\n                    girl_name: order.?. || '',\n                    identity: order.?. || '',\n                    package_name: order.?. || '',\n                    order_time: '',\n                    order_status: order.status || '',\n                    price: order.?. || order.?. || 0,\n                    features: extractOrderFeatures(order.originalData),\n                    originalData: order.originalData,\n                }));\n            }\n            finally {\n                loading.value = false;\n            }\n        }\n        watch(() => historyOverlayOpen.value, async (open) => {\n            if (open)\n                await refreshHistory();\n        });\n        onMounted(() => {\n            // \n            refreshHistory().catch(() => { });\n        });\n        return (_ctx, _cache) => {\n            return (_unref(historyOverlayOpen))\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                    _createElementVNode(\"div\", _hoisted_2, [\n                        _createElementVNode(\"div\", _hoisted_3, [\n                            _cache[3] || (_cache[3] = _createStaticVNode(\"<div class=\\\"flex h-9 w-9 items-center justify-center rounded-xl bg-blue-500/10 text-blue-400\\\"><i class=\\\"fas fa-history\\\"></i></div><div class=\\\"min-w-0 flex-1\\\"><div class=\\\"truncate text-base font-bold text-white\\\"></div><div class=\\\"text-xs text-slate-400\\\"> MVU/</div></div>\", 2)),\n                            _createElementVNode(\"button\", {\n                                class: \"rounded-xl border border-slate-700/50 bg-slate-800/50 px-3 py-2 text-sm text-slate-200 hover:border-blue-500/30 hover:bg-slate-700/50\",\n                                disabled: loading.value,\n                                onClick: refreshHistory\n                            }, [\n                                _createElementVNode(\"i\", {\n                                    class: _normalizeClass([\"fas fa-sync-alt\", { 'fa-spin': loading.value }])\n                                }, null, 2 /* CLASS */),\n                                _cache[1] || (_cache[1] = _createElementVNode(\"span\", { class: \"ml-2\" }, \"\", -1 /* CACHED */))\n                            ], 8 /* PROPS */, _hoisted_4),\n                            _createElementVNode(\"button\", {\n                                class: \"rounded-xl border border-slate-700/50 bg-slate-800/50 px-3 py-2 text-sm text-slate-200 hover:border-blue-500/30 hover:bg-slate-700/50\",\n                                onClick: closeAll\n                            }, [...(_cache[2] || (_cache[2] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */),\n                                    _createElementVNode(\"span\", { class: \"ml-2\" }, \"\", -1 /* CACHED */)\n                                ]))])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_5, [\n                            (loading.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [...(_cache[4] || (_cache[4] = [\n                                        _createElementVNode(\"div\", { class: \"mr-3 h-5 w-5 animate-spin rounded-full border-2 border-slate-600 border-t-blue-400\" }, null, -1 /* CACHED */),\n                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                    ]))]))\n                                : (historyItems.value.length === 0)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n                                        _cache[5] || (_cache[5] = _createElementVNode(\"i\", { class: \"fas fa-inbox mb-3 text-3xl opacity-40\" }, null, -1 /* CACHED */)),\n                                        _cache[6] || (_cache[6] = _createElementVNode(\"div\", { class: \"text-sm\" }, \"\", -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_8, _toDisplayString(errorMessage.value || ' / MVU '), 1 /* TEXT */)\n                                    ]))\n                                    : (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(historyItems.value, (item, idx) => {\n                                            return (_openBlock(), _createElementBlock(\"button\", {\n                                                key: item.id ?? `${item.order_time ?? 'history'}_${idx}`,\n                                                class: \"group w-full rounded-2xl border border-slate-700/50 bg-slate-800/30 p-4 text-left transition-all hover:border-blue-500/40 hover:bg-slate-800/60\",\n                                                onClick: ($event) => (openReorder(item))\n                                            }, [\n                                                _createElementVNode(\"div\", _hoisted_11, [\n                                                    _cache[7] || (_cache[7] = _createElementVNode(\"div\", { class: \"mt-0.5 flex h-10 w-10 items-center justify-center rounded-xl bg-blue-500/10 text-blue-400\" }, [\n                                                        _createElementVNode(\"i\", { class: \"fas fa-receipt\" })\n                                                    ], -1 /* CACHED */)),\n                                                    _createElementVNode(\"div\", _hoisted_12, [\n                                                        _createElementVNode(\"div\", _hoisted_13, [\n                                                            _createElementVNode(\"div\", _hoisted_14, _toDisplayString(item.girl_name || '-') + \"  \" + _toDisplayString(item.identity || '-'), 1 /* TEXT */),\n                                                            _createElementVNode(\"div\", _hoisted_15, \"\" + _toDisplayString(item.price ?? '-'), 1 /* TEXT */)\n                                                        ]),\n                                                        _createElementVNode(\"div\", _hoisted_16, [\n                                                            _createElementVNode(\"span\", _hoisted_17, _toDisplayString(item.package_name || ''), 1 /* TEXT */),\n                                                            _createElementVNode(\"span\", _hoisted_18, _toDisplayString(item.order_status || ''), 1 /* TEXT */)\n                                                        ])\n                                                    ]),\n                                                    _cache[8] || (_cache[8] = _createElementVNode(\"div\", { class: \"shrink-0 text-xs text-slate-500 group-hover:text-slate-300\" }, [\n                                                        _createElementVNode(\"i\", { class: \"fas fa-chevron-right\" })\n                                                    ], -1 /* CACHED */))\n                                                ])\n                                            ], 8 /* PROPS */, _hoisted_10));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ]))\n                        ])\n                    ]),\n                    _createCommentVNode(\" Reorder modal \"),\n                    (currentView.value === 'reorder' && selectedOrder.value)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_19, [\n                            _createElementVNode(\"div\", _hoisted_20, [\n                                _createElementVNode(\"div\", _hoisted_21, [\n                                    _cache[11] || (_cache[11] = _createElementVNode(\"div\", { class: \"flex h-9 w-9 items-center justify-center rounded-xl bg-blue-500/10 text-blue-400\" }, [\n                                        _createElementVNode(\"i\", { class: \"fas fa-shopping-cart\" })\n                                    ], -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_22, [\n                                        _cache[9] || (_cache[9] = _createElementVNode(\"div\", { class: \"truncate text-base font-bold text-white\" }, \"\", -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_23, _toDisplayString(selectedOrder.value.package_name || ''), 1 /* TEXT */)\n                                    ]),\n                                    _createElementVNode(\"button\", {\n                                        class: \"rounded-xl border border-slate-700/50 bg-slate-800/50 px-3 py-2 text-sm text-slate-200 hover:border-blue-500/30 hover:bg-slate-700/50\",\n                                        onClick: backToList\n                                    }, [...(_cache[10] || (_cache[10] = [\n                                            _createElementVNode(\"i\", { class: \"fas fa-arrow-left\" }, null, -1 /* CACHED */),\n                                            _createElementVNode(\"span\", { class: \"ml-2\" }, \"\", -1 /* CACHED */)\n                                        ]))])\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_24, [\n                                    _createElementVNode(\"div\", _hoisted_25, [\n                                        _createElementVNode(\"div\", _hoisted_26, [\n                                            _createElementVNode(\"div\", _hoisted_27, [\n                                                _createElementVNode(\"div\", _hoisted_28, _toDisplayString(selectedOrder.value.girl_name || '-') + \"  \" + _toDisplayString(selectedOrder.value.identity || '-'), 1 /* TEXT */),\n                                                _createElementVNode(\"div\", _hoisted_29, _toDisplayString(selectedOrder.value.package_name || ''), 1 /* TEXT */)\n                                            ]),\n                                            _createElementVNode(\"div\", _hoisted_30, \"\" + _toDisplayString(selectedOrder.value.price ?? '-'), 1 /* TEXT */)\n                                        ]),\n                                        (currentOrderFeatures.value.length)\n                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_31, [\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(currentOrderFeatures.value.slice(0, 6), (tag) => {\n                                                    return (_openBlock(), _createElementBlock(\"span\", {\n                                                        key: tag,\n                                                        class: \"rounded-full border border-slate-700/50 bg-slate-900/40 px-2 py-0.5 text-xs text-slate-300\"\n                                                    }, _toDisplayString(tag), 1 /* TEXT */));\n                                                }), 128 /* KEYED_FRAGMENT */))\n                                            ]))\n                                            : _createCommentVNode(\"v-if\", true)\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_32, [\n                                        _createElementVNode(\"div\", _hoisted_33, [\n                                            _cache[12] || (_cache[12] = _createElementVNode(\"div\", { class: \"text-[11px] text-slate-400\" }, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"div\", _hoisted_34, _toDisplayString(_unref(getNestedValue)(selectedOrder.value?.originalData, '.', '-')), 1 /* TEXT */)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_35, [\n                                            _cache[13] || (_cache[13] = _createElementVNode(\"div\", { class: \"text-[11px] text-slate-400\" }, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"div\", _hoisted_36, _toDisplayString(formatPregnancyChance(_unref(getNestedValue)(selectedOrder.value?.originalData, '.', '-'))), 1 /* TEXT */)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_37, [\n                                            _cache[14] || (_cache[14] = _createElementVNode(\"div\", { class: \"text-[11px] text-slate-400\" }, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"div\", _hoisted_38, _toDisplayString(_unref(getNestedValue)(selectedOrder.value?.originalData, '.', '-')), 1 /* TEXT */)\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", { class: \"flex items-center justify-end gap-3 pt-1\" }, [\n                                        _createElementVNode(\"button\", {\n                                            class: \"rounded-xl border border-slate-700/50 bg-slate-800/50 px-4 py-2 text-sm text-slate-200 hover:border-blue-500/30 hover:bg-slate-700/50\",\n                                            onClick: backToList\n                                        }, \"  \"),\n                                        _createElementVNode(\"button\", {\n                                            class: \"rounded-xl border border-blue-400/30 bg-gradient-to-r from-blue-500 to-violet-600 px-4 py-2 text-sm font-bold text-white shadow-lg shadow-blue-500/20 hover:from-blue-600 hover:to-violet-700\",\n                                            onClick: openRemarkModal\n                                        }, \"  \")\n                                    ])\n                                ])\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true),\n                    _createCommentVNode(\" remark modal \"),\n                    (showRemarkModal.value)\n                        ? (_openBlock(), _createElementBlock(\"div\", {\n                            key: 1,\n                            class: \"absolute inset-0 z-[5200] flex items-center justify-center bg-black/70 p-4\",\n                            onClick: _withModifiers(closeRemarkModal, [\"self\"])\n                        }, [\n                            _createElementVNode(\"div\", _hoisted_39, [\n                                _createElementVNode(\"div\", { class: \"flex items-center justify-between gap-3 border-b border-slate-700/50 px-5 py-4\" }, [\n                                    _cache[16] || (_cache[16] = _createElementVNode(\"div\", { class: \"text-base font-bold text-white\" }, \"\", -1 /* CACHED */)),\n                                    _createElementVNode(\"button\", {\n                                        class: \"rounded-xl border border-slate-700/50 bg-slate-800/50 px-3 py-2 text-sm text-slate-200 hover:border-blue-500/30 hover:bg-slate-700/50\",\n                                        onClick: closeRemarkModal\n                                    }, [...(_cache[15] || (_cache[15] = [\n                                            _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */),\n                                            _createElementVNode(\"span\", { class: \"ml-2\" }, \"\", -1 /* CACHED */)\n                                        ]))])\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_40, [\n                                    (currentOrderFeatures.value.length)\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_41, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(currentOrderFeatures.value, (feature) => {\n                                                return (_openBlock(), _createElementBlock(\"button\", {\n                                                    key: feature,\n                                                    class: \"rounded-full border border-slate-700/50 bg-slate-900/40 px-3 py-1 text-xs text-slate-200 hover:border-blue-500/40 hover:bg-slate-800/60\",\n                                                    onClick: ($event) => (addFeatureToRemark(feature))\n                                                }, _toDisplayString(feature), 9 /* TEXT, PROPS */, _hoisted_42));\n                                            }), 128 /* KEYED_FRAGMENT */))\n                                        ]))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    _withDirectives(_createElementVNode(\"textarea\", {\n                                        ref_key: \"remarkTextarea\",\n                                        ref: remarkTextarea,\n                                        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((orderRemark).value = $event)),\n                                        class: \"h-28 w-full rounded-2xl border border-slate-700/50 bg-slate-950/40 px-4 py-3 text-sm text-white placeholder-slate-500 outline-none focus:border-blue-500/40\",\n                                        placeholder: \"...\"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelText, orderRemark.value]\n                                    ]),\n                                    _createElementVNode(\"div\", { class: \"flex items-center justify-end gap-3\" }, [\n                                        _createElementVNode(\"button\", {\n                                            class: \"rounded-xl border border-slate-700/50 bg-slate-800/50 px-4 py-2 text-sm text-slate-200 hover:border-blue-500/30 hover:bg-slate-700/50\",\n                                            onClick: closeRemarkModal\n                                        }, \"  \"),\n                                        _createElementVNode(\"button\", {\n                                            class: \"rounded-xl border border-blue-400/30 bg-gradient-to-r from-blue-500 to-violet-600 px-4 py-2 text-sm font-bold text-white shadow-lg shadow-blue-500/20 hover:from-blue-600 hover:to-violet-700\",\n                                            onClick: confirmOrder\n                                        }, \"  \")\n                                    ]),\n                                    (copiedHint.value)\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_43, [\n                                            _cache[17] || (_cache[17] = _createElementVNode(\"i\", { class: \"fas fa-info-circle text-blue-400\" }, null, -1 /* CACHED */)),\n                                            _createTextVNode(\" \" + _toDisplayString(copiedHint.value), 1 /* TEXT */)\n                                        ]))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ])\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./HistoryOverlay.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./HistoryOverlay.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, createTextVNode as _createTextVNode, vModelText as _vModelText, withDirectives as _withDirectives } from \"vue\";\nconst _hoisted_1 = { class: \"flex h-80 flex-col rounded-2xl border border-blue-500/20 bg-gradient-to-br from-slate-900/80 to-black/60 p-4 shadow-2xl shadow-blue-500/10 backdrop-blur-xl\" };\nconst _hoisted_2 = { class: \"scrollbar-thin scrollbar-thumb-slate-700 scrollbar-track-transparent flex-1 space-y-3 overflow-y-auto\" };\nconst _hoisted_3 = {\n    key: 0,\n    class: \"rounded-xl border border-slate-700/50 bg-slate-950/40 p-4 text-sm text-slate-400\"\n};\nconst _hoisted_4 = {\n    key: 1,\n    class: \"space-y-3\"\n};\nconst _hoisted_5 = { class: \"rounded-xl border border-slate-700/50 bg-slate-950/40 p-4\" };\nconst _hoisted_6 = { class: \"flex items-start justify-between gap-3\" };\nconst _hoisted_7 = { class: \"min-w-0\" };\nconst _hoisted_8 = { class: \"truncate text-base font-bold text-white\" };\nconst _hoisted_9 = { class: \"mt-1 truncate text-xs text-slate-500\" };\nconst _hoisted_10 = { class: \"shrink-0 text-right\" };\nconst _hoisted_11 = { class: \"text-lg font-bold text-yellow-300\" };\nconst _hoisted_12 = { class: \"text-xs text-slate-500\" };\nconst _hoisted_13 = {\n    key: 0,\n    class: \"mt-3 flex flex-wrap gap-2\"\n};\nconst _hoisted_14 = { class: \"rounded-xl border border-slate-700/50 bg-slate-950/40 p-4\" };\nconst _hoisted_15 = { class: \"text-sm leading-relaxed text-slate-300\" };\nconst _hoisted_16 = {\n    key: 0,\n    class: \"rounded-xl border border-slate-700/50 bg-slate-950/40 p-4\"\n};\nconst _hoisted_17 = { class: \"flex flex-wrap gap-2\" };\nconst _hoisted_18 = [\"onClick\"];\nconst _hoisted_19 = { class: \"mt-4 flex items-center space-x-2 border-t border-slate-700/50 pt-4\" };\nconst _hoisted_20 = [\"disabled\"];\nimport { computed, ref } from 'vue';\nimport { historyOverlayOpen } from '../shared/uiState';\nimport { selectedPackage } from '../shared/selectedPackage';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'PackageDetail',\n    setup(__props) {\n        function openHistory() {\n            historyOverlayOpen.value = true;\n        }\n        const remark = ref('');\n        const pkg = computed(() => selectedPackage.value);\n        const tags = computed(() => {\n            const raw = pkg.value?.tags;\n            if (Array.isArray(raw))\n                return raw.map(x => String(x)).filter(Boolean);\n            if (typeof raw === 'string')\n                return raw.split(/\\s*,\\s*|\\s+/).filter(Boolean);\n            return [];\n        });\n        const features = computed(() => {\n            const p = pkg.value;\n            //  MVU schema.ts  contentinitvar.yaml: ...\n            const raw = p?.content ?? p?. ?? p?.features;\n            if (Array.isArray(raw))\n                return raw.map(x => String(x)).filter(Boolean);\n            if (typeof raw === 'string')\n                return raw.split(/\\s*,\\s*|\\s+/).filter(Boolean);\n            return [];\n        });\n        const priceText = computed(() => {\n            const v = pkg.value?.price;\n            if (typeof v === 'number')\n                return String(v);\n            if (typeof v === 'string')\n                return v;\n            return '0';\n        });\n        const starsText = computed(() => {\n            const v = pkg.value?.stars;\n            const n = typeof v === 'number' ? v : Number.parseFloat(String(v ?? ''));\n            if (!Number.isFinite(n))\n                return '';\n            return `${n.toFixed(1)}`;\n        });\n        const descriptionText = computed(() => {\n            const v = pkg.value?.description;\n            const s = typeof v === 'string' ? v.trim() : '';\n            return s || '';\n        });\n        function tryTriggerSlash(command) {\n            const fn = window?.triggerSlash;\n            if (typeof fn !== 'function')\n                return false;\n            try {\n                fn(command);\n                return true;\n            }\n            catch (e) {\n                console.error('[PackageDetail] triggerSlash failed:', e);\n                return false;\n            }\n        }\n        async function copyToClipboard(text) {\n            try {\n                await navigator.clipboard.writeText(text);\n                return true;\n            }\n            catch {\n                try {\n                    const ta = document.createElement('textarea');\n                    ta.value = text;\n                    ta.style.position = 'fixed';\n                    ta.style.left = '-9999px';\n                    document.body.appendChild(ta);\n                    ta.select();\n                    const ok = document.execCommand('copy');\n                    document.body.removeChild(ta);\n                    return ok;\n                }\n                catch {\n                    return false;\n                }\n            }\n        }\n        async function placeOrder(extra) {\n            if (!pkg.value)\n                return;\n            const pkgName = pkg.value.name || '';\n            const shopName = pkg.value.shop_name || '';\n            const note = [extra, remark.value.trim()].filter(Boolean).join(' ');\n            const text = `${shopName} / ${pkgName}${note ? `${note}` : ''}`;\n            const cmd = `/send ${text} | /trigger await=true`;\n            const ok = tryTriggerSlash(cmd);\n            if (!ok)\n                await copyToClipboard(cmd);\n        }\n        function quickOrder(feature) {\n            void placeOrder(`${feature}`);\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"div\", { class: \"mb-4 flex items-center space-x-2\" }, [\n                    _cache[5] || (_cache[5] = _createElementVNode(\"i\", { class: \"fas fa-info-circle text-blue-400\" }, null, -1 /* CACHED */)),\n                    _cache[6] || (_cache[6] = _createElementVNode(\"h3\", { class: \"text-white\" }, \"Package Details\", -1 /* CACHED */)),\n                    _createElementVNode(\"div\", { class: \"ml-auto flex items-center space-x-1\" }, [\n                        _createElementVNode(\"button\", {\n                            class: \"mr-2 rounded-lg border border-slate-700/50 bg-slate-800/50 px-2 py-1 text-xs text-slate-200 hover:border-blue-500/30 hover:bg-slate-700/50\",\n                            onClick: openHistory\n                        }, [...(_cache[2] || (_cache[2] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-history text-blue-300\" }, null, -1 /* CACHED */),\n                                _createElementVNode(\"span\", { class: \"ml-1\" }, \"\", -1 /* CACHED */)\n                            ]))]),\n                        _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"h-2 w-2 animate-pulse rounded-full bg-green-400\" }, null, -1 /* CACHED */)),\n                        _cache[4] || (_cache[4] = _createElementVNode(\"span\", { class: \"text-xs text-green-400\" }, \"Active\", -1 /* CACHED */))\n                    ])\n                ]),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    (!pkg.value)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, \"  \"))\n                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n                            _createElementVNode(\"div\", _hoisted_5, [\n                                _createElementVNode(\"div\", _hoisted_6, [\n                                    _createElementVNode(\"div\", _hoisted_7, [\n                                        _createElementVNode(\"div\", _hoisted_8, _toDisplayString(pkg.value.name || ''), 1 /* TEXT */),\n                                        _createElementVNode(\"div\", _hoisted_9, _toDisplayString(pkg.value.shop_name || ''), 1 /* TEXT */)\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_10, [\n                                        _createElementVNode(\"div\", _hoisted_11, \"\" + _toDisplayString(priceText.value), 1 /* TEXT */),\n                                        _createElementVNode(\"div\", _hoisted_12, _toDisplayString(starsText.value), 1 /* TEXT */)\n                                    ])\n                                ]),\n                                (tags.value.length)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(tags.value.slice(0, 8), (t) => {\n                                            return (_openBlock(), _createElementBlock(\"span\", {\n                                                key: t,\n                                                class: \"rounded-full border border-blue-500/20 bg-blue-500/5 px-2 py-0.5 text-xs text-blue-200\"\n                                            }, _toDisplayString(t), 1 /* TEXT */));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_14, [\n                                _cache[7] || (_cache[7] = _createElementVNode(\"div\", { class: \"mb-2 flex items-center gap-2 text-sm font-bold text-slate-200\" }, [\n                                    _createElementVNode(\"i\", { class: \"fas fa-align-left text-blue-300\" }),\n                                    _createTextVNode(\"  \")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_15, _toDisplayString(descriptionText.value), 1 /* TEXT */)\n                            ]),\n                            (features.value.length)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, [\n                                    _cache[8] || (_cache[8] = _createElementVNode(\"div\", { class: \"mb-2 flex items-center gap-2 text-sm font-bold text-slate-200\" }, [\n                                        _createElementVNode(\"i\", { class: \"fas fa-bolt text-yellow-300\" }),\n                                        _createTextVNode(\"  \")\n                                    ], -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_17, [\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(features.value.slice(0, 12), (f) => {\n                                            return (_openBlock(), _createElementBlock(\"button\", {\n                                                key: f,\n                                                class: \"rounded-full border border-slate-700/50 bg-slate-900/40 px-2 py-1 text-xs text-slate-200 hover:border-blue-500/30 hover:bg-slate-800/60\",\n                                                onClick: ($event) => (quickOrder(f))\n                                            }, _toDisplayString(f), 9 /* TEXT, PROPS */, _hoisted_18));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ])\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]))\n                ]),\n                _createElementVNode(\"div\", _hoisted_19, [\n                    _withDirectives(_createElementVNode(\"input\", {\n                        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((remark).value = $event)),\n                        placeholder: \"\",\n                        class: \"flex-1 rounded-xl border border-slate-700/50 bg-slate-800/50 px-3 py-2 text-white placeholder-slate-400 focus:border-blue-500/50 focus:outline-none\"\n                    }, null, 512 /* NEED_PATCH */), [\n                        [_vModelText, remark.value]\n                    ]),\n                    _createElementVNode(\"button\", {\n                        class: \"flex items-center justify-center rounded-xl border border-blue-400/30 bg-gradient-to-r from-blue-500 to-violet-600 px-4 py-2 text-sm font-bold text-white shadow-lg shadow-blue-500/25 hover:from-blue-600 hover:to-violet-700 disabled:opacity-50\",\n                        disabled: !pkg.value,\n                        onClick: _cache[1] || (_cache[1] = ($event) => (placeOrder()))\n                    }, [...(_cache[9] || (_cache[9] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-paper-plane text-white\" }, null, -1 /* CACHED */),\n                            _createElementVNode(\"span\", { class: \"ml-2 hidden sm:inline\" }, \"\", -1 /* CACHED */)\n                        ]))], 8 /* PROPS */, _hoisted_20)\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./PackageDetail.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PackageDetail.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","/* unplugin-vue-components disabled */import script from \"./PackageImages.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PackageImages.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\nimport PackageImageGallery from './PackageImageGallery.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'PackageImages',\n    setup(__props) {\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(PackageImageGallery, { variant: \"panel\" }));\n        };\n    }\n});\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"rounded-3xl border border-violet-500/20 bg-gradient-to-br from-slate-900/80 to-black/60 p-6 shadow-2xl shadow-violet-500/10 backdrop-blur-xl\" };\nconst _hoisted_2 = { class: \"space-y-4\" };\nconst _hoisted_3 = { class: \"rounded-2xl border border-slate-700/50 bg-slate-800/50 p-4\" };\nconst _hoisted_4 = { class: \"flex items-center justify-between\" };\nconst _hoisted_5 = { class: \"text-white\" };\nconst _hoisted_6 = { class: \"grid grid-cols-2 gap-3\" };\nconst _hoisted_7 = { class: \"rounded-xl border border-green-500/20 bg-gradient-to-br from-green-500/10 to-emerald-600/10 p-3 text-center\" };\nconst _hoisted_8 = { class: \"text-lg text-green-400\" };\nconst _hoisted_9 = { class: \"rounded-xl border border-orange-500/20 bg-gradient-to-br from-orange-500/10 to-red-600/10 p-3 text-center\" };\nconst _hoisted_10 = { class: \"text-lg text-orange-400\" };\nimport { computed, onMounted, ref } from 'vue';\nimport { filterActiveOrders, loadOrdersFromMVU } from '../shared/serviceOrders';\nimport { getNestedValue } from '../utils';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'ServiceStats',\n    setup(__props) {\n        const balance = ref(null);\n        const spending = ref(null);\n        const activeOrders = ref(0);\n        const balanceText = computed(() => {\n            const v = balance.value;\n            if (v === null || v === undefined || v === '')\n                return '';\n            const n = typeof v === 'number' ? v : Number(String(v));\n            return Number.isFinite(n) ? `${n}` : `${String(v)}`;\n        });\n        const spendingText = computed(() => {\n            const v = spending.value;\n            if (v === null || v === undefined || v === '')\n                return '';\n            const n = typeof v === 'number' ? v : Number(String(v));\n            return Number.isFinite(n) ? `${n}` : `${String(v)}`;\n        });\n        const activeOrdersText = computed(() => {\n            const n = activeOrders.value;\n            return Number.isFinite(n) ? `${n}` : '';\n        });\n        function safeGetMvuSnapshot() {\n            try {\n                const message_id = getCurrentMessageId?.() ?? 'latest';\n                if (typeof waitGlobalInitialized === 'function') {\n                    try {\n                        waitGlobalInitialized('Mvu');\n                    }\n                    catch {\n                        // ignore\n                    }\n                }\n                if (typeof Mvu !== 'undefined' && Mvu?.getMvuData)\n                    return Mvu.getMvuData({ type: 'message', message_id });\n                return getVariables({ type: 'message', message_id });\n            }\n            catch {\n                return null;\n            }\n        }\n        async function refresh() {\n            try {\n                const orders = await loadOrdersFromMVU();\n                activeOrders.value = filterActiveOrders(orders).length;\n            }\n            catch {\n                activeOrders.value = 0;\n            }\n            const snap = safeGetMvuSnapshot();\n            const stat = snap?.stat_data || snap || {};\n            balance.value = getNestedValue(stat, '.', null);\n            spending.value = getNestedValue(stat, '.', null);\n        }\n        onMounted(() => {\n            refresh().catch(() => { });\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"mb-6 flex items-center justify-between\" }, [\n                    _createElementVNode(\"h3\", { class: \"text-white\" }, \"\"),\n                    _createElementVNode(\"i\", { class: \"fas fa-chart-line text-green-400\" })\n                ], -1 /* CACHED */)),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _createElementVNode(\"div\", _hoisted_4, [\n                            _cache[0] || (_cache[0] = _createElementVNode(\"div\", { class: \"flex items-center space-x-2\" }, [\n                                _createElementVNode(\"i\", { class: \"fas fa-dollar-sign text-green-400\" }),\n                                _createElementVNode(\"span\", { class: \"text-sm text-slate-400\" }, \"\")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"span\", _hoisted_5, _toDisplayString(balanceText.value), 1 /* TEXT */)\n                        ])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_6, [\n                        _createElementVNode(\"div\", _hoisted_7, [\n                            _createElementVNode(\"div\", _hoisted_8, _toDisplayString(activeOrdersText.value), 1 /* TEXT */),\n                            _cache[1] || (_cache[1] = _createElementVNode(\"div\", { class: \"text-xs text-green-400/70\" }, \"\", -1 /* CACHED */))\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_9, [\n                            _createElementVNode(\"div\", _hoisted_10, _toDisplayString(spendingText.value), 1 /* TEXT */),\n                            _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"text-xs text-orange-400/70\" }, \"\", -1 /* CACHED */))\n                        ])\n                    ])\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./ServiceStats.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ServiceStats.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeStyle as _normalizeStyle } from \"vue\";\nconst _hoisted_1 = { class: \"rounded-3xl border border-orange-500/20 bg-gradient-to-br from-slate-900/80 to-black/60 p-6 shadow-2xl shadow-orange-500/10 backdrop-blur-xl\" };\nconst _hoisted_2 = { class: \"mb-5 flex items-start gap-4\" };\nconst _hoisted_3 = [\"title\"];\nconst _hoisted_4 = { class: \"min-w-0 flex-1\" };\nconst _hoisted_5 = { class: \"flex items-start justify-between gap-2\" };\nconst _hoisted_6 = { class: \"truncate text-white\" };\nconst _hoisted_7 = {\n    key: 0,\n    class: \"shrink-0 rounded-full border border-orange-500/20 bg-orange-500/10 px-2 py-0.5 text-xs text-orange-200\"\n};\nconst _hoisted_8 = { class: \"mt-2 flex flex-wrap items-center gap-2 text-xs text-slate-400\" };\nconst _hoisted_9 = {\n    key: 0,\n    class: \"rounded-full border border-slate-700/50 bg-slate-900/40 px-2 py-0.5\"\n};\nconst _hoisted_10 = {\n    key: 1,\n    class: \"rounded-full border border-slate-700/50 bg-slate-900/40 px-2 py-0.5\"\n};\nconst _hoisted_11 = { class: \"space-y-4\" };\nconst _hoisted_12 = { class: \"space-y-2\" };\nconst _hoisted_13 = { class: \"flex items-center justify-between text-sm\" };\nconst _hoisted_14 = { class: \"text-orange-400\" };\nconst _hoisted_15 = { class: \"h-2 w-full rounded-full bg-slate-800\" };\nconst _hoisted_16 = { class: \"grid grid-cols-2 gap-3\" };\nconst _hoisted_17 = { class: \"rounded-xl border border-slate-700/50 bg-slate-800/50 p-3\" };\nconst _hoisted_18 = { class: \"text-white\" };\nconst _hoisted_19 = { class: \"rounded-xl border border-slate-700/50 bg-slate-800/50 p-3\" };\nconst _hoisted_20 = { class: \"text-white\" };\nimport { computed, onMounted, ref } from 'vue';\nimport { filterActiveOrders, loadOrdersFromMVU } from '../shared/serviceOrders';\nimport { getNestedValue } from '../utils';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'ServiceStatus',\n    setup(__props) {\n        const currentGirl = ref(null);\n        const girlName = ref('...');\n        const girlIdentity = ref('');\n        const girlAge = ref('-');\n        const girlStatus = ref('');\n        const currentExp = ref(0);\n        const maxExp = ref(100);\n        const heartbeat = ref('-');\n        const rating = ref(5.0);\n        const avatarText = computed(() => {\n            const name = String(girlName.value || '').trim();\n            if (!name || name === '...' || name === '' || name === '')\n                return '';\n            return name.slice(-1);\n        });\n        async function refreshData() {\n            try {\n                const orders = await loadOrdersFromMVU();\n                const active = filterActiveOrders(orders);\n                if (active.length > 0) {\n                    currentGirl.value = active[0];\n                    updateDisplay();\n                }\n                else {\n                    girlName.value = '';\n                    girlIdentity.value = '';\n                    girlAge.value = '-';\n                    girlStatus.value = '';\n                    heartbeat.value = '-';\n                    currentExp.value = 0;\n                    rating.value = 0;\n                }\n            }\n            catch (e) {\n                console.error('', e);\n                girlName.value = '';\n            }\n        }\n        function updateDisplay() {\n            if (!currentGirl.value)\n                return;\n            const g = currentGirl.value;\n            girlName.value = getNestedValue(g, '.', '');\n            girlIdentity.value = String(getNestedValue(g, '.', '') || '').trim();\n            girlAge.value = getNestedValue(g, '.', '-');\n            girlStatus.value = String(getNestedValue(g, 'status', '') || getNestedValue(g, '.', '') || '').trim();\n            const affection = getNestedValue(g, '.', 0);\n            currentExp.value = typeof affection === 'number' ? affection : parseFloat(String(affection)) || 0;\n            maxExp.value = 100;\n            heartbeat.value = getNestedValue(g, '.', '-');\n            // UI\n            rating.value = Math.min(5, Math.max(0, currentExp.value / 20));\n        }\n        onMounted(() => {\n            refreshData();\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" Header \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"div\", {\n                        class: \"flex h-16 w-16 items-center justify-center overflow-hidden rounded-2xl border-2 border-orange-400/30 bg-gradient-to-br from-orange-500/20 to-yellow-500/10 text-xl font-bold text-orange-100 shadow-lg shadow-orange-500/20\",\n                        title: girlName.value\n                    }, _toDisplayString(avatarText.value), 9 /* TEXT, PROPS */, _hoisted_3),\n                    _createElementVNode(\"div\", _hoisted_4, [\n                        _createElementVNode(\"div\", _hoisted_5, [\n                            _createElementVNode(\"h4\", _hoisted_6, _toDisplayString(girlName.value), 1 /* TEXT */),\n                            (girlStatus.value)\n                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_7, _toDisplayString(girlStatus.value), 1 /* TEXT */))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_8, [\n                            (girlIdentity.value)\n                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_9, _toDisplayString(girlIdentity.value), 1 /* TEXT */))\n                                : _createCommentVNode(\"v-if\", true),\n                            (girlAge.value !== '-' && girlAge.value !== 0)\n                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_10, _toDisplayString(girlAge.value) + \"  \", 1 /* TEXT */))\n                                : _createCommentVNode(\"v-if\", true)\n                        ])\n                    ])\n                ]),\n                _createElementVNode(\"div\", _hoisted_11, [\n                    _createCommentVNode(\" Affection \"),\n                    _createElementVNode(\"div\", _hoisted_12, [\n                        _createElementVNode(\"div\", _hoisted_13, [\n                            _cache[0] || (_cache[0] = _createElementVNode(\"span\", { class: \"flex items-center space-x-1 text-slate-400\" }, [\n                                _createElementVNode(\"i\", { class: \"fas fa-bolt text-xs\" }),\n                                _createElementVNode(\"span\", null, \"\")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"span\", _hoisted_14, _toDisplayString(currentExp.value) + \" / \" + _toDisplayString(maxExp.value), 1 /* TEXT */)\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_15, [\n                            _createElementVNode(\"div\", {\n                                class: \"h-2 rounded-full bg-gradient-to-r from-orange-500 to-yellow-500 transition-all duration-700\",\n                                style: _normalizeStyle({ width: `${(currentExp.value / maxExp.value) * 100}%` })\n                            }, null, 4 /* STYLE */)\n                        ])\n                    ]),\n                    _createCommentVNode(\" Stats \"),\n                    _createElementVNode(\"div\", _hoisted_16, [\n                        _createElementVNode(\"div\", _hoisted_17, [\n                            _cache[1] || (_cache[1] = _createElementVNode(\"div\", { class: \"mb-1 flex items-center space-x-2\" }, [\n                                _createElementVNode(\"i\", { class: \"fas fa-heart text-red-400\" }),\n                                _createElementVNode(\"span\", { class: \"text-sm text-red-400\" }, \"\")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_18, _toDisplayString(heartbeat.value) + \" bpm\", 1 /* TEXT */)\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_19, [\n                            _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"mb-1 flex items-center space-x-2\" }, [\n                                _createElementVNode(\"i\", { class: \"fas fa-star text-yellow-400\" }),\n                                _createElementVNode(\"span\", { class: \"text-sm text-yellow-400\" }, \"\")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_20, _toDisplayString(rating.value), 1 /* TEXT */)\n                        ])\n                    ])\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./ServiceStatus.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ServiceStatus.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = { class: \"grid h-full grid-rows-[auto_minmax(0,1fr)_auto] gap-y-4 rounded-2xl border border-green-500/20 bg-gradient-to-br from-slate-900/90 to-black/80 p-5 shadow-2xl shadow-green-500/10 backdrop-blur-xl\" };\nconst _hoisted_2 = { class: \"flex items-center justify-between\" };\nconst _hoisted_3 = { class: \"rounded-md bg-green-500/10 px-2 py-1 text-xs font-medium text-green-400/80\" };\nconst _hoisted_4 = { class: \"scrollbar-thin scrollbar-thumb-slate-700 scrollbar-track-transparent min-h-0 space-y-3 overflow-y-auto pr-1\" };\nconst _hoisted_5 = [\"onClick\"];\nconst _hoisted_6 = { class: \"relative shrink-0\" };\nconst _hoisted_7 = { class: \"flex h-full w-full items-center justify-center bg-slate-900/50 text-slate-100\" };\nconst _hoisted_8 = {\n    key: 1,\n    class: \"fas fa-box\"\n};\nconst _hoisted_9 = { class: \"absolute -bottom-2 left-1/2 -translate-x-1/2 rounded-full border border-slate-700/50 bg-slate-950/60 px-2 py-0.5 text-[10px] text-slate-300 backdrop-blur\" };\nconst _hoisted_10 = { class: \"min-w-0 flex-1 py-1\" };\nconst _hoisted_11 = { class: \"mb-1 flex items-center justify-between\" };\nconst _hoisted_12 = { class: \"truncate font-bold text-slate-200 transition-colors group-hover:text-white\" };\nconst _hoisted_13 = { class: \"flex items-center space-x-1 rounded border border-green-500/20 bg-green-900/20 px-1.5 py-0.5 text-xs font-bold text-green-400\" };\nconst _hoisted_14 = { class: \"flex items-center justify-between text-xs\" };\nconst _hoisted_15 = { class: \"truncate text-slate-500 transition-colors group-hover:text-slate-400\" };\nconst _hoisted_16 = { class: \"text-slate-600 group-hover:text-slate-500\" };\nimport { computed, onMounted, onUnmounted, ref } from 'vue';\nimport { shopStoreMvu } from '../shared/shopStoreMvu';\nimport { selectedPackage, setSelectedPackageFromShop, refreshSelectedPackageFromMvu } from '../shared/selectedPackage';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'ShopList',\n    setup(__props) {\n        const shops = ref([]);\n        async function refreshData() {\n            try {\n                shops.value = shopStoreMvu.getShops() || [];\n                refreshSelectedPackageFromMvu();\n            }\n            catch (e) {\n                console.error('[ShopList] ', e);\n                shops.value = [];\n            }\n        }\n        const packageItems = computed(() => {\n            const list = [];\n            const current = selectedPackage.value;\n            shops.value.forEach((shop, sIdx) => {\n                const shopId = String(shop?.id ?? shop?.shop_id ?? sIdx);\n                const shopName = String(shop?.shopname || shop?.name || '');\n                const pkgs = Array.isArray(shop?.packages) ? shop.packages : [];\n                pkgs.forEach((pkg, pIdx) => {\n                    const pkgId = String(pkg?.id ?? `${shopId}_pkg_${pIdx}`);\n                    const pkgName = String(pkg?.name || '');\n                    const tags = Array.isArray(pkg?.tags) ? pkg.tags : [];\n                    const stars = typeof pkg?.stars === 'number' ? pkg.stars : Number.parseFloat(String(pkg?.stars ?? '')) || 0;\n                    const priceRaw = pkg?.price ?? pkg?. ?? pkg?. ?? 0;\n                    const price = typeof priceRaw === 'number' ? String(priceRaw) : String(priceRaw || '0');\n                    const selected = String(current?.id ?? '') === String(pkgId) && String(current?.shop_id ?? '') === String(shopId);\n                    list.push({\n                        key: `${shopId}__${pkgId}`,\n                        shop,\n                        pkg: { ...pkg, id: pkgId },\n                        shopName,\n                        pkgName,\n                        price,\n                        starsText: stars ? `${stars.toFixed(1)}` : '',\n                        tagsText: tags.length ? tags.slice(0, 3).join(' / ') : (pkg?.description || '').split('\\n')[0] || '',\n                        icon: pkg?.icon || undefined,\n                        selected,\n                    });\n                });\n            });\n            return list;\n        });\n        function select(item) {\n            setSelectedPackageFromShop(item.shop, item.pkg);\n        }\n        const onShopCacheUpdated = () => {\n            void refreshData();\n        };\n        onMounted(() => {\n            refreshData();\n            window.addEventListener('shop:cache:updated', onShopCacheUpdated);\n        });\n        onUnmounted(() => {\n            window.removeEventListener('shop:cache:updated', onShopCacheUpdated);\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" Header \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _cache[0] || (_cache[0] = _createElementVNode(\"div\", { class: \"flex items-center space-x-3\" }, [\n                        _createElementVNode(\"div\", { class: \"flex h-8 w-8 items-center justify-center rounded-lg bg-green-500/10 text-green-400\" }, [\n                            _createElementVNode(\"i\", { class: \"fas fa-store\" })\n                        ]),\n                        _createElementVNode(\"h3\", { class: \"text-lg font-bold tracking-wide text-white\" }, \"MARKETPLACE\")\n                    ], -1 /* CACHED */)),\n                    _createElementVNode(\"span\", _hoisted_3, _toDisplayString(packageItems.value.length) + \" PACKAGES\", 1 /* TEXT */)\n                ]),\n                _createCommentVNode(\" List \"),\n                _createElementVNode(\"div\", _hoisted_4, [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(packageItems.value, (item) => {\n                        return (_openBlock(), _createElementBlock(\"div\", {\n                            key: item.key,\n                            class: _normalizeClass([\"group relative flex cursor-pointer items-center space-x-4 rounded-xl border bg-slate-800/20 p-3 transition-all duration-300 hover:translate-x-1 hover:bg-slate-800/60 hover:shadow-lg hover:shadow-green-500/10\",\n                                item.selected ? 'border-blue-500/50 ring-1 ring-blue-500/20' : 'border-slate-700/50 hover:border-green-500/50'\n                            ]),\n                            onClick: ($event) => (select(item))\n                        }, [\n                            _createCommentVNode(\" Rank/Status Indicator (Optional) \"),\n                            _createElementVNode(\"div\", {\n                                class: _normalizeClass([\"absolute top-4 bottom-4 -left-[1px] w-[3px] rounded-r bg-gradient-to-b from-green-500 to-emerald-600 opacity-0 transition-opacity group-hover:opacity-100\", item.selected ? 'opacity-100' : ''])\n                            }, null, 2 /* CLASS */),\n                            _createCommentVNode(\" Avatar \"),\n                            _createElementVNode(\"div\", _hoisted_6, [\n                                _createElementVNode(\"div\", {\n                                    class: _normalizeClass([\"h-12 w-12 overflow-hidden rounded-xl border-2 transition-colors\", item.selected ? 'border-blue-500/50' : 'border-slate-700 group-hover:border-green-500/50'])\n                                }, [\n                                    _createElementVNode(\"div\", _hoisted_7, [\n                                        (item.icon)\n                                            ? (_openBlock(), _createElementBlock(\"i\", {\n                                                key: 0,\n                                                class: _normalizeClass(item.icon)\n                                            }, null, 2 /* CLASS */))\n                                            : (_openBlock(), _createElementBlock(\"i\", _hoisted_8))\n                                    ])\n                                ], 2 /* CLASS */),\n                                _createElementVNode(\"div\", _hoisted_9, _toDisplayString(item.shopName), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" Info \"),\n                            _createElementVNode(\"div\", _hoisted_10, [\n                                _createElementVNode(\"div\", _hoisted_11, [\n                                    _createElementVNode(\"span\", _hoisted_12, _toDisplayString(item.pkgName), 1 /* TEXT */),\n                                    _createElementVNode(\"span\", _hoisted_13, [\n                                        _cache[1] || (_cache[1] = _createElementVNode(\"i\", { class: \"fas fa-yen-sign text-[10px]\" }, null, -1 /* CACHED */)),\n                                        _createElementVNode(\"span\", null, _toDisplayString(item.price), 1 /* TEXT */)\n                                    ])\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_14, [\n                                    _createElementVNode(\"span\", _hoisted_15, _toDisplayString(item.tagsText), 1 /* TEXT */),\n                                    _createElementVNode(\"span\", _hoisted_16, _toDisplayString(item.starsText), 1 /* TEXT */)\n                                ])\n                            ])\n                        ], 10 /* CLASS, PROPS */, _hoisted_5));\n                    }), 128 /* KEYED_FRAGMENT */))\n                ]),\n                _createCommentVNode(\" Footer Action \"),\n                _createElementVNode(\"button\", {\n                    class: \"group flex w-full items-center justify-center space-x-2 rounded-xl border border-dashed border-slate-600 bg-transparent py-3 text-sm font-medium text-slate-400 transition-all hover:border-green-500/50 hover:bg-green-500/5 hover:text-green-400\",\n                    onClick: refreshData\n                }, [...(_cache[2] || (_cache[2] = [\n                        _createElementVNode(\"span\", null, \"\", -1 /* CACHED */),\n                        _createElementVNode(\"i\", { class: \"fas fa-sync-alt transition-transform group-hover:translate-x-1\" }, null, -1 /* CACHED */)\n                    ]))])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./ShopList.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ShopList.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, withModifiers as _withModifiers, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = { class: \"mx-auto flex h-full w-full max-w-3xl flex-col overflow-hidden rounded-2xl border border-blue-500/20 bg-gradient-to-br from-slate-900/95 to-black/90 shadow-2xl shadow-blue-500/10 backdrop-blur\" };\nconst _hoisted_2 = { class: \"scrollbar-thin scrollbar-thumb-slate-700 scrollbar-track-transparent min-h-0 flex-1 overflow-y-auto p-4\" };\nconst _hoisted_3 = { class: \"space-y-3\" };\nconst _hoisted_4 = {\n    open: \"\",\n    class: \"rounded-2xl border border-slate-700/50 bg-slate-950/40\"\n};\nconst _hoisted_5 = { class: \"grid gap-3 px-4 pb-4 pt-1\" };\nconst _hoisted_6 = { class: \"rounded-2xl border border-slate-700/50 bg-slate-950/40\" };\nconst _hoisted_7 = { class: \"grid gap-3 px-4 pb-4 pt-1\" };\nconst _hoisted_8 = { class: \"rounded-2xl border border-slate-700/50 bg-slate-950/40\" };\nconst _hoisted_9 = { class: \"grid gap-2 px-4 pb-4 pt-1\" };\nconst _hoisted_10 = [\"onClick\"];\nconst _hoisted_11 = { class: \"flex items-center gap-2\" };\nconst _hoisted_12 = { class: \"rounded-2xl border border-slate-700/50 bg-slate-950/40\" };\nconst _hoisted_13 = { class: \"grid gap-2 px-4 pb-4 pt-1\" };\nconst _hoisted_14 = { class: \"flex items-center gap-2\" };\nimport { onMounted, ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { historyOverlayOpen, playPanelsOpen } from '../shared/uiState';\nimport PackageDetail from './PackageDetail.vue';\nimport PackageImages from './PackageImages.vue';\nimport ServiceStats from './ServiceStats.vue';\nimport ServiceStatus from './ServiceStatus.vue';\nimport ShopList from './ShopList.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'PlayPanelsModal',\n    setup(__props) {\n        const router = useRouter();\n        const navItems = [\n            { icon: 'fas fa-gamepad text-blue-300', label: 'Play', path: '/play' },\n            { icon: 'fas fa-home text-slate-200', label: 'Home', path: '/home' },\n            { icon: 'fas fa-concierge-bell text-slate-200', label: 'Service', path: '/service' },\n            { icon: 'fas fa-compass text-slate-200', label: 'Discover', path: '/discover' },\n        ];\n        const isDark = ref(false);\n        function close() {\n            playPanelsOpen.value = false;\n        }\n        function openHistory() {\n            historyOverlayOpen.value = true;\n        }\n        function go(path) {\n            close();\n            router.push(path);\n        }\n        function toggleTheme() {\n            isDark.value = !isDark.value;\n            window.dispatchEvent(new CustomEvent('theme-change', {\n                detail: { isDark: isDark.value },\n            }));\n            localStorage.setItem('app-theme', isDark.value ? 'dark' : 'light');\n        }\n        function refreshApp() {\n            try {\n                const fn = window?.reloadIframe;\n                if (typeof fn === 'function') {\n                    fn();\n                    return;\n                }\n            }\n            catch {\n                // ignore\n            }\n            window.location.reload();\n        }\n        function sendToAI(message) {\n            const fullCommand = `${message} | /trigger await=true`;\n            const fn = window?.triggerSlash;\n            if (typeof fn !== 'function')\n                return false;\n            try {\n                fn(fullCommand);\n                return true;\n            }\n            catch {\n                return false;\n            }\n        }\n        function regenerateHomeShops() {\n            const ok = sendToAI('/send --2-2');\n            try {\n                const toastr = window?.toastr;\n                if (ok)\n                    toastr?.success?.('', '');\n                else\n                    toastr?.info?.(' triggerSlash', '');\n            }\n            catch {\n                // ignore\n            }\n        }\n        onMounted(() => {\n            try {\n                const savedTheme = localStorage.getItem('app-theme');\n                isDark.value = savedTheme === 'dark';\n            }\n            catch {\n                isDark.value = false;\n            }\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: \"fixed inset-0 z-[5200] bg-black/70 p-3 sm:p-4\",\n                onClick: _withModifiers(close, [\"self\"])\n            }, [\n                _createElementVNode(\"div\", _hoisted_1, [\n                    _createElementVNode(\"div\", { class: \"flex items-center gap-3 border-b border-slate-700/50 px-4 py-3\" }, [\n                        _cache[1] || (_cache[1] = _createStaticVNode(\"<div class=\\\"flex h-9 w-9 items-center justify-center rounded-xl bg-blue-500/10 text-blue-300\\\"><i class=\\\"fas fa-layer-group\\\"></i></div><div class=\\\"min-w-0 flex-1\\\"><div class=\\\"truncate text-sm font-bold text-white\\\"></div><div class=\\\"truncate text-[11px] text-slate-400\\\">/</div></div>\", 2)),\n                        _createElementVNode(\"button\", {\n                            class: \"rounded-xl border border-slate-700/50 bg-slate-800/50 px-3 py-2 text-sm text-slate-200 hover:border-blue-500/30 hover:bg-slate-700/50\",\n                            onClick: close\n                        }, [...(_cache[0] || (_cache[0] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */),\n                                _createElementVNode(\"span\", { class: \"ml-2\" }, \"\", -1 /* CACHED */)\n                            ]))])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_2, [\n                        _createElementVNode(\"div\", _hoisted_3, [\n                            _createElementVNode(\"details\", _hoisted_4, [\n                                _cache[2] || (_cache[2] = _createElementVNode(\"summary\", { class: \"flex cursor-pointer list-none items-center justify-between gap-3 px-4 py-3 text-sm font-bold text-slate-100\" }, [\n                                    _createElementVNode(\"span\", { class: \"flex items-center gap-2\" }, [\n                                        _createElementVNode(\"i\", { class: \"fas fa-user-shield text-blue-300\" }),\n                                        _createTextVNode(\"  \")\n                                    ]),\n                                    _createElementVNode(\"i\", { class: \"fas fa-chevron-down text-xs text-slate-400\" })\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_5, [\n                                    _createVNode(ServiceStatus),\n                                    _createVNode(ServiceStats)\n                                ])\n                            ]),\n                            _createElementVNode(\"details\", _hoisted_6, [\n                                _cache[3] || (_cache[3] = _createElementVNode(\"summary\", { class: \"flex cursor-pointer list-none items-center justify-between gap-3 px-4 py-3 text-sm font-bold text-slate-100\" }, [\n                                    _createElementVNode(\"span\", { class: \"flex items-center gap-2\" }, [\n                                        _createElementVNode(\"i\", { class: \"fas fa-store text-green-300\" }),\n                                        _createTextVNode(\"  \")\n                                    ]),\n                                    _createElementVNode(\"i\", { class: \"fas fa-chevron-down text-xs text-slate-400\" })\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_7, [\n                                    _createVNode(ShopList),\n                                    _createVNode(PackageDetail),\n                                    _createVNode(PackageImages)\n                                ])\n                            ]),\n                            _createElementVNode(\"details\", { class: \"rounded-2xl border border-slate-700/50 bg-slate-950/40\" }, [\n                                _cache[6] || (_cache[6] = _createElementVNode(\"summary\", { class: \"flex cursor-pointer list-none items-center justify-between gap-3 px-4 py-3 text-sm font-bold text-slate-100\" }, [\n                                    _createElementVNode(\"span\", { class: \"flex items-center gap-2\" }, [\n                                        _createElementVNode(\"i\", { class: \"fas fa-history text-blue-300\" }),\n                                        _createTextVNode(\"  \")\n                                    ]),\n                                    _createElementVNode(\"i\", { class: \"fas fa-chevron-down text-xs text-slate-400\" })\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", { class: \"px-4 pb-4 pt-1\" }, [\n                                    _createElementVNode(\"div\", { class: \"rounded-xl border border-slate-700/50 bg-slate-900/30 p-3 text-xs text-slate-300\" }, [\n                                        _cache[5] || (_cache[5] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                        _createElementVNode(\"button\", {\n                                            class: \"ml-2 rounded-lg border border-slate-700/50 bg-slate-950/40 px-2 py-1 text-xs text-slate-200 hover:border-blue-500/30 hover:bg-slate-800/60\",\n                                            onClick: openHistory\n                                        }, [...(_cache[4] || (_cache[4] = [\n                                                _createElementVNode(\"i\", { class: \"fas fa-up-right-from-square\" }, null, -1 /* CACHED */),\n                                                _createElementVNode(\"span\", { class: \"ml-1\" }, \"\", -1 /* CACHED */)\n                                            ]))])\n                                    ])\n                                ])\n                            ]),\n                            _createElementVNode(\"details\", _hoisted_8, [\n                                _cache[8] || (_cache[8] = _createElementVNode(\"summary\", { class: \"flex cursor-pointer list-none items-center justify-between gap-3 px-4 py-3 text-sm font-bold text-slate-100\" }, [\n                                    _createElementVNode(\"span\", { class: \"flex items-center gap-2\" }, [\n                                        _createElementVNode(\"i\", { class: \"fas fa-compass text-violet-300\" }),\n                                        _createTextVNode(\"  \")\n                                    ]),\n                                    _createElementVNode(\"i\", { class: \"fas fa-chevron-down text-xs text-slate-400\" })\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_9, [\n                                    (_openBlock(), _createElementBlock(_Fragment, null, _renderList(navItems, (item) => {\n                                        return _createElementVNode(\"button\", {\n                                            key: item.path,\n                                            class: \"flex items-center justify-between rounded-xl border border-slate-700/50 bg-slate-900/30 px-3 py-2 text-left text-sm text-slate-200 hover:border-blue-500/30 hover:bg-slate-800/60\",\n                                            onClick: ($event) => (go(item.path))\n                                        }, [\n                                            _createElementVNode(\"span\", _hoisted_11, [\n                                                _createElementVNode(\"i\", {\n                                                    class: _normalizeClass(item.icon)\n                                                }, null, 2 /* CLASS */),\n                                                _createElementVNode(\"span\", null, _toDisplayString(item.label), 1 /* TEXT */)\n                                            ]),\n                                            _cache[7] || (_cache[7] = _createElementVNode(\"i\", { class: \"fas fa-chevron-right text-xs text-slate-500\" }, null, -1 /* CACHED */))\n                                        ], 8 /* PROPS */, _hoisted_10);\n                                    }), 64 /* STABLE_FRAGMENT */))\n                                ])\n                            ]),\n                            _createElementVNode(\"details\", _hoisted_12, [\n                                _cache[12] || (_cache[12] = _createElementVNode(\"summary\", { class: \"flex cursor-pointer list-none items-center justify-between gap-3 px-4 py-3 text-sm font-bold text-slate-100\" }, [\n                                    _createElementVNode(\"span\", { class: \"flex items-center gap-2\" }, [\n                                        _createElementVNode(\"i\", { class: \"fas fa-sliders text-slate-200\" }),\n                                        _createTextVNode(\"  \")\n                                    ]),\n                                    _createElementVNode(\"i\", { class: \"fas fa-chevron-down text-xs text-slate-400\" })\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_13, [\n                                    _createElementVNode(\"button\", {\n                                        class: \"flex items-center justify-between rounded-xl border border-slate-700/50 bg-slate-900/30 px-3 py-2 text-left text-sm text-slate-200 hover:border-blue-500/30 hover:bg-slate-800/60\",\n                                        onClick: toggleTheme\n                                    }, [\n                                        _createElementVNode(\"span\", _hoisted_14, [\n                                            _createElementVNode(\"i\", {\n                                                class: _normalizeClass(['fas', isDark.value ? 'fa-sun text-yellow-300' : 'fa-moon text-blue-300'])\n                                            }, null, 2 /* CLASS */),\n                                            _createElementVNode(\"span\", null, _toDisplayString(isDark.value ? '' : ''), 1 /* TEXT */)\n                                        ]),\n                                        _cache[9] || (_cache[9] = _createElementVNode(\"i\", { class: \"fas fa-chevron-right text-xs text-slate-500\" }, null, -1 /* CACHED */))\n                                    ]),\n                                    _createElementVNode(\"button\", {\n                                        class: \"flex items-center justify-between rounded-xl border border-slate-700/50 bg-slate-900/30 px-3 py-2 text-left text-sm text-slate-200 hover:border-blue-500/30 hover:bg-slate-800/60\",\n                                        onClick: refreshApp\n                                    }, [...(_cache[10] || (_cache[10] = [\n                                            _createElementVNode(\"span\", { class: \"flex items-center gap-2\" }, [\n                                                _createElementVNode(\"i\", { class: \"fas fa-sync-alt text-green-300\" }),\n                                                _createElementVNode(\"span\", null, \"\")\n                                            ], -1 /* CACHED */),\n                                            _createElementVNode(\"i\", { class: \"fas fa-chevron-right text-xs text-slate-500\" }, null, -1 /* CACHED */)\n                                        ]))]),\n                                    _createElementVNode(\"button\", {\n                                        class: \"flex items-center justify-between rounded-xl border border-slate-700/50 bg-slate-900/30 px-3 py-2 text-left text-sm text-slate-200 hover:border-blue-500/30 hover:bg-slate-800/60\",\n                                        onClick: regenerateHomeShops\n                                    }, [...(_cache[11] || (_cache[11] = [\n                                            _createElementVNode(\"span\", { class: \"flex items-center gap-2\" }, [\n                                                _createElementVNode(\"i\", { class: \"fas fa-wand-magic-sparkles text-purple-300\" }),\n                                                _createElementVNode(\"span\", null, \"\")\n                                            ], -1 /* CACHED */),\n                                            _createElementVNode(\"i\", { class: \"fas fa-chevron-right text-xs text-slate-500\" }, null, -1 /* CACHED */)\n                                        ]))])\n                                ])\n                            ])\n                        ])\n                    ]),\n                    _createElementVNode(\"div\", { class: \"flex items-center justify-between gap-2 border-t border-slate-700/50 px-4 py-3\" }, [\n                        _cache[13] || (_cache[13] = _createElementVNode(\"div\", { class: \"text-[11px] text-slate-500\" }, \"\", -1 /* CACHED */)),\n                        _createElementVNode(\"button\", {\n                            class: \"rounded-xl border border-slate-700/50 bg-slate-800/50 px-3 py-2 text-sm text-slate-200 hover:bg-slate-700/50\",\n                            onClick: close\n                        }, \"  \")\n                    ])\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./PlayPanelsModal.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PlayPanelsModal.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"flex min-w-0 items-center gap-2 rounded-2xl border border-slate-700/50 bg-slate-950/40 px-3 py-2 backdrop-blur\" };\nconst _hoisted_2 = { class: \"min-w-0 flex-1\" };\nconst _hoisted_3 = { class: \"flex min-w-0 items-center gap-2\" };\nconst _hoisted_4 = { class: \"inline-flex min-w-0 items-center gap-2 rounded-full border border-slate-700/50 bg-slate-900/40 px-2 py-0.5 text-[11px] text-slate-200\" };\nconst _hoisted_5 = { class: \"truncate\" };\nconst _hoisted_6 = { class: \"truncate text-xs text-slate-400\" };\nconst _hoisted_7 = { class: \"mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-300\" };\nconst _hoisted_8 = { class: \"inline-flex items-center gap-1 rounded-full border border-slate-700/50 bg-slate-900/40 px-2 py-0.5\" };\nconst _hoisted_9 = { class: \"inline-flex min-w-0 items-center gap-1 rounded-full border border-slate-700/50 bg-slate-900/40 px-2 py-0.5\" };\nconst _hoisted_10 = { class: \"truncate\" };\nconst _hoisted_11 = { class: \"inline-flex items-center gap-1 rounded-full border border-slate-700/50 bg-slate-900/40 px-2 py-0.5\" };\nconst _hoisted_12 = [\"disabled\"];\nimport { computed, onMounted, onUnmounted, ref } from 'vue';\nimport { filterActiveOrders, loadOrdersFromMVU } from '../shared/serviceOrders';\nimport { getNestedValue } from '../utils';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'RpgHud',\n    setup(__props) {\n        const loading = ref(false);\n        const currentGirl = ref(null);\n        const scene = ref('');\n        const balance = ref(null);\n        const heartbeat = ref(null);\n        const sceneText = computed(() => scene.value || 'RPG  ');\n        const currentGirlText = computed(() => {\n            if (!currentGirl.value)\n                return '';\n            const name = getNestedValue(currentGirl.value, '.', '');\n            const identity = getNestedValue(currentGirl.value, '.', '');\n            return identity ? `${name}  ${identity}` : String(name);\n        });\n        const heartbeatText = computed(() => {\n            const v = heartbeat.value ?? getNestedValue(currentGirl.value, '.', '-');\n            return v === null || v === undefined || v === '' ? '-' : String(v);\n        });\n        const balanceText = computed(() => {\n            const v = balance.value;\n            if (v === null || v === undefined || v === '')\n                return '';\n            const n = typeof v === 'number' ? v : Number(String(v));\n            return Number.isFinite(n) ? `${n}` : `${String(v)}`;\n        });\n        const focusText = computed(() => {\n            const orderStatus = getNestedValue(currentGirl.value, 'status', '') || getNestedValue(currentGirl.value, '.', '');\n            const status = String(orderStatus || '').trim();\n            return status ? `${status}` : '  ';\n        });\n        function safeGetMvuSnapshot() {\n            try {\n                const message_id = getCurrentMessageId?.() ?? 'latest';\n                if (typeof waitGlobalInitialized === 'function') {\n                    try {\n                        waitGlobalInitialized('Mvu');\n                    }\n                    catch {\n                        // ignore\n                    }\n                }\n                if (typeof Mvu !== 'undefined' && Mvu?.getMvuData) {\n                    return Mvu.getMvuData({ type: 'message', message_id });\n                }\n                return getVariables({ type: 'message', message_id });\n            }\n            catch {\n                return null;\n            }\n        }\n        async function refresh() {\n            if (loading.value)\n                return;\n            loading.value = true;\n            try {\n                const orders = await loadOrdersFromMVU();\n                const active = filterActiveOrders(orders);\n                currentGirl.value = active[0] ?? null;\n                const snap = safeGetMvuSnapshot();\n                const stat = snap?.stat_data || snap || {};\n                scene.value = getNestedValue(stat, '.', '') || getNestedValue(stat, '.', '');\n                balance.value = getNestedValue(stat, '.', null);\n                heartbeat.value = getNestedValue(currentGirl.value, '.', null);\n            }\n            finally {\n                loading.value = false;\n            }\n        }\n        let timer = null;\n        onMounted(() => {\n            refresh().catch(() => { });\n            //  HUD  iframe \n            timer = window.setInterval(() => refresh().catch(() => { }), 20000);\n        });\n        onUnmounted(() => {\n            if (timer)\n                window.clearInterval(timer);\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _createElementVNode(\"span\", _hoisted_4, [\n                            _cache[0] || (_cache[0] = _createElementVNode(\"span\", { class: \"h-1.5 w-1.5 rounded-full bg-emerald-400\" }, null, -1 /* CACHED */)),\n                            _createElementVNode(\"span\", _hoisted_5, _toDisplayString(sceneText.value), 1 /* TEXT */)\n                        ]),\n                        _createElementVNode(\"span\", _hoisted_6, _toDisplayString(focusText.value), 1 /* TEXT */)\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_7, [\n                        _createElementVNode(\"span\", _hoisted_8, [\n                            _cache[1] || (_cache[1] = _createElementVNode(\"i\", { class: \"fas fa-coins text-yellow-300\" }, null, -1 /* CACHED */)),\n                            _createElementVNode(\"span\", null, _toDisplayString(balanceText.value), 1 /* TEXT */)\n                        ]),\n                        _createElementVNode(\"span\", _hoisted_9, [\n                            _cache[2] || (_cache[2] = _createElementVNode(\"i\", { class: \"fas fa-user-shield text-blue-300\" }, null, -1 /* CACHED */)),\n                            _createElementVNode(\"span\", _hoisted_10, _toDisplayString(currentGirlText.value), 1 /* TEXT */)\n                        ]),\n                        _createElementVNode(\"span\", _hoisted_11, [\n                            _cache[3] || (_cache[3] = _createElementVNode(\"i\", { class: \"fas fa-heartbeat text-red-300\" }, null, -1 /* CACHED */)),\n                            _createElementVNode(\"span\", null, _toDisplayString(heartbeatText.value), 1 /* TEXT */)\n                        ])\n                    ])\n                ]),\n                _createElementVNode(\"button\", {\n                    class: \"shrink-0 rounded-xl border border-slate-700/50 bg-slate-900/40 px-3 py-2 text-xs text-slate-200 hover:border-blue-500/30 hover:bg-slate-800/60\",\n                    disabled: loading.value,\n                    onClick: refresh,\n                    title: \"\"\n                }, [\n                    _createElementVNode(\"i\", {\n                        class: _normalizeClass([\"fas fa-sync-alt\", { 'fa-spin': loading.value }])\n                    }, null, 2 /* CLASS */),\n                    _cache[4] || (_cache[4] = _createElementVNode(\"span\", { class: \"ml-2 hidden sm:inline\" }, \"\", -1 /* CACHED */))\n                ], 8 /* PROPS */, _hoisted_12)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./RpgHud.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./RpgHud.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createVNode as _createVNode, unref as _unref, openBlock as _openBlock, createBlock as _createBlock, Fragment as _Fragment, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"relative flex h-full min-h-0 w-full flex-col gap-3 overflow-hidden p-3 sm:p-4\" };\nconst _hoisted_2 = { class: \"flex items-center gap-2\" };\nconst _hoisted_3 = { class: \"min-h-0 min-w-0 flex-1\" };\nimport Play from './components/Play.vue';\nimport HistoryOverlay from './components/HistoryOverlay.vue';\nimport PlayPanelsModal from './components/PlayPanelsModal.vue';\nimport RpgHud from './components/RpgHud.vue';\nimport { historyOverlayOpen, playPanelsOpen } from './shared/uiState';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Dashboard',\n    setup(__props) {\n        function openHistory() {\n            historyOverlayOpen.value = true;\n        }\n        function openPanels() {\n            playPanelsOpen.value = true;\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(_Fragment, null, [\n                _createElementVNode(\"div\", _hoisted_1, [\n                    _createCommentVNode(\" Compact HUD / Actions \"),\n                    _createElementVNode(\"div\", _hoisted_2, [\n                        _createElementVNode(\"button\", {\n                            class: \"shrink-0 rounded-2xl border border-blue-500/20 bg-slate-900/40 px-3 py-2 text-sm text-slate-100 hover:border-blue-500/40 hover:bg-slate-800/60\",\n                            onClick: openPanels,\n                            title: \"///\"\n                        }, [...(_cache[0] || (_cache[0] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-bars\" }, null, -1 /* CACHED */),\n                                _createElementVNode(\"span\", { class: \"ml-2 hidden sm:inline\" }, \"\", -1 /* CACHED */)\n                            ]))]),\n                        _createVNode(RpgHud, { class: \"min-w-0 flex-1\" }),\n                        _createElementVNode(\"button\", {\n                            class: \"shrink-0 rounded-2xl border border-slate-700/50 bg-slate-900/40 px-3 py-2 text-sm text-slate-200 hover:border-blue-500/30 hover:bg-slate-800/60\",\n                            onClick: openHistory,\n                            title: \"\"\n                        }, [...(_cache[1] || (_cache[1] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-history text-blue-300\" }, null, -1 /* CACHED */),\n                                _createElementVNode(\"span\", { class: \"ml-2 hidden md:inline\" }, \"\", -1 /* CACHED */)\n                            ]))])\n                    ]),\n                    _createCommentVNode(\" Main narrative area (maximize) \"),\n                    _createElementVNode(\"main\", _hoisted_3, [\n                        _createVNode(Play, { class: \"h-full\" })\n                    ])\n                ]),\n                (_unref(playPanelsOpen))\n                    ? (_openBlock(), _createBlock(PlayPanelsModal, { key: 0 }))\n                    : _createCommentVNode(\"v-if\", true),\n                _createVNode(HistoryOverlay)\n            ], 64 /* STABLE_FRAGMENT */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./Dashboard.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Dashboard.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","module.exports = z;","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = { class: \"app-view active\" };\nconst _hoisted_2 = { class: \"app-content\" };\nconst _hoisted_3 = { class: \"shop-list\" };\nconst _hoisted_4 = {\n    key: 0,\n    class: \"empty-state\"\n};\nconst _hoisted_5 = {\n    key: 1,\n    class: \"shop-list-items\"\n};\nconst _hoisted_6 = [\"onClick\"];\nconst _hoisted_7 = { class: \"avatar-text\" };\nconst _hoisted_8 = {\n    key: 1,\n    class: \"fas fa-store\"\n};\nconst _hoisted_9 = { class: \"info\" };\nconst _hoisted_10 = { class: \"name\" };\nconst _hoisted_11 = { class: \"desc\" };\nconst _hoisted_12 = { class: \"slogan-text\" };\nconst _hoisted_13 = {\n    key: 0,\n    class: \"package-count\"\n};\nconst _hoisted_14 = [\"onClick\"];\nimport { onMounted, onUnmounted, ref } from 'vue';\nimport { shopStoreMvu } from './shared/shopStoreMvu';\nconst MAX_IMPORT_ITEMS = 200;\nconst MAX_IMPORT_SIZE_MB = 5;\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Discover',\n    setup(__props) {\n        const shops = ref([]);\n        const fileInput = ref(null);\n        async function loadShops() {\n            const data = await shopStoreMvu.getShops();\n            shops.value = Array.isArray(data) ? data : [];\n        }\n        const onShopCacheUpdated = () => {\n            void loadShops();\n        };\n        // \n        onMounted(async () => {\n            await loadShops();\n            window.addEventListener('shop:cache:updated', onShopCacheUpdated);\n        });\n        onUnmounted(() => {\n            window.removeEventListener('shop:cache:updated', onShopCacheUpdated);\n        });\n        function deleteShop(shop, idx) {\n            const id = String(shop?.id ?? shop?.shop_id ?? idx);\n            shopStoreMvu.deleteShop(id);\n            toastr.success(' MVU', '');\n        }\n        function triggerImport() {\n            fileInput.value?.click();\n        }\n        function handleFileChange(event) {\n            const input = event.target;\n            const files = input.files;\n            if (!files || files.length === 0)\n                return;\n            const file = files[0];\n            if (file.size > MAX_IMPORT_SIZE_MB * 1024 * 1024) {\n                toastr.error(`>${MAX_IMPORT_SIZE_MB}MB`, '');\n                input.value = '';\n                return;\n            }\n            const reader = new FileReader();\n            reader.onload = () => {\n                try {\n                    const text = String(reader.result || '');\n                    const parsed = JSON.parse(text);\n                    const list = Array.isArray(parsed) ? parsed : parsed?. || parsed?.shops || [];\n                    const safeList = Array.isArray(list) ? list.slice(0, MAX_IMPORT_ITEMS) : [];\n                    const { ok, saved } = shopStoreMvu.saveShops(safeList);\n                    if (!ok) {\n                        toastr.error('', '');\n                    }\n                    else {\n                        toastr.success(` ${saved} `, '');\n                    }\n                    void loadShops();\n                }\n                catch (err) {\n                    toastr.error(err?.message || '', '');\n                }\n                finally {\n                    input.value = '';\n                }\n            };\n            reader.readAsText(file, 'utf-8');\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(_Fragment, null, [\n                _createElementVNode(\"div\", _hoisted_1, [\n                    _createElementVNode(\"div\", { class: \"app-header\" }, [\n                        _createElementVNode(\"div\", { class: \"title\" }, [\n                            _cache[0] || (_cache[0] = _createElementVNode(\"span\", null, \"?? \", -1 /* CACHED */)),\n                            _createElementVNode(\"button\", {\n                                class: \"import-btn\",\n                                onClick: triggerImport\n                            }, \"JSON\")\n                        ])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_2, [\n                        _createElementVNode(\"div\", _hoisted_3, [\n                            (shops.value.length === 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [...(_cache[1] || (_cache[1] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-search\" }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"p\", null, \"AI\", -1 /* CACHED */)\n                                    ]))]))\n                                : (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(shops.value, (shop, idx) => {\n                                        return (_openBlock(), _createElementBlock(\"div\", {\n                                            key: shop.id || shop.shop_id || idx,\n                                            class: \"shop-card\",\n                                            onClick: ($event) => (_ctx.$router.push(`/shop/${shop.id || shop.shop_id || idx}`))\n                                        }, [\n                                            _createElementVNode(\"div\", _hoisted_7, [\n                                                ((shop.packages || []).find((p) => p.icon))\n                                                    ? (_openBlock(), _createElementBlock(\"i\", {\n                                                        key: 0,\n                                                        class: _normalizeClass((shop.packages || []).find((p) => p.icon).icon)\n                                                    }, null, 2 /* CLASS */))\n                                                    : (_openBlock(), _createElementBlock(\"i\", _hoisted_8))\n                                            ]),\n                                            _createElementVNode(\"div\", _hoisted_9, [\n                                                _createElementVNode(\"div\", _hoisted_10, _toDisplayString(shop.shopname || shop.name || ''), 1 /* TEXT */),\n                                                _createElementVNode(\"div\", _hoisted_11, [\n                                                    _createElementVNode(\"span\", _hoisted_12, _toDisplayString((shop.shoptags || []).join(' / ') || ''), 1 /* TEXT */),\n                                                    (shop.packages && shop.packages.length > 0)\n                                                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_13, [\n                                                            _cache[2] || (_cache[2] = _createElementVNode(\"i\", { class: \"fas fa-layer-group\" }, null, -1 /* CACHED */)),\n                                                            _createTextVNode(\" \" + _toDisplayString(shop.packages.length) + \"  \", 1 /* TEXT */)\n                                                        ]))\n                                                        : _createCommentVNode(\"v-if\", true)\n                                                ])\n                                            ]),\n                                            _createElementVNode(\"button\", {\n                                                class: \"delete-btn\",\n                                                onClick: _withModifiers(($event) => (deleteShop(shop, idx)), [\"stop\"])\n                                            }, [...(_cache[3] || (_cache[3] = [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-trash\" }, null, -1 /* CACHED */)\n                                                ]))], 8 /* PROPS */, _hoisted_14)\n                                        ], 8 /* PROPS */, _hoisted_6));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ]))\n                        ])\n                    ])\n                ]),\n                _createElementVNode(\"input\", {\n                    ref_key: \"fileInput\",\n                    ref: fileInput,\n                    class: \"hidden-input\",\n                    type: \"file\",\n                    accept: \".json,application/json\",\n                    onChange: handleFileChange\n                }, null, 544 /* NEED_HYDRATION, NEED_PATCH */)\n            ], 64 /* STABLE_FRAGMENT */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./Discover.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Discover.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Discover.vue?vue&type=style&index=0&id=28ce63c0&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-28ce63c0\"]])\n\nexport default __exports__","import _ from 'lodash';\nimport { z } from 'zod';\n\n// ---------------------\n// 1.  Schema\n// ---------------------\n\n// \nexport const INITIAL_SHOP_LIST = [\n  {\n    shopname: '',\n    shop_id: 20241222001,\n    shoptags: ['', '', ''],\n    packages: [\n      {\n        name: 'OL',\n        price: 588,\n        stars: 4.7,\n        icon: 'fas fa-subway',\n        tags: ['', '', ''],\n        image1:\n          '###26Leica M1035mm4K###',\n        image2:\n          '###8K###',\n        image3:\n          '###8K###',\n        description:\n          'OL',\n        content: ['', '', ''],\n        reviews: [\n          '...............',\n          '\"\"',\n        ],\n      },\n      {\n        name: '',\n        price: 388,\n        stars: 4.5,\n        icon: 'fas fa-broom',\n        tags: ['', '', ''],\n        image1:\n          '###42Canon 5D Mark IV50mm6K###',\n        image2:\n          '###8K###',\n        image3:\n          '###8K###',\n        description:\n          '',\n        content: ['', '', ''],\n        reviews: [\n          '............',\n          '\"\"',\n        ],\n      },\n      {\n        name: '',\n        price: 688,\n        stars: 4.8,\n        icon: 'fas fa-coffee',\n        tags: ['', '', ''],\n        image1:\n          '###24Sony A7R IV85mm f/1.48K###',\n        image2:\n          '###8K###',\n        image3:\n          '###V8K###',\n        description:\n          '',\n        content: ['', '', ''],\n        reviews: [\n          '.........',\n          '\"\"',\n        ],\n      },\n    ],\n  },\n  {\n    shopname: '',\n    shop_id: 20241222002,\n    shoptags: ['', '', ''],\n    packages: [\n      {\n        name: '',\n        price: 499,\n        stars: 4.8,\n        icon: 'fas fa-shopping-basket',\n        tags: ['', '', ''],\n        image1:\n          '###19Fujifilm X-T435mm4K###',\n        image2:\n          '###8K###',\n        image3:\n          '###8K###',\n        description:\n          '\"\"',\n        content: ['', '', ''],\n        reviews: ['............', '\"\"'],\n      },\n      {\n        name: '',\n        price: 666,\n        stars: 4.6,\n        icon: 'fas fa-box-open',\n        tags: ['', '', ''],\n        image1:\n          '###28iPhone 13 Pro4K###',\n        image2:\n          '###8K###',\n        image3:\n          '###8K###',\n        description:\n          '',\n        content: ['', '', ''],\n        reviews: ['...............', '\"\"'],\n      },\n      {\n        name: '',\n        price: 555,\n        stars: 4.9,\n        icon: 'fas fa-running',\n        tags: ['', '', ''],\n        image1:\n          '###30Nikon D85070-200mm8K###',\n        image2:\n          '###\"W\"8K###',\n        image3:\n          '###8K###',\n        description:\n          '',\n        content: ['', '', ''],\n        reviews: [\n          '............',\n          '\"\"',\n        ],\n      },\n    ],\n  },\n];\n\n//  Schema ( Schema )\nexport const ShopItemSchema = z\n  .object({\n    shopname: z.string(),\n    shop_id: z.coerce.number(),\n    shoptags: z.array(z.string()),\n    packages: z\n      .array(\n        z\n          .object({\n            name: z.string(),\n            price: z.coerce.number(),\n            stars: z.coerce.number(),\n            icon: z.string(),\n            tags: z.array(z.string()),\n            image1: z.string(),\n            image2: z.string(),\n            image3: z.string(),\n            description: z.string(),\n            content: z.array(z.string()),\n            reviews: z.array(z.string()),\n          })\n          .strict(),\n      )\n      .describe(''),\n  })\n  .strict();\n\n// ---------------------\n// 2.  Schema (Message Scope / stat_data)\n// ---------------------\nexport const Schema = z.object({\n  : z\n    .object({\n      : z.coerce.number(),\n      : z.coerce.number(),\n    })\n    .strict(),\n  : z\n    .object({\n      : z\n        .object({\n          id: z.string(),\n          : z.enum(['', '']),\n          : z\n            .object({\n              : z.string(),\n              : z.coerce.number(),\n              : z.string(),\n              : z.string(),\n            })\n            .strict(),\n          : z.record(z.string(), z.string()),\n          : z\n            .object({\n              : z.string(),\n              : z.coerce.number(),\n              : z.coerce.number(),\n              : z.array(z.string()),\n              : z.string(),\n            })\n            .strict(),\n          : z\n            .object({\n              : z.string(),\n              : z.coerce.number().transform(v => _.clamp(v, 0, 100)),\n              : z.coerce.number().transform(v => _.clamp(v, 0, 100)),\n              : z.string(),\n            })\n            .strict(),\n          : z\n            .object({\n              : z.object({ : z.string(), : z.string() }).strict(),\n              : z.object({ : z.string() }).strict(),\n              : z.string(),\n              : z.string(),\n              : z.string(),\n            })\n            .strict(),\n          : z\n            .object({\n              : z.enum(['', '']),\n              : z.coerce.number(),\n              : z.string(),\n              : z.coerce.number().transform(v => _.clamp(v, 0, 100)),\n              : z.coerce.number(),\n            })\n            .strict(),\n          : z\n            .object({\n              : z.coerce.number().transform(v => _.clamp(v, 60, 200)),\n              : z.coerce.number(),\n              : z.coerce.number(),\n            })\n            .strict(),\n        })\n        .strict(),\n    })\n    .strict(),\n  : z\n    .object({\n      : z.boolean(),\n      : z.boolean(),\n      : z.string(),\n      : z.string(),\n    })\n    .strict(),\n  : z.array(z.string()).default(['zod']),\n  : z\n    .record(\n      z.string().describe('ID'),\n      z\n        .object({\n          id: z.string(),\n          : z.enum(['', '']),\n          : z\n            .object({\n              : z.string(),\n              : z.coerce.number(),\n              : z.string(),\n              : z.string(),\n            })\n            .strict(),\n          : z.record(z.string(), z.string()),\n          : z\n            .object({\n              : z.string(),\n              : z.coerce.number(),\n              : z.coerce.number(),\n              : z.array(z.string()),\n              : z.string(),\n            })\n            .strict(),\n          : z\n            .object({\n              : z.string(),\n              : z.coerce.number().transform(v => _.clamp(v, 0, 100)),\n              : z.coerce.number().transform(v => _.clamp(v, 0, 100)),\n              : z.string(),\n            })\n            .strict(),\n          : z\n            .object({\n              : z.object({ : z.string(), : z.string() }).strict(),\n              : z.object({ : z.string() }).strict(),\n              : z.string(),\n              : z.string(),\n              : z.string(),\n            })\n            .strict(),\n          : z\n            .object({\n              : z.enum(['', '']),\n              : z.coerce.number(),\n              : z.string(),\n              : z.coerce.number().transform(v => _.clamp(v, 0, 100)),\n              : z.coerce.number(),\n            })\n            .strict(),\n          : z\n            .object({\n              : z.coerce.number().transform(v => _.clamp(v, 60, 200)),\n              : z.coerce.number(),\n              : z.coerce.number(),\n            })\n            .strict(),\n        })\n        .strict(),\n    )\n    .prefault({}),\n  : z.array(ShopItemSchema).default(INITIAL_SHOP_LIST),\n});\n\nexport type Schema = z.output<typeof Schema>;\n","// Tavern Helper globals\ndeclare function getVariables(scope: { type: string; script_id?: string; message_id?: number | string }): any;\n// replaceVariables \ndeclare function updateVariablesWith(\n  updateFn: (vars: Record<string, any>) => Record<string, any>,\n  scope: { type: string; script_id?: string; message_id?: number | string },\n): void;\ndeclare function insertOrAssignVariables(\n  variables: Record<string, any>,\n  scope: { type: string; script_id?: string; message_id?: number | string },\n): void;\n//  updateVariablesWith / insertOrAssignVariables\ndeclare function replaceVariables(\n  variables: any,\n  scope: { type: string; script_id?: string; message_id?: number | string },\n): void;\ndeclare function getCurrentMessageId(): number;\ndeclare function waitGlobalInitialized(name: string): Promise<void> | void;\ndeclare const Mvu: any;\n\nimport { Schema, ShopItemSchema } from '../..//schema';\n\n//  MVUinitvar.yaml  src////initvar.yaml\n//  stat_data.\nexport type MvuShop = (typeof Schema)['_output'][''][number];\n\nexport interface AppShop extends MvuShop {\n  id?: string; // \n}\n\nfunction normalizeToArray(value: any): MvuShop[] {\n  if (Array.isArray(value)) return value as MvuShop[];\n  if (value && typeof value === 'object') return Object.values(value);\n  return [];\n}\n\n//  ID MVU Schema\nfunction addViewIds(shops: MvuShop[]): AppShop[] {\n  return (shops || []).map((shop, sIdx) => {\n    const rawShopId = (shop as any).shop_id ?? (shop as any).id ?? `shop_${sIdx}`;\n    const shopId = String(rawShopId);\n    const packages = Array.isArray((shop as any).packages)\n      ? (shop as any).packages.map((pkg: any, pIdx: number) => {\n          const pkgId = pkg?.id ?? `${shopId}_pkg_${pIdx}`;\n          return { ...pkg, id: String(pkgId), shop_id: shopId };\n        })\n      : [];\n    return {\n      ...(shop as any),\n      id: String((shop as any).id ?? shopId),\n      shop_id: (shop as any).shop_id,\n      packages,\n    };\n  });\n}\n\nexport const shopStoreMvu = {\n  getShops(): AppShop[] {\n    try {\n      const message_id = getCurrentMessageId?.() ?? 'latest';\n\n      if (typeof waitGlobalInitialized === 'function') {\n        try {\n          waitGlobalInitialized('Mvu');\n        } catch {\n          // ignore wait errors\n        }\n      }\n\n      const data = ((): any => {\n        if (typeof Mvu !== 'undefined' && Mvu?.getMvuData) {\n          return Mvu.getMvuData({ type: 'message', message_id });\n        }\n        return getVariables({ type: 'message', message_id });\n      })();\n\n      const statData = data?.stat_data || data || {};\n      const parsed = Schema.safeParse(statData);\n      const shopList = parsed.success ? parsed.data. : normalizeToArray(statData['']);\n      return addViewIds(shopList);\n    } catch (e) {\n      console.error('[ShopStoreMVU] getShops failed', e);\n      return [];\n    }\n  },\n\n  saveShops(rawShops: any): { ok: boolean; saved: number } {\n    try {\n      const message_id = getCurrentMessageId?.() ?? 'latest';\n      const shopsArray = normalizeToArray(rawShops);\n\n      // / Schema \n      const safeShops = shopsArray\n        .map(shop => ShopItemSchema.safeParse(shop))\n        .filter(r => r.success)\n        .map(r => r.data);\n\n      if (safeShops.length === 0) {\n        console.warn('[ShopStoreMVU] saveShops skipped: no valid shops');\n        return { ok: false, saved: 0 };\n      }\n\n      const scope = { type: 'message', message_id } as const;\n\n      if (typeof updateVariablesWith === 'function') {\n        updateVariablesWith((vars: Record<string, any>) => {\n          const next = vars && typeof vars === 'object' ? vars : {};\n          const stat = next.stat_data && typeof next.stat_data === 'object' ? next.stat_data : {};\n          next.stat_data = { ...stat, : safeShops };\n          return next;\n        }, scope);\n      } else if (typeof insertOrAssignVariables === 'function') {\n        const current = getVariables(scope) || {};\n        const stat = current.stat_data && typeof current.stat_data === 'object' ? current.stat_data : {};\n        const nextStat = { ...stat, : safeShops };\n        insertOrAssignVariables({ stat_data: nextStat }, scope);\n      } else {\n        // \n        const current = getVariables(scope) || {};\n        const stat = current.stat_data && typeof current.stat_data === 'object' ? current.stat_data : {};\n        const nextStat = { ...stat, : safeShops };\n        replaceVariables({ ...(current || {}), stat_data: nextStat }, scope);\n      }\n\n      window.dispatchEvent(new CustomEvent('shop:cache:updated'));\n      return { ok: true, saved: safeShops.length };\n    } catch (e) {\n      console.error('[ShopStoreMVU] saveShops failed', e);\n      return { ok: false, saved: 0 };\n    }\n  },\n\n  deleteShop(id: string) {\n    try {\n      const newShops = this.getShops().filter((s: any) => String((s as any).id ?? '') !== String(id));\n      this.saveShops(newShops);\n    } catch (e) {\n      console.error('[ShopStoreMVU] deleteShop failed', e);\n    }\n  },\n};\n","module.exports = VueRouter;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = $;","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeStyle as _normalizeStyle, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = { class: \"splash-content\" };\nconst _hoisted_2 = { class: \"slogan-section\" };\nconst _hoisted_3 = { class: \"main-slogan\" };\nconst _hoisted_4 = { class: \"footer-section\" };\nconst _hoisted_5 = { class: \"loading-indicator\" };\nconst _hoisted_6 = { class: \"loading-dots\" };\nimport { onMounted, ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { navigateToDefaultPage } from './utils';\n// \nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'SplashScreen',\n    setup(__props) {\n        const slogan = ref('');\n        const isFading = ref(false);\n        const router = useRouter();\n        // \n        async function skipSplash() {\n            try {\n                isFading.value = true;\n                // \n                const targetPath = await navigateToDefaultPage();\n                console.log(`[] : ${targetPath}`);\n                setTimeout(() => {\n                    router.push(targetPath);\n                }, 300);\n            }\n            catch (error) {\n                console.error('[] :', error);\n                // \n                setTimeout(() => {\n                    router.push('/home');\n                }, 300);\n            }\n        }\n        onMounted(async () => {\n            // 3\n            setTimeout(() => {\n                skipSplash();\n            }, 3000); // 3\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: \"splash-screen\",\n                onClick: skipSplash\n            }, [\n                _createCommentVNode(\"  \"),\n                _cache[4] || (_cache[4] = _createElementVNode(\"div\", { class: \"bg-decoration\" }, [\n                    _createElementVNode(\"div\", { class: \"circle-bg circle-1\" }),\n                    _createElementVNode(\"div\", { class: \"circle-bg circle-2\" }),\n                    _createElementVNode(\"div\", { class: \"circle-bg circle-3\" })\n                ], -1 /* CACHED */)),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_1, [\n                    _createCommentVNode(\" Logo \"),\n                    _cache[3] || (_cache[3] = _createStaticVNode(\"<div class=\\\"logo-section\\\" data-v-9ede8fa6><div class=\\\"logo-container\\\" data-v-9ede8fa6><div class=\\\"logo-icon\\\" data-v-9ede8fa6><i class=\\\"fas fa-heart\\\" data-v-9ede8fa6></i></div><div class=\\\"logo-text\\\" data-v-9ede8fa6><h1 class=\\\"brand-name\\\" data-v-9ede8fa6></h1><p class=\\\"brand-subtitle\\\" data-v-9ede8fa6>Mei Ren Tuan</p></div></div></div>\", 1)),\n                    _createCommentVNode(\" Slogan \"),\n                    _createElementVNode(\"div\", _hoisted_2, [\n                        _createElementVNode(\"p\", _hoisted_3, _toDisplayString(slogan.value), 1 /* TEXT */),\n                        _cache[0] || (_cache[0] = _createElementVNode(\"div\", { class: \"slogan-decoration\" }, [\n                            _createElementVNode(\"div\", { class: \"decoration-line\" }),\n                            _createElementVNode(\"i\", { class: \"fas fa-star\" }),\n                            _createElementVNode(\"div\", { class: \"decoration-line\" })\n                        ], -1 /* CACHED */))\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_4, [\n                        _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"version-info\" }, [\n                            _createElementVNode(\"span\", null, \"v3.0.0\")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"div\", {\n                            class: _normalizeClass([\"skip-button\", { 'fade-out': isFading.value }]),\n                            onClick: skipSplash\n                        }, [...(_cache[1] || (_cache[1] = [\n                                _createElementVNode(\"span\", null, \"\", -1 /* CACHED */),\n                                _createElementVNode(\"i\", { class: \"fas fa-chevron-right\" }, null, -1 /* CACHED */)\n                            ]))], 2 /* CLASS */)\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_5, [\n                    _createElementVNode(\"div\", _hoisted_6, [\n                        (_openBlock(), _createElementBlock(_Fragment, null, _renderList(3, (i) => {\n                            return _createElementVNode(\"span\", {\n                                key: i,\n                                class: \"dot\",\n                                style: _normalizeStyle({ animationDelay: `${(i - 1) * 0.2}s` })\n                            }, null, 4 /* STYLE */);\n                        }), 64 /* STABLE_FRAGMENT */))\n                    ])\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./SplashScreen.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SplashScreen.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./SplashScreen.vue?vue&type=style&index=0&id=9ede8fa6&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-9ede8fa6\"]])\n\nexport default __exports__","import { shopStoreMvu } from '../../../APP/shared/shopStoreMvu';\nimport { InteractionAdapter } from '../types';\n\n// \ndeclare const Mvu: any;\ndeclare const waitGlobalInitialized: (name: string) => Promise<void>;\ndeclare const injectPrompts: any;\ndeclare const uninjectPrompts: any;\n\ninterface ShopGenerationInput {\n  keyword: string;\n}\n\ninterface ShopGenerationParsedData {\n  jsonPatch?: any[];\n  analysis?: string;\n}\n\nexport class ShopGenerationAdapter implements InteractionAdapter<ShopGenerationInput, ShopGenerationParsedData> {\n  async buildPrompt(input: ShopGenerationInput): Promise<string> {\n    // \n    // AI\n    const injectionId = `shop-generation-${Date.now()}`;\n\n    injectPrompts(\n      [\n        {\n          id: injectionId,\n          position: 'none', // AI\n          depth: 0,\n          role: 'system',\n          content: '[mvu_update] [mvu_update]',\n          should_scan: true, // \n        },\n      ],\n      { once: true },\n    ); // \n\n    // \n    return `${input.keyword}\\n\\n`;\n  }\n\n  async parseResponse(rawText: string): Promise<ShopGenerationParsedData> {\n    console.log('[ShopGenerationAdapter] :', rawText.length);\n    console.log('[ShopGenerationAdapter] 500:', rawText.substring(0, 500));\n\n    const startTag = '[]';\n    const endTag = '[]';\n\n    const startIndex = rawText.indexOf(startTag);\n    const endIndex = rawText.indexOf(endTag);\n\n    console.log('[ShopGenerationAdapter]  - :', startIndex, ':', endIndex);\n\n    if (startIndex === -1 || endIndex === -1) {\n      console.warn('[ShopGenerationAdapter] [][]');\n      console.warn('[ShopGenerationAdapter] :', rawText);\n      return {};\n    }\n\n    const content = rawText.substring(startIndex + startTag.length, endIndex);\n    console.log('[ShopGenerationAdapter] :', content.length);\n    console.log('[ShopGenerationAdapter] :', content);\n\n    //  json_patch\n    const jsonPatchMatch = content.match(/<json_patch>([\\s\\S]*?)<\\/json_patch>/);\n    console.log('[ShopGenerationAdapter] JSON Patch :', jsonPatchMatch ? '' : '');\n\n    let jsonPatch = null;\n\n    if (jsonPatchMatch && jsonPatchMatch[1]) {\n      console.log('[ShopGenerationAdapter] JSON Patch :', jsonPatchMatch[1]);\n      try {\n        jsonPatch = JSON.parse(jsonPatchMatch[1].trim());\n        console.log('[ShopGenerationAdapter] JSON Patch :', jsonPatch);\n      } catch (e) {\n        console.error('[ShopGenerationAdapter] JSON Patch ', e);\n        console.error('[ShopGenerationAdapter]  JSON :', jsonPatchMatch[1]);\n      }\n    }\n\n    // \n    const analysisMatch = content.match(/<update_analysis>([\\s\\S]*?)<\\/update_analysis>/);\n    const analysis = analysisMatch ? analysisMatch[1].trim() : undefined;\n\n    return {\n      jsonPatch,\n      analysis,\n    };\n  }\n\n  async handleSideEffects(parsedData: ShopGenerationParsedData): Promise<void> {\n    //  MVU  <json_patch>  stat_data\n    if (!parsedData.jsonPatch || !Array.isArray(parsedData.jsonPatch)) {\n      console.warn('[ShopGenerationAdapter]  JSON Patch');\n      return;\n    }\n\n    //  MVU  patchassistant  refresh:'affected' \n    await new Promise(resolve => setTimeout(resolve, 0));\n\n    try {\n      const shops = shopStoreMvu.getShops();\n      window.dispatchEvent(new CustomEvent('shop:cache:updated', { detail: { shops } }));\n      (window as any).__DEMO_SHOP_DATA__ = parsedData.jsonPatch;\n      console.log('[ShopGenerationAdapter]  MVU  UI ');\n    } catch (e) {\n      console.error('[ShopGenerationAdapter]  MVU ', e);\n    }\n  }\n}\n","import { ExecutionOptions, InteractionAdapter, InteractionResult } from './types';\n\n//  TS \ndeclare const eventOn: any;\ndeclare const iframe_events: any;\ndeclare const generate: any;\ndeclare const createChatMessages: any;\n\nexport class InlineInteractionService {\n  /**\n   * \n   */\n  async execute<InputData, ParsedData>(\n    adapter: InteractionAdapter<InputData, ParsedData>,\n    input: InputData,\n    options: ExecutionOptions = { silentUser: true, silentAssistant: true, stream: true },\n  ): Promise<InteractionResult<ParsedData>> {\n    console.log('[InlineInteractionService] Start execution');\n\n    // 1.  Prompt\n    const prompt = await adapter.buildPrompt(input);\n    console.log('[InlineInteractionService] Prompt built length:', prompt.length);\n\n    // 2.  (Silent)\n    if (options.silentUser) {\n      const userContent = typeof input === 'string' ? input : '';\n      await this.addToHistory('user', userContent);\n    }\n\n    // 3. \n    const onStream = (token: string) => {\n      if (options.stream && adapter.onStream) {\n        adapter.onStream(token);\n      }\n    };\n\n    if (options.stream && typeof eventOn === 'function' && typeof iframe_events !== 'undefined') {\n      try {\n        eventOn(iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY, onStream);\n      } catch (e) {\n        console.warn('Failed to register stream listener:', e);\n      }\n    }\n\n    // 4.  LLM\n    console.log('[InlineInteractionService] Generating...');\n    // generate \n    const fullResponse = await generate({\n      user_input: prompt,\n      should_stream: options.stream,\n    });\n    console.log('[InlineInteractionService] Generation complete. Length:', fullResponse.length);\n\n    // 5. \n    const parsedData = await adapter.parseResponse(fullResponse);\n    console.log('[InlineInteractionService] Response parsed');\n\n    // 6.  (MVU)\n    await adapter.handleSideEffects(parsedData);\n    console.log('[InlineInteractionService] Side effects handled');\n\n    // 7.  Assistant \n    //  refresh: 'affected' MVU\n    if (options.silentAssistant) {\n      await this.addToHistory('assistant', fullResponse, true); // 3MVU\n    }\n\n    return {\n      rawResponse: fullResponse,\n      parsedData,\n    };\n  }\n\n  /**\n   * \n   * @param role \n   * @param content \n   * @param triggerMvu MVU\n   */\n  private async addToHistory(role: 'user' | 'assistant', content: string, triggerMvu: boolean = false) {\n    try {\n      await createChatMessages([{ role, message: content }], {\n        // MVUassistant 'affected' \n        //  'none' user\n        refresh: triggerMvu ? 'affected' : 'none',\n      });\n      console.log(`[InlineInteractionService] Added ${role} message (triggerMvu: ${triggerMvu})`);\n    } catch (e) {\n      console.warn('[InlineInteractionService] Failed to add history', e);\n    }\n  }\n}\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withKeys as _withKeys, withDirectives as _withDirectives, toDisplayString as _toDisplayString, createStaticVNode as _createStaticVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"app-view active\" };\nconst _hoisted_2 = { class: \"app-content\" };\nconst _hoisted_3 = { class: \"category-grid\" };\nconst _hoisted_4 = { class: \"search-bar-container\" };\nconst _hoisted_5 = [\"disabled\"];\nimport { ref } from 'vue';\nimport { ShopGenerationAdapter } from '../Demo/utils/adapters/shop-generation';\nimport { InlineInteractionService } from '../Demo/utils/core';\n// \nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Home',\n    setup(__props) {\n        const searchKeyword = ref('');\n        const loading = ref(false);\n        const service = new InlineInteractionService();\n        const adapter = new ShopGenerationAdapter();\n        // MVU  json_patch\n        async function triggerGenerate(keyword) {\n            if (!keyword.trim())\n                return;\n            if (loading.value)\n                return;\n            loading.value = true;\n            try {\n                await service.execute(adapter, { keyword });\n            }\n            catch (e) {\n                console.error('[Home] ', e);\n            }\n            finally {\n                loading.value = false;\n            }\n        }\n        // \n        function search(keyword) {\n            triggerGenerate(`${keyword}`);\n        }\n        function doSearch() {\n            if (searchKeyword.value.trim()) {\n                search(searchKeyword.value.trim());\n            }\n        }\n        // DLC\n        function generateDLCContent() {\n            const dlcMessage = '--1\"\"71234567';\n            triggerGenerate(dlcMessage);\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                _cache[21] || (_cache[21] = _createElementVNode(\"div\", { class: \"app-header\" }, [\n                    _createElementVNode(\"div\", { class: \"title\" }, [\n                        _createElementVNode(\"i\", { class: \"fas fa-home\" }),\n                        _createElementVNode(\"span\", null, \"\")\n                    ])\n                ], -1 /* CACHED */)),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createCommentVNode(\" Slogan -  \"),\n                    _cache[20] || (_cache[20] = _createStaticVNode(\"<div class=\\\"slogan-section\\\" data-v-fff2c99a><div class=\\\"slogan-card\\\" data-v-fff2c99a><div class=\\\"slogan-bg-decoration\\\" data-v-fff2c99a><div class=\\\"decoration-circle circle-1\\\" data-v-fff2c99a></div><div class=\\\"decoration-circle circle-2\\\" data-v-fff2c99a></div><div class=\\\"decoration-circle circle-3\\\" data-v-fff2c99a></div></div><div class=\\\"slogan-content-wrapper\\\" data-v-fff2c99a><div class=\\\"slogan-content\\\" data-v-fff2c99a><h2 class=\\\"slogan-title\\\" data-v-fff2c99a><span class=\\\"title-line\\\" data-v-fff2c99a><span class=\\\"text-gradient\\\" data-v-fff2c99a></span></span><span class=\\\"title-line\\\" data-v-fff2c99a><span class=\\\"text-gradient\\\" data-v-fff2c99a></span></span></h2><p class=\\\"slogan-subtitle\\\" data-v-fff2c99a><span class=\\\"subtitle-text\\\" data-v-fff2c99a></span></p><div class=\\\"slogan-footer\\\" data-v-fff2c99a><div class=\\\"slogan-signature\\\" data-v-fff2c99a><div class=\\\"signature-text\\\" data-v-fff2c99a><i class=\\\"fas fa-heart\\\" data-v-fff2c99a></i><span data-v-fff2c99a></span><i class=\\\"fas fa-heart\\\" data-v-fff2c99a></i></div></div><div class=\\\"version-info\\\" data-v-fff2c99a>v3.0.0</div></div></div><!-- / DLC  --><details class=\\\"announcement-details\\\" data-v-fff2c99a><summary class=\\\"announcement-summary\\\" data-v-fff2c99a><span class=\\\"summary-left\\\" data-v-fff2c99a><i class=\\\"fas fa-bullhorn\\\" data-v-fff2c99a></i><span data-v-fff2c99a> / </span></span><i class=\\\"fas fa-chevron-down summary-arrow\\\" data-v-fff2c99a></i></summary><div class=\\\"announcement-panel\\\" data-v-fff2c99a><div class=\\\"panel-header\\\" data-v-fff2c99a><i class=\\\"fas fa-bullhorn\\\" data-v-fff2c99a></i><span data-v-fff2c99a></span></div><div class=\\\"panel-content\\\" data-v-fff2c99a><div class=\\\"notice-item\\\" data-v-fff2c99a><span class=\\\"notice-tag\\\" data-v-fff2c99a></span><span class=\\\"notice-text\\\" data-v-fff2c99a>DLC</span></div><div class=\\\"notice-item\\\" data-v-fff2c99a><span class=\\\"notice-tag\\\" data-v-fff2c99a></span><span class=\\\"notice-text\\\" data-v-fff2c99a>JSON </span></div><div class=\\\"notice-item\\\" data-v-fff2c99a><span class=\\\"notice-tag\\\" data-v-fff2c99a></span><span class=\\\"notice-text\\\" data-v-fff2c99a>jsonAPP0-1</span></div><div class=\\\"notice-item\\\" data-v-fff2c99a><span class=\\\"notice-tag\\\" data-v-fff2c99a></span><span class=\\\"notice-text\\\" data-v-fff2c99a></span></div><div class=\\\"notice-item\\\" data-v-fff2c99a><span class=\\\"notice-tag\\\" data-v-fff2c99a></span><span class=\\\"notice-text\\\" data-v-fff2c99a>js</span></div></div><div class=\\\"panel-header mt-3\\\" data-v-fff2c99a><i class=\\\"fas fa-gamepad\\\" data-v-fff2c99a></i><span data-v-fff2c99a></span></div><div class=\\\"panel-content\\\" data-v-fff2c99a><p class=\\\"instruction-text\\\" data-v-fff2c99a> 1. AI<br data-v-fff2c99a> 2. Xx<br data-v-fff2c99a> 3. APP<br data-v-fff2c99a> 4.  </p></div></div></details></div></div></div>\", 1)),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _createElementVNode(\"div\", {\n                            class: \"category-item\",\n                            onClick: _cache[0] || (_cache[0] = ($event) => (search('-23')))\n                        }, [...(_cache[9] || (_cache[9] = [\n                                _createElementVNode(\"div\", { class: \"icon-wrapper\" }, [\n                                    _createElementVNode(\"i\", { class: \"fas fa-street-view\" })\n                                ], -1 /* CACHED */),\n                                _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"div\", {\n                            class: \"category-item\",\n                            onClick: _cache[1] || (_cache[1] = ($event) => (search('--23')))\n                        }, [...(_cache[10] || (_cache[10] = [\n                                _createElementVNode(\"div\", { class: \"icon-wrapper\" }, [\n                                    _createElementVNode(\"i\", { class: \"fas fa-mask\" })\n                                ], -1 /* CACHED */),\n                                _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"div\", {\n                            class: \"category-item\",\n                            onClick: _cache[2] || (_cache[2] = ($event) => (search('-AV-23')))\n                        }, [...(_cache[11] || (_cache[11] = [\n                                _createElementVNode(\"div\", { class: \"icon-wrapper\" }, [\n                                    _createElementVNode(\"i\", { class: \"fas fa-video\" })\n                                ], -1 /* CACHED */),\n                                _createElementVNode(\"span\", null, \"AV\", -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"div\", {\n                            class: \"category-item\",\n                            onClick: _cache[3] || (_cache[3] = ($event) => (search('--23')))\n                        }, [...(_cache[12] || (_cache[12] = [\n                                _createElementVNode(\"div\", { class: \"icon-wrapper\" }, [\n                                    _createElementVNode(\"i\", { class: \"fas fa-camera-retro\" })\n                                ], -1 /* CACHED */),\n                                _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"div\", {\n                            class: \"category-item\",\n                            onClick: _cache[4] || (_cache[4] = ($event) => (search('-23')))\n                        }, [...(_cache[13] || (_cache[13] = [\n                                _createElementVNode(\"div\", { class: \"icon-wrapper\" }, [\n                                    _createElementVNode(\"i\", { class: \"fas fa-user-friends\" })\n                                ], -1 /* CACHED */),\n                                _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"div\", {\n                            class: \"category-item\",\n                            onClick: _cache[5] || (_cache[5] = ($event) => (search('--23')))\n                        }, [...(_cache[14] || (_cache[14] = [\n                                _createElementVNode(\"div\", { class: \"icon-wrapper\" }, [\n                                    _createElementVNode(\"i\", { class: \"fas fa-heart-broken\" })\n                                ], -1 /* CACHED */),\n                                _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"div\", {\n                            class: \"category-item\",\n                            onClick: _cache[6] || (_cache[6] = ($event) => (search('--23')))\n                        }, [...(_cache[15] || (_cache[15] = [\n                                _createElementVNode(\"div\", { class: \"icon-wrapper\" }, [\n                                    _createElementVNode(\"i\", { class: \"fas fa-briefcase\" })\n                                ], -1 /* CACHED */),\n                                _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"div\", {\n                            class: \"category-item\",\n                            onClick: _cache[7] || (_cache[7] = ($event) => (search('--23')))\n                        }, [...(_cache[16] || (_cache[16] = [\n                                _createElementVNode(\"div\", { class: \"icon-wrapper\" }, [\n                                    _createElementVNode(\"i\", { class: \"fas fa-users\" })\n                                ], -1 /* CACHED */),\n                                _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                            ]))])\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_4, [\n                        _cache[17] || (_cache[17] = _createElementVNode(\"i\", { class: \"fas fa-search\" }, null, -1 /* CACHED */)),\n                        _withDirectives(_createElementVNode(\"input\", {\n                            \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event) => ((searchKeyword).value = $event)),\n                            placeholder: \"AIXX\",\n                            onKeyup: _withKeys(doSearch, [\"enter\"])\n                        }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                            [_vModelText, searchKeyword.value]\n                        ]),\n                        _createElementVNode(\"button\", {\n                            class: \"search-btn\",\n                            disabled: loading.value,\n                            onClick: doSearch\n                        }, _toDisplayString(loading.value ? '...' : ''), 9 /* TEXT, PROPS */, _hoisted_5)\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", { class: \"list-section\" }, [\n                        _cache[19] || (_cache[19] = _createElementVNode(\"div\", { class: \"section-header\" }, [\n                            _createElementVNode(\"h3\", null, \"\")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"div\", { class: \"feature-button-grid\" }, [\n                            _createCommentVNode(\" DLC \"),\n                            _createElementVNode(\"div\", { class: \"feature-button-item\" }, [\n                                _createElementVNode(\"button\", {\n                                    class: \"dlc-button\",\n                                    title: \"DLC\",\n                                    onClick: generateDLCContent\n                                }, [...(_cache[18] || (_cache[18] = [\n                                        _createElementVNode(\"div\", { class: \"dlc-icon\" }, [\n                                            _createElementVNode(\"i\", { class: \"fas fa-history\" })\n                                        ], -1 /* CACHED */),\n                                        _createElementVNode(\"span\", { class: \"dlc-text\" }, \"DLC:1995\", -1 /* CACHED */),\n                                        _createElementVNode(\"div\", { class: \"dlc-badge\" }, \"NEW\", -1 /* CACHED */)\n                                    ]))])\n                            ])\n                        ])\n                    ])\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./Home.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Home.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Home.vue?vue&type=style&index=0&id=fff2c99a&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-fff2c99a\"]])\n\nexport default __exports__","import { createMemoryHistory, createRouter } from 'vue-router';\n\n//  - \n// \nimport SplashScreen from './SplashScreen.vue';\nimport Home from './Home.vue';\n\nconst Discover = () => import('./Discover.vue');\nconst Service = () => import('./Service.vue');\nconst ShopDetail = () => import('./ShopDetail.vue');\nconst ItemDetail = () => import('./ItemDetail.vue');\nconst Dashboard = () => import('./Dashboard.vue');\n\nconst router = createRouter({\n  history: createMemoryHistory(),\n  routes: [\n    { path: '/', component: SplashScreen, name: 'SplashScreen' },\n    { path: '/play', component: Dashboard, name: 'Play' },\n    { path: '/home', component: Home, name: 'Home' },\n    { path: '/discover', component: Discover, name: 'Discover' },\n    { path: '/service', component: Service, name: 'Service' },\n    { path: '/shop/:id', component: ShopDetail, name: 'ShopDetail', props: true },\n    { path: '/item/:id', component: ItemDetail, name: 'ItemDetail', props: true },\n  ],\n  // \n  scrollBehavior(_to, _from, savedPosition) {\n    if (savedPosition) {\n      return savedPosition;\n    } else {\n      return { top: 0 };\n    }\n  },\n});\n\n//  RouterView \nrouter.onError(err => {\n  try {\n    console.error('[Router] :', err);\n  } catch {\n    // ignore\n  }\n\n  // \n  try {\n    if (router.currentRoute.value.path !== '/home') {\n      router.replace('/home').catch(() => {});\n    }\n  } catch {\n    // ignore\n  }\n});\n\n//  push/replace  Promise rejection\nconst rawPush = router.push.bind(router);\nrouter.push = ((...args: Parameters<typeof router.push>) => {\n  return rawPush(...(args as any)).catch(err => {\n    try {\n      console.error('[Router] push :', err);\n    } catch {\n      // ignore\n    }\n    try {\n      if (router.currentRoute.value.path !== '/home') {\n        router.replace('/home').catch(() => {});\n      }\n    } catch {\n      // ignore\n    }\n    return Promise.resolve();\n  }) as any;\n}) as any;\n\nconst rawReplace = router.replace.bind(router);\nrouter.replace = ((...args: Parameters<typeof router.replace>) => {\n  return rawReplace(...(args as any)).catch(err => {\n    try {\n      console.error('[Router] replace :', err);\n    } catch {\n      // ignore\n    }\n    return Promise.resolve();\n  }) as any;\n}) as any;\n\nexport default router;\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, renderSlot as _renderSlot } from \"vue\";\nconst _hoisted_1 = {\n    key: 0,\n    class: \"error-boundary\"\n};\nconst _hoisted_2 = { class: \"error-content\" };\nimport { ref, onErrorCaptured, onMounted, onUnmounted } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'ErrorBoundary',\n    setup(__props) {\n        const hasError = ref(false);\n        const errorMessage = ref('');\n        const error = ref(null);\n        // \n        onErrorCaptured((err) => {\n            console.error('[] :', err);\n            error.value = err;\n            hasError.value = true;\n            errorMessage.value = err.message || '';\n            console.log('[] ');\n            return false; // \n        });\n        function onFatalErrorEvent(event) {\n            try {\n                const detail = event?.detail || {};\n                const msg = detail?.message ||\n                    detail?.error?.message ||\n                    detail?.reason?.message ||\n                    (typeof detail?.reason === 'string' ? detail.reason : '') ||\n                    '';\n                console.error('[] :', detail);\n                error.value = detail?.error || detail?.reason || new Error(msg);\n                hasError.value = true;\n                errorMessage.value = msg;\n            }\n            catch (e) {\n                // ignore\n            }\n        }\n        onMounted(() => {\n            window.addEventListener('app-fatal-error', onFatalErrorEvent);\n        });\n        onUnmounted(() => {\n            window.removeEventListener('app-fatal-error', onFatalErrorEvent);\n        });\n        // \n        const retry = () => {\n            hasError.value = false;\n            error.value = null;\n            errorMessage.value = '';\n            // \n            window.location.reload();\n        };\n        return (_ctx, _cache) => {\n            return (hasError.value)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                    _createElementVNode(\"div\", _hoisted_2, [\n                        _cache[1] || (_cache[1] = _createElementVNode(\"i\", { class: \"fas fa-exclamation-triangle\" }, null, -1 /* CACHED */)),\n                        _cache[2] || (_cache[2] = _createElementVNode(\"h3\", null, \"\", -1 /* CACHED */)),\n                        _createElementVNode(\"p\", null, _toDisplayString(errorMessage.value), 1 /* TEXT */),\n                        _createElementVNode(\"button\", {\n                            class: \"retry-btn\",\n                            onClick: retry\n                        }, [...(_cache[0] || (_cache[0] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-redo\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\" \", -1 /* CACHED */)\n                            ]))])\n                    ])\n                ]))\n                : _renderSlot(_ctx.$slots, \"default\", { key: 1 });\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./ErrorBoundary.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ErrorBoundary.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ErrorBoundary.vue?vue&type=style&index=0&id=157c6738&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-157c6738\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = { class: \"z-50 flex h-full w-20 shrink-0 flex-col items-center space-y-6 border-r border-blue-500/20 bg-gradient-to-b from-slate-900/80 to-black/80 py-6 backdrop-blur-xl\" };\nconst _hoisted_2 = { class: \"flex flex-1 flex-col space-y-4\" };\nconst _hoisted_3 = [\"onClick\", \"title\"];\nconst _hoisted_4 = {\n    key: 0,\n    class: \"absolute top-1/2 -right-1 h-6 w-1 -translate-y-1/2 transform rounded-full bg-gradient-to-b from-blue-400 to-violet-500\"\n};\nconst _hoisted_5 = { class: \"mt-auto flex flex-col space-y-4 pb-4\" };\nconst _hoisted_6 = [\"title\"];\nimport { ref, onMounted, onUnmounted } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Sidebar',\n    setup(__props) {\n        const router = useRouter();\n        const route = useRoute();\n        const isDark = ref(false);\n        const menuItems = [\n            { icon: 'fas fa-gamepad', label: 'Play', path: '/play' },\n            { icon: 'fas fa-home', label: 'Home', path: '/home' },\n            { icon: 'fas fa-concierge-bell', label: 'Service', path: '/service' },\n            { icon: 'fas fa-compass', label: 'Discover', path: '/discover' },\n        ];\n        function navigate(path) {\n            router.push(path);\n        }\n        function isActive(path) {\n            return route.path === path;\n        }\n        function toggleTheme() {\n            isDark.value = !isDark.value;\n            // Trigger global theme change event\n            window.dispatchEvent(new CustomEvent('theme-change', {\n                detail: { isDark: isDark.value },\n            }));\n            // Persist theme\n            localStorage.setItem('app-theme', isDark.value ? 'dark' : 'light');\n        }\n        function onThemeChange(event) {\n            isDark.value = event.detail.isDark;\n        }\n        onMounted(() => {\n            // Sync initial state\n            const savedTheme = localStorage.getItem('app-theme');\n            isDark.value = savedTheme === 'dark';\n            // Listen for external theme changes\n            window.addEventListener('theme-change', onThemeChange);\n        });\n        onUnmounted(() => {\n            window.removeEventListener('theme-change', onThemeChange);\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" Logo \"),\n                _createElementVNode(\"div\", {\n                    class: \"flex h-12 w-12 shrink-0 cursor-pointer items-center justify-center rounded-xl bg-gradient-to-br from-blue-500 to-violet-600 shadow-lg shadow-blue-500/25 transition-transform hover:scale-105\",\n                    onClick: _cache[0] || (_cache[0] = ($event) => (navigate('/play'))),\n                    title: \"Go to Play\"\n                }, [...(_cache[1] || (_cache[1] = [\n                        _createElementVNode(\"div\", { class: \"h-6 w-6 rounded-sm bg-white\" }, null, -1 /* CACHED */)\n                    ]))]),\n                _createCommentVNode(\" Menu Items \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    (_openBlock(), _createElementBlock(_Fragment, null, _renderList(menuItems, (item) => {\n                        return _createElementVNode(\"button\", {\n                            key: item.path,\n                            onClick: ($event) => (navigate(item.path)),\n                            title: item.label,\n                            class: _normalizeClass([\n                                'group relative flex h-12 w-12 items-center justify-center rounded-xl transition-all duration-300',\n                                isActive(item.path)\n                                    ? 'border border-blue-400/30 bg-gradient-to-br from-blue-500/20 to-violet-600/20 shadow-lg shadow-blue-500/20'\n                                    : 'border border-slate-700/50 bg-slate-800/50 hover:border-blue-500/30 hover:bg-slate-700/50',\n                            ])\n                        }, [\n                            _createElementVNode(\"i\", {\n                                class: _normalizeClass([\n                                    item.icon,\n                                    'text-lg transition-colors duration-300',\n                                    isActive(item.path) ? 'text-blue-400' : 'text-slate-400 group-hover:text-blue-400',\n                                ])\n                            }, null, 2 /* CLASS */),\n                            (isActive(item.path))\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4))\n                                : _createCommentVNode(\"v-if\", true)\n                        ], 10 /* CLASS, PROPS */, _hoisted_3);\n                    }), 64 /* STABLE_FRAGMENT */))\n                ]),\n                _createCommentVNode(\" Bottom Actions (Theme Toggle) \"),\n                _createElementVNode(\"div\", _hoisted_5, [\n                    _createElementVNode(\"button\", {\n                        onClick: toggleTheme,\n                        class: \"group relative flex h-12 w-12 shrink-0 items-center justify-center rounded-xl border border-slate-700/50 bg-slate-800/50 transition-all duration-300 hover:border-blue-500/30 hover:bg-slate-700/50\",\n                        title: isDark.value ? 'Switch to Light Mode' : 'Switch to Dark Mode'\n                    }, [\n                        _createElementVNode(\"i\", {\n                            class: _normalizeClass([\n                                'fas',\n                                isDark.value ? 'fa-sun text-yellow-400' : 'fa-moon text-blue-400',\n                                'text-lg transition-colors duration-300',\n                            ])\n                        }, null, 2 /* CLASS */)\n                    ], 8 /* PROPS */, _hoisted_6)\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./Sidebar.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Sidebar.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createBlock as _createBlock, resolveDynamicComponent as _resolveDynamicComponent, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode, resolveComponent as _resolveComponent, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = [\"data-theme\"];\nconst _hoisted_2 = { class: \"flex h-full min-h-0 w-full\" };\nconst _hoisted_3 = { class: \"relative flex min-h-0 min-w-0 flex-1 flex-col\" };\nconst _hoisted_4 = { class: \"flex min-h-0 flex-1 flex-col\" };\nimport { computed, onErrorCaptured, onMounted, onUnmounted, ref } from 'vue';\nimport { useRoute } from 'vue-router';\nimport ErrorBoundary from './components/ErrorBoundary.vue';\nimport Sidebar from './components/Sidebar.vue';\nimport { enableIframeFullHeight } from './utils';\n// \nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'app',\n    setup(__props) {\n        const currentTheme = ref('light');\n        const route = useRoute();\n        const hideSidebar = computed(() => route.path === '/play');\n        let disableIframeFullHeight = () => { };\n        // \n        function initTheme() {\n            // \n            const savedTheme = localStorage.getItem('app-theme') || 'light';\n            const isDark = savedTheme === 'dark';\n            // Vue\n            currentTheme.value = savedTheme;\n            // documentElementCSS\n            document.documentElement.setAttribute('data-theme', savedTheme);\n            if (isDark) {\n                document.documentElement.classList.add('dark');\n            }\n            else {\n                document.documentElement.classList.remove('dark');\n            }\n            console.log(`[] ${isDark ? '' : ''}`);\n        }\n        // \n        onMounted(() => {\n            initTheme();\n            window.addEventListener('theme-change', onThemeChange);\n            disableIframeFullHeight = enableIframeFullHeight({ minHeightPx: 480 });\n        });\n        function onThemeChange(event) {\n            const newTheme = event.detail.isDark ? 'dark' : 'light';\n            currentTheme.value = newTheme;\n            document.documentElement.setAttribute('data-theme', newTheme);\n            if (newTheme === 'dark') {\n                document.documentElement.classList.add('dark');\n            }\n            else {\n                document.documentElement.classList.remove('dark');\n            }\n            console.log(`[] ${newTheme === 'dark' ? '' : ''}`);\n        }\n        onUnmounted(() => {\n            window.removeEventListener('theme-change', onThemeChange);\n            disableIframeFullHeight();\n        });\n        // \n        onErrorCaptured((err) => {\n            console.error('[] :', err);\n            return false;\n        });\n        return (_ctx, _cache) => {\n            const _component_RouterView = _resolveComponent(\"RouterView\");\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: \"relative flex h-full w-full flex-col overflow-hidden bg-slate-950 text-white selection:bg-blue-500/30\",\n                \"data-theme\": currentTheme.value\n            }, [\n                _createCommentVNode(\" Background Effects \"),\n                _cache[0] || (_cache[0] = _createElementVNode(\"div\", { class: \"absolute inset-0 -z-20 bg-gradient-to-br from-slate-950 via-slate-900 to-black\" }, null, -1 /* CACHED */)),\n                _cache[1] || (_cache[1] = _createElementVNode(\"div\", { class: \"absolute inset-0 -z-10 bg-gradient-to-br from-blue-600/5 via-purple-600/5 to-orange-600/5\" }, null, -1 /* CACHED */)),\n                _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"absolute top-0 left-1/4 -z-10 h-96 w-96 animate-pulse rounded-full bg-blue-500/10 blur-3xl\" }, null, -1 /* CACHED */)),\n                _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"absolute right-1/4 bottom-0 -z-10 h-96 w-96 animate-pulse rounded-full bg-purple-500/10 blur-3xl delay-1000\" }, null, -1 /* CACHED */)),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createCommentVNode(\" Sidebar (Play ) \"),\n                    (!hideSidebar.value)\n                        ? (_openBlock(), _createBlock(Sidebar, { key: 0 }))\n                        : _createCommentVNode(\"v-if\", true),\n                    _createCommentVNode(\" Main Content Area \"),\n                    _createElementVNode(\"main\", _hoisted_3, [\n                        _createVNode(ErrorBoundary, null, {\n                            default: _withCtx(() => [\n                                _createElementVNode(\"div\", _hoisted_4, [\n                                    _createVNode(_component_RouterView, null, {\n                                        default: _withCtx(({ Component }) => [\n                                            _createVNode(_Transition, { name: \"fade\" }, {\n                                                default: _withCtx(() => [\n                                                    Component\n                                                        ? (_openBlock(), _createBlock(_resolveDynamicComponent(Component), {\n                                                            key: 0,\n                                                            class: \"min-h-0 flex-1\"\n                                                        }))\n                                                        : _createCommentVNode(\"v-if\", true)\n                                                ]),\n                                                _: 2 /* DYNAMIC */\n                                            }, 1024 /* DYNAMIC_SLOTS */)\n                                        ]),\n                                        _: 1 /* STABLE */\n                                    })\n                                ])\n                            ]),\n                            _: 1 /* STABLE */\n                        })\n                    ])\n                ])\n            ], 8 /* PROPS */, _hoisted_1));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./app.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./app.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./app.vue?vue&type=style&index=0&id=7df31192&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","/**\n * \n * \n */\n\n// \nconst ENABLE_LOGS = process.env.NODE_ENV !== 'production';\nconst ENABLE_PERF_VERBOSE = false;\n\nclass Logger {\n  private prefix: string;\n\n  constructor(prefix: string = '') {\n    this.prefix = prefix ? `[${prefix}] ` : '';\n  }\n\n  private formatArgs(args: any[]): any[] {\n    if (this.prefix) {\n      if (typeof args[0] === 'string') {\n        return [`${this.prefix}${args[0]}`, ...args.slice(1)];\n      }\n      return [this.prefix, ...args];\n    }\n    return args;\n  }\n\n  log(...args: any[]) {\n    if (ENABLE_LOGS) {\n      console.log(...this.formatArgs(args));\n    }\n  }\n\n  info(...args: any[]) {\n    if (ENABLE_LOGS) {\n      console.info(...this.formatArgs(args));\n    }\n  }\n\n  warn(...args: any[]) {\n    console.warn(...this.formatArgs(args));\n  }\n\n  error(...args: any[]) {\n    console.error(...this.formatArgs(args));\n  }\n\n  //  - \n  perf(...args: any[]) {\n    if (ENABLE_PERF_VERBOSE) {\n      console.log(...this.formatArgs(['[]', ...args]));\n    }\n  }\n}\n\nexport const logger = new Logger();\nexport const perfLogger = new Logger('');\nexport const mvuLogger = new Logger('MVU');\nexport const sysLogger = new Logger('');\n","import { createApp } from 'vue';\nimport $ from 'jquery';\nimport _ from 'lodash';\nimport router from './';\nimport app from './app.vue';\n// import '@fortawesome/fontawesome-free/css/all.min.css';\n// import 'toastr/build/toastr.min.css';\n\n//  APP_READY undefined\ntry {\n  (window as any).APP_READY = false;\n} catch {\n  // ignore\n}\ntry {\n  (window.parent as any).APP_READY = false;\n} catch {\n  // ignore\n}\ntry {\n  (window.top as any).APP_READY = false;\n} catch {\n  // ignore\n}\n\n//  jQuery/ $\n(window as any).$ = $;\n(window as any).jQuery = $;\n\n//  lodash/ _\n(window as any)._ = _;\n\n// Vue Router$(() => {})\nconst vueApp = createApp(app);\nvueApp.use(router);\n\nimport { logger, perfLogger, mvuLogger, sysLogger } from './logger';\n\n// \nconst perfStartTime = performance.now();\n\n// Web Vitals\nconst initWebVitalsMonitoring = () => {\n  try {\n    // LCP (Largest Contentful Paint)\n    const lcpObserver = new PerformanceObserver(entryList => {\n      const entries = entryList.getEntries();\n      const lastEntry = entries[entries.length - 1];\n      perfLogger.perf(`LCP: ${lastEntry.startTime.toFixed(2)}ms`, lastEntry);\n    });\n    lcpObserver.observe({ type: 'largest-contentful-paint', buffered: true });\n\n    // FID (First Input Delay) - Event Timing API\n    const fidObserver = new PerformanceObserver(entryList => {\n      for (const entry of entryList.getEntries()) {\n        if (entry.entryType === 'first-input') {\n          const firstInput = entry as PerformanceEventTiming;\n          const fid = firstInput.processingStart - firstInput.startTime;\n          perfLogger.perf(`FID: ${fid.toFixed(2)}ms`, firstInput);\n        }\n      }\n    });\n    fidObserver.observe({ type: 'first-input', buffered: true });\n\n    // CLS (Cumulative Layout Shift)\n    let clsValue = 0;\n    const clsEntries: LayoutShift[] = [];\n    const clsObserver = new PerformanceObserver(entryList => {\n      for (const entry of entryList.getEntries()) {\n        if (entry.entryType === 'layout-shift') {\n          const layoutShift = entry as LayoutShift;\n          if (!layoutShift.hadRecentInput) {\n            clsEntries.push(layoutShift);\n            clsValue += layoutShift.value;\n            perfLogger.perf(`CLS: ${clsValue.toFixed(4)}`, layoutShift);\n          }\n        }\n      }\n    });\n    clsObserver.observe({ type: 'layout-shift', buffered: true });\n\n    //  (Long Tasks)\n    const longTaskObserver = new PerformanceObserver(entryList => {\n      for (const entry of entryList.getEntries()) {\n        if (entry.duration > 50) {\n          // 50ms\n          perfLogger.perf(`: ${entry.duration.toFixed(2)}ms`, entry);\n        }\n      }\n    });\n    longTaskObserver.observe({ type: 'longtask', buffered: true });\n\n    perfLogger.log('Web Vitals');\n  } catch (error) {\n    perfLogger.warn('Web Vitals:', error);\n  }\n};\n\n// Chrome\nconst initMemoryMonitoring = () => {\n  try {\n    // performance.memory API\n    if ('memory' in performance) {\n      const memory = (performance as any).memory;\n      perfLogger.perf(\n        `: ${(memory.usedJSHeapSize / 1024 / 1024).toFixed(2)}MB / ${(memory.totalJSHeapSize / 1024 / 1024).toFixed(2)}MB`,\n      );\n\n      // \n      setInterval(() => {\n        const mem = (performance as any).memory;\n        const usedMB = mem.usedJSHeapSize / 1024 / 1024;\n        const totalMB = mem.totalJSHeapSize / 1024 / 1024;\n        const percentage = (usedMB / totalMB) * 100;\n        const percentageText = percentage.toFixed(1);\n\n        // \n        if (usedMB > 50 || percentage > 80) {\n          perfLogger.warn(`: ${usedMB.toFixed(2)}MB/${totalMB.toFixed(2)}MB (${percentageText}%)`);\n        }\n      }, 30000); // 30\n\n      perfLogger.log('');\n    } else {\n      perfLogger.log('performance.memory API');\n    }\n  } catch (error) {\n    perfLogger.warn(':', error);\n  }\n};\n\n// \nconst preloadCriticalRoutes = async () => {\n  try {\n    // \n    const criticalRoutes = ['/service', '/play'];\n    await Promise.all(\n      criticalRoutes.map(path => {\n        const route = router.resolve(path);\n        // Vue Router\n        return route;\n      }),\n    );\n    perfLogger.log('');\n  } catch (error) {\n    perfLogger.warn(':', error);\n  }\n};\n\n// \nconst preloadCriticalResources = async () => {\n  try {\n    // \n    const resources: string[] = [\n      // \n    ];\n\n    if (resources.length === 0) return;\n\n    await Promise.all(\n      resources.map(url => {\n        return new Promise((resolve, reject) => {\n          const link = document.createElement('link');\n          link.rel = 'prefetch';\n          link.href = url;\n          link.onload = resolve;\n          link.onerror = reject;\n          document.head.appendChild(link);\n        });\n      }),\n    );\n    perfLogger.log('');\n  } catch (error) {\n    perfLogger.warn(':', error);\n  }\n};\n\n// MVU\nconst waitForMvu = async (timeout = 5000) => {\n  //  waitGlobalInitialized\n  if (typeof (window as any).waitGlobalInitialized !== 'function') {\n    mvuLogger.info(' MVU ');\n    return null;\n  }\n\n  return Promise.race([\n    waitGlobalInitialized('Mvu'),\n    new Promise((_, reject) => setTimeout(() => reject(new Error('MVU')), timeout)),\n  ]).catch(err => {\n    mvuLogger.warn(':', err);\n    return null; // null\n  });\n};\n\n// \nconst initApp = async () => {\n  try {\n    // \n    const initTasks = Promise.all([\n      waitForMvu(), // MVU\n      preloadCriticalRoutes(), // \n      preloadCriticalResources(), // \n    ]);\n\n    // \n    const [mvuReady] = await initTasks;\n\n    //  iframe localStorage.setItem('app-perf-monitor','1')\n    const enablePerfMonitoring = (() => {\n      try {\n        return localStorage.getItem('app-perf-monitor') === '1';\n      } catch {\n        return false;\n      }\n    })();\n    if (enablePerfMonitoring) {\n      initWebVitalsMonitoring();\n      initMemoryMonitoring();\n    }\n\n    // \n    const initTime = performance.now() - perfStartTime;\n    perfLogger.log(`: ${initTime.toFixed(2)}ms`);\n\n    // MVU\n    if (mvuReady) {\n      sysLogger.log(`(${initTime.toFixed(0)}ms)`);\n    } else {\n      sysLogger.warn(' (MVU)');\n    }\n\n    // Vue\n    vueApp.mount('#app');\n\n    //  APP /\n    try {\n      (window as any).APP_READY = true;\n    } catch {\n      // ignore\n    }\n    try {\n      (window.parent as any).APP_READY = true;\n    } catch {\n      // ignore\n    }\n    try {\n      (window.top as any).APP_READY = true;\n    } catch {\n      // ignore\n    }\n    try {\n      if (typeof (window as any).eventEmit === 'function' && typeof (window as any).tavern_events !== 'undefined') {\n        // APP_READY\n        (window as any).eventEmit((window as any).tavern_events.APP_READY);\n      }\n    } catch {\n      // ignore\n    }\n\n    // \n    const mountTime = performance.now() - perfStartTime;\n    perfLogger.log(`: ${mountTime.toFixed(2)}ms`);\n  } catch (err) {\n    sysLogger.error(':', err);\n    // \n  }\n};\n\n//  jQuery  DOMContentLoaded\n$(() => {\n  //  - VueonMounted\n  initApp();\n});\n\n//  jQuery \n$(window).on('pagehide', () => {\n  const unloadTime = performance.now() - perfStartTime;\n  perfLogger.log(`: ${unloadTime.toFixed(2)}ms`);\n  sysLogger.log('');\n});\n\n//  - Promise\nwindow.addEventListener('unhandledrejection', event => {\n  sysLogger.error('Promise:', event.reason);\n  try {\n    window.dispatchEvent(\n      new CustomEvent('app-fatal-error', {\n        detail: { type: 'unhandledrejection', reason: event.reason },\n      }),\n    );\n  } catch {\n    // ignore\n  }\n});\n\n//  - JavaScript\nwindow.addEventListener('error', event => {\n  sysLogger.error('JavaScript:', event.error);\n  try {\n    window.dispatchEvent(\n      new CustomEvent('app-fatal-error', {\n        detail: {\n          type: 'error',\n          error: event.error,\n          message: event.message,\n          filename: event.filename,\n          lineno: event.lineno,\n        },\n      }),\n    );\n  } catch {\n    // ignore\n  }\n});\n"],"names":["CACHE_KEY","LEGACY_CACHE_KEYS","readCache","option","type","window","getVariables","vars","cached","map","k","find","v","Array","isArray","filter","Boolean","sort","a","b","__cachedAt","slice","e","raw","localStorage","getItem","parsed","JSON","parse","console","warn","readCacheFromLocalStorage","extractOrdersFromMvuData","mvuData","stat","stat_data","orders","Object","values","o","idx","order","id","status","val","includes","trim","num","Number","isNaN","toFixed","normalizePercent","originalData","normalizeOrder","async","loadOrdersFromMVU","waitGlobalInitialized","data","currentId","getCurrentMessageId","d","Mvu","getMvuData","message_id","Error","length","list","withCap","Date","now","updateVariablesWith","next","insertOrAssignVariables","setItem","stringify","writeCache","error","filterActiveOrders","String","filterCompletedOrders","readCachedOrders","module","exports","Vue","_","normalizeBullet","line","replace","PackageSchema","z","object","union","string","number","transform","optional","shop_id","shop_name","name","min","price","default","stars","max","tags","array","icon","nullable","image1","image2","image3","description","content","reviews","ShopSchema","address","city","shoptags","slogan","theme","packages","logParse","step","ok","detail","prefix","log","safeGetChatMessages","range","getChatMessages","emitParseEvent","event","dispatchEvent","CustomEvent","createIdFactory","counter","fetchMessagePayload","tried","Set","pushCandidate","c","add","current","undefined","safeGetCurrentMessageId","candidate","from","entries","parts","forEach","entry","message","swipes","swipeId","swipe_id","push","text","join","messageId","err","hashKey","str","hash","i","charCodeAt","toString","generateShopId","shop","explicit","basis","generatePkgId","pkg","shopId","makePkgId","flattenPackagesFromShops","shops","flatMap","s","parseTextOnly","src","makeShopId","pkgNameCounter","splitArrayValues","split","rawShopSections","part","closeIndex","indexOf","rawSection","section","shopHeader","packageSectionsRaw","shopLines","nameLine","test","rawName","bracketIndex","substring","idLine","shoptagsIndex","findIndex","firstVal","match","startsWith","pkgSectionRaw","pkgLines","currentArrayField","currentScalarField","isKnownField","keyRaw","toLowerCase","fieldName","value","parseFloat","cleaned","sanitizeShops","Map","firstPkgName","base","dedupeKey","has","set","parseShopData","finalizeResult","sanitizedShops","_m","tag","normalizeBracketTags","slicePhoneContent","jsonNorm","anchor","braceStart","globalStart","end","findMatchingBrace","extractJsonNorm","normalized","normalizeJsonData","jsParsed","objectLiteral","source","tplIndex","search","braceEnd","firstBrace","extractTemplateObject","balanced","depth","ch","Math","repeat","balanceBraces","looseParsed","tryParseLooseJsLiteral","tryParseJsTemplate","some","textParsed","YAML","sections","combinedShops","cleanSection","viaText","parsedShop","fallbackShop","parseYamlShopByRegex","isInvalidEmptyResult","res","jsonText","codeBlockMatch","braceIndex","finalRes","tolerant","startCandidates","shopsKeywordIndex","braceBeforeShops","lastIndexOf","unshift","start","endCandidates","lastBrace","lastBracket","__","tryParseLargestJsonChunk","singlePkg","lines","l","key","parseLoosePackage","bulletPkg","collectingContent","collectingReviews","bulletMatch","parseContentBulletsOnly","result","isDefaultShop","hasOnlyGhostPkgs","every","p","hasExplicitTag","hasYamlFeature","startIndex","inString","isEscaped","processing","stringStore","strSkeleton","safeStr","finalStr","parseInt","Function","fn","idMatch","nameMatch","packagesIndex","packagesText","pkgSection","firstLineEnd","extractField","pattern","RegExp","extractList","rawShops","pushShop","rawShop","normalizedPkgs","rawPkg","nested","shopMap","pkgMap","pkgs","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","__name","setup","__props","route","useRoute","itemData","ref","activeTab","showModal","remarkText","shopStoreApi","shopStoreMvu","fallbackLogPrinted","showRemarkModal","closeRemarkModal","confirmOrder","fullCommand","triggerSlash","sendToAI","onMounted","itemId","params","payload","errors","storedShops","getShops","extractDataFromMessage","combined","dedupePackages","fromQueryName","query","want","candidates","_ctx","_cache","onClick","$event","$router","back","active","review","style","borderStyle","display","placeholder","router","useRouter","shopInfo","shopPackages","shopIdParam","mvuShops","dedupe","shopname","path","getNestedValue","obj","fallback","keys","enableIframeFullHeight","options","minHeightPx","self","top","iframe","frameElement","rafId","apply","doc","parent","document","innerHeight","sel","el","querySelector","clientHeight","documentElement","pickHostHeight","height","maxHeight","schedule","requestAnimationFrame","addEventListener","removeEventListener","cancelAnimationFrame","navigateToDefaultPage","Promise","race","reject","setTimeout","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_62","_hoisted_63","_hoisted_64","_hoisted_65","_hoisted_66","_hoisted_67","_hoisted_68","_hoisted_69","_hoisted_70","_hoisted_71","_hoisted_72","_hoisted_73","_hoisted_74","_hoisted_75","_hoisted_76","_hoisted_77","_hoisted_78","_hoisted_79","_hoisted_80","_hoisted_81","_hoisted_82","_hoisted_83","_hoisted_84","_hoisted_85","_hoisted_86","_hoisted_87","_hoisted_88","_hoisted_89","_hoisted_90","_hoisted_91","_hoisted_92","_hoisted_93","_hoisted_94","_hoisted_95","_hoisted_96","_hoisted_97","girlsData","currentGirlIndex","showDetails","isLoading","isRefreshing","errorMessage","showPsychology","showBody","showExperience","watch","currentGirl","computed","refreshData","toastr","success","info","basicInfo","identity","age","packageInfo","features","orderStatus","orderStatusClass","heartbeatDisplay","heartbeatStatusClass","heartbeatColor","starRating","rating","floor","affectionDisplay","serviceProgress","count","serviceProgressBarWidth","progressColor","serviceCount","displayClothing","clothing","hasValidClothing","clothingIcon","onActivated","girl","index","getGirlName","n","feature","color","width","background","show","sfc","props","target","__vccOpts","selectedPackage","selectedShopId","selectedPackageId","coerceId","setSelectedPackage","setSelectedPackageFromShop","shopName","refreshSelectedPackageFromMvu","tryFind","sid","pid","pkgId","found","variant","activeIndex","lightboxOpen","copiedHint","broken","toSlot","label","rawValue","endsWith","stripWrapper","isLikelyImageUrl","kind","slots","title","subtitle","setActive","open","close","onImgError","copyActive","navigator","clipboard","writeText","ta","createElement","position","left","body","appendChild","select","execCommand","removeChild","refreshFromMvu","onUnmounted","slot","alt","onError","streamContent","isStreaming","inputEl","userInput","showScene","logScrollEl","headerTitle","headerSubTitle","headerHint","safeAreaBottom","selectedInfo","quickActions","command","appendLogBlock","clearLog","send","tryTriggerSlash","nextTick","focus","toggleScene","refreshHeaderFromMvu","snap","getSnapshot","scene","scrollTop","scrollHeight","scrollToBottom","stopStreamHint","stopMessageReceive","m","role","msg","initFromChat","eventOn","tavern_events","STREAM_TOKEN_RECEIVED","MESSAGE_RECEIVED","stop","PackageImageGallery","disabled","ref_key","item","paddingBottom","onKeydown","historyOverlayOpen","playPanelsOpen","loading","historyItems","selectedOrder","currentView","orderRemark","remarkTextarea","closeAll","backToList","formatPregnancyChance","isFinite","clamped","round","extractOrderFeatures","pushFeature","trimmed","currentOrderFeatures","openRemarkModal","package_name","girl_name","cmd","copied","copyToClipboard","refreshHistory","completed","order_time","order_status","catch","openHistory","remark","x","priceText","starsText","descriptionText","placeOrder","extra","pkgName","note","t","f","balance","spending","activeOrders","balanceText","spendingText","activeOrdersText","refresh","safeGetMvuSnapshot","girlName","girlIdentity","girlAge","girlStatus","currentExp","maxExp","heartbeat","avatarText","g","affection","updateDisplay","packageItems","sIdx","pIdx","priceRaw","selected","tagsText","onShopCacheUpdated","navItems","isDark","toggleTheme","refreshApp","reloadIframe","location","reload","regenerateHomeShops","savedTheme","ServiceStatus","ServiceStats","ShopList","PackageDetail","PackageImages","sceneText","currentGirlText","heartbeatText","focusText","timer","setInterval","clearInterval","openPanels","RpgHud","Play","PlayPanelsModal","HistoryOverlay","fileInput","loadShops","triggerImport","click","handleFileChange","input","files","file","size","MAX_IMPORT_SIZE_MB","reader","FileReader","onload","safeList","saved","saveShops","readAsText","deleteShop","accept","onChange","ShopItemSchema","coerce","strict","describe","Schema","enum","record","boolean","prefault","normalizeToArray","statData","safeParse","shopList","rawShopId","safeShops","r","scope","nextStat","replaceVariables","newShops","this","VueRouter","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","definition","defineProperty","enumerable","get","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","$","isFading","skipSplash","targetPath","animationDelay","ShopGenerationAdapter","buildPrompt","injectionId","injectPrompts","should_scan","once","keyword","parseResponse","rawText","startTag","endIndex","jsonPatchMatch","jsonPatch","analysisMatch","analysis","handleSideEffects","parsedData","resolve","__DEMO_SHOP_DATA__","InlineInteractionService","execute","adapter","silentUser","silentAssistant","stream","prompt","userContent","addToHistory","onStream","token","iframe_events","STREAM_TOKEN_RECEIVED_INCREMENTALLY","fullResponse","generate","user_input","should_stream","rawResponse","triggerMvu","createChatMessages","searchKeyword","service","triggerGenerate","doSearch","generateDLCContent","onKeyup","createRouter","history","createMemoryHistory","routes","component","SplashScreen","Home","scrollBehavior","_to","_from","savedPosition","currentRoute","rawPush","bind","args","rawReplace","hasError","onFatalErrorEvent","reason","onErrorCaptured","retry","$slots","menuItems","navigate","isActive","onThemeChange","currentTheme","hideSidebar","disableIframeFullHeight","newTheme","setAttribute","classList","remove","initTheme","_component_RouterView","Sidebar","ErrorBoundary","Component","ENABLE_LOGS","Logger","constructor","formatArgs","perf","perfLogger","mvuLogger","sysLogger","APP_READY","jQuery","vueApp","createApp","app","use","perfStartTime","performance","preloadCriticalRoutes","criticalRoutes","all","preloadCriticalResources","resources","url","link","rel","href","onerror","head","waitForMvu","timeout","initApp","initTasks","mvuReady","PerformanceObserver","entryList","getEntries","lastEntry","startTime","observe","buffered","entryType","firstInput","fid","processingStart","clsValue","clsEntries","layoutShift","hadRecentInput","duration","initWebVitalsMonitoring","memory","usedJSHeapSize","totalJSHeapSize","mem","usedMB","totalMB","percentage","percentageText","initMemoryMonitoring","initTime","mount","eventEmit","mountTime","on","unloadTime","filename","lineno"],"ignoreList":[],"sourceRoot":""}